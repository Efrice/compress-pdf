var an=Object.defineProperty;var on=(e,t,s)=>t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var De=(e,t,s)=>(on(e,typeof t!="symbol"?t+"":t,s),s),dt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var k=(e,t,s)=>(dt(e,t,"read from private field"),s?s.call(e):t.get(e)),re=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},ge=(e,t,s,n)=>(dt(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),rt=(e,t,s,n)=>({set _(i){ge(e,t,i,s)},get _(){return k(e,t,n)}}),ce=(e,t,s)=>(dt(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const y of l.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&n(y)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();function makeMap(e,t){const s=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)s[n[i]]=!0;return t?i=>!!s[i.toLowerCase()]:i=>!!s[i]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$1.call(e,t),isArray=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction$1=e=>typeof e=="function",isString$1=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>isObject(e)&&isFunction$1(e.then)&&isFunction$1(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString$1(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,s)=>s?s.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let s=0;s<e.length;s++)e[s](t)},def=(e,t,s)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:s})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=isString$1(n)?parseStringStyle(n):normalizeStyle(n);if(i)for(const l in i)t[l]=i[l]}return t}else{if(isString$1(e))return e;if(isObject(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=new RegExp("\\/\\*.*?\\*\\/","gs");function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(s=>{if(s){const n=s.split(propertyDelimiterRE);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function normalizeClass(e){let t="";if(isString$1(e))t=e;else if(isArray(e))for(let s=0;s<e.length;s++){const n=normalizeClass(e[s]);n&&(t+=n+" ")}else if(isObject(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}const toDisplayString=e=>isString$1(e)?e:e==null?"":isArray(e)||isObject(e)&&(e.toString===objectToString||!isFunction$1(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i])=>(s[`${n} =>`]=i,s),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject(t)&&!isArray(t)&&!isPlainObject(t)?String(t):t;let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const s=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=s}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this._active){let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope&&activeEffectScope.cleanups.push(e)}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let s=0;for(let n=0;n<t.length;n++){const i=t[n];wasTracked(i)&&!newTracked(i)?i.delete(e):t[s++]=i,i.w&=~trackOpBit,i.n&=~trackOpBit}t.length=s}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,s=null,n){this.fn=t,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let t=activeEffect,s=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let s=0;s<t.length;s++)t[s].delete(e);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,s){if(shouldTrack&&activeEffect){let n=targetMap.get(e);n||targetMap.set(e,n=new Map);let i=n.get(s);i||n.set(s,i=createDep()),trackEffects(i)}}function trackEffects(e,t){let s=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,s=!wasTracked(e)):s=!e.has(activeEffect),s&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,s,n,i,l){const y=targetMap.get(e);if(!y)return;let D=[];if(t==="clear")D=[...y.values()];else if(s==="length"&&isArray(e)){const T=Number(n);y.forEach((v,_)=>{(_==="length"||_>=T)&&D.push(v)})}else switch(s!==void 0&&D.push(y.get(s)),t){case"add":isArray(e)?isIntegerKey(s)&&D.push(y.get("length")):(D.push(y.get(ITERATE_KEY)),isMap(e)&&D.push(y.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(e)||(D.push(y.get(ITERATE_KEY)),isMap(e)&&D.push(y.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&D.push(y.get(ITERATE_KEY));break}if(D.length===1)D[0]&&triggerEffects(D[0]);else{const T=[];for(const v of D)v&&T.push(...v);triggerEffects(createDep(T))}}function triggerEffects(e,t){const s=isArray(e)?e:[...e];for(const n of s)n.computed&&triggerEffect(n);for(const n of s)n.computed||triggerEffect(n)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...s){const n=toRaw(this);for(let l=0,y=this.length;l<y;l++)track(n,"get",l+"");const i=n[t](...s);return i===-1||i===!1?n[t](...s.map(toRaw)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...s){pauseTracking();const n=toRaw(this)[t].apply(this,s);return resetTracking(),n}}),e}function hasOwnProperty(e){const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}function createGetter(e=!1,t=!1){return function(n,i,l){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&l===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(n))return n;const y=isArray(n);if(!e){if(y&&hasOwn(arrayInstrumentations,i))return Reflect.get(arrayInstrumentations,i,l);if(i==="hasOwnProperty")return hasOwnProperty}const D=Reflect.get(n,i,l);return(isSymbol(i)?builtInSymbols.has(i):isNonTrackableKeys(i))||(e||track(n,"get",i),t)?D:isRef(D)?y&&isIntegerKey(i)?D:D.value:isObject(D)?e?readonly(D):reactive(D):D}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(s,n,i,l){let y=s[n];if(isReadonly(y)&&isRef(y)&&!isRef(i))return!1;if(!e&&(!isShallow(i)&&!isReadonly(i)&&(y=toRaw(y),i=toRaw(i)),!isArray(s)&&isRef(y)&&!isRef(i)))return y.value=i,!0;const D=isArray(s)&&isIntegerKey(n)?Number(n)<s.length:hasOwn(s,n),T=Reflect.set(s,n,i,l);return s===toRaw(l)&&(D?hasChanged(i,y)&&trigger(s,"set",n,i):trigger(s,"add",n,i)),T}}function deleteProperty(e,t){const s=hasOwn(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&s&&trigger(e,"delete",t,void 0),n}function has$1(e,t){const s=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),s}function ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return!0},deleteProperty(e,t){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get(e,t,s=!1,n=!1){e=e.__v_raw;const i=toRaw(e),l=toRaw(t);s||(t!==l&&track(i,"get",t),track(i,"get",l));const{has:y}=getProto(i),D=n?toShallow:s?toReadonly:toReactive;if(y.call(i,t))return D(e.get(t));if(y.call(i,l))return D(e.get(l));e!==i&&e.get(t)}function has(e,t=!1){const s=this.__v_raw,n=toRaw(s),i=toRaw(e);return t||(e!==i&&track(n,"has",e),track(n,"has",i)),e===i?s.has(e):s.has(e)||s.has(i)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set(e,t){t=toRaw(t);const s=toRaw(this),{has:n,get:i}=getProto(s);let l=n.call(s,e);l||(e=toRaw(e),l=n.call(s,e));const y=i.call(s,e);return s.set(e,t),l?hasChanged(t,y)&&trigger(s,"set",e,t):trigger(s,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:s,get:n}=getProto(t);let i=s.call(t,e);i||(e=toRaw(e),i=s.call(t,e)),n&&n.call(t,e);const l=t.delete(e);return i&&trigger(t,"delete",e,void 0),l}function clear(){const e=toRaw(this),t=e.size!==0,s=e.clear();return t&&trigger(e,"clear",void 0,void 0),s}function createForEach(e,t){return function(n,i){const l=this,y=l.__v_raw,D=toRaw(y),T=t?toShallow:e?toReadonly:toReactive;return!e&&track(D,"iterate",ITERATE_KEY),y.forEach((v,_)=>n.call(i,T(v),T(_),l))}}function createIterableMethod(e,t,s){return function(...n){const i=this.__v_raw,l=toRaw(i),y=isMap(l),D=e==="entries"||e===Symbol.iterator&&y,T=e==="keys"&&y,v=i[e](...n),_=s?toShallow:t?toReadonly:toReactive;return!t&&track(l,"iterate",T?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:L,done:O}=v.next();return O?{value:L,done:O}:{value:D?[_(L[0]),_(L[1])]:_(L),done:O}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(l){return get(this,l)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(l){return get(this,l,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},s={get(l){return get(this,l,!0)},get size(){return size(this,!0)},has(l){return has.call(this,l,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(l){return get(this,l,!0,!0)},get size(){return size(this,!0)},has(l){return has.call(this,l,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{e[l]=createIterableMethod(l,!1,!1),s[l]=createIterableMethod(l,!0,!1),t[l]=createIterableMethod(l,!1,!0),n[l]=createIterableMethod(l,!0,!0)}),[e,s,t,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const s=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(n,i,l)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(hasOwn(s,i)&&i in n?s:n,i,l)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,s,n,i){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=i.get(e);if(l)return l;const y=getTargetType(e);if(y===0)return e;const D=new Proxy(e,y===2?n:s);return i.set(e,D),D}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw(e);const s=e.dep;s&&triggerEffects(s)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?t:toRaw(t),this._value=s?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const s=this.__v_isShallow||isShallow(t)||isReadonly(t);t=s?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=s?t:toReactive(t),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,s)=>unref(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return isRef(i)&&!isRef(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,s,n,i){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function computed$1(e,t,s=!1){let n,i;const l=isFunction$1(e);return l?(n=e,i=NOOP):(n=e.get,i=e.set),new ComputedRefImpl(n,i,l||!i,s)}function warn(e,...t){}function callWithErrorHandling(e,t,s,n){let i;try{i=n?e(...n):e()}catch(l){handleError(l,t,s)}return i}function callWithAsyncErrorHandling(e,t,s,n){if(isFunction$1(e)){const l=callWithErrorHandling(e,t,s,n);return l&&isPromise(l)&&l.catch(y=>{handleError(y,t,s)}),l}const i=[];for(let l=0;l<e.length;l++)i.push(callWithAsyncErrorHandling(e[l],t,s,n));return i}function handleError(e,t,s,n=!0){const i=t?t.vnode:null;if(t){let l=t.parent;const y=t.proxy,D=s;for(;l;){const v=l.ec;if(v){for(let _=0;_<v.length;_++)if(v[_](e,y,D)===!1)return}l=l.parent}const T=t.appContext.config.errorHandler;if(T){callWithErrorHandling(T,null,10,[e,y,D]);return}}logError(e,s,i,n)}function logError(e,t,s,n=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,s=queue.length;for(;t<s;){const n=t+s>>>1;getId(queue[n])<e?t=n+1:s=n}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const s=queue[t];s&&s.pre&&(queue.splice(t,1),t--,s())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((s,n)=>getId(s)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const s=getId(e)-getId(t);if(s===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return s};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&s.active!==!1&&callWithErrorHandling(s,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||EMPTY_OBJ;let i=s;const l=t.startsWith("update:"),y=l&&t.slice(7);if(y&&y in n){const _=`${y==="modelValue"?"model":y}Modifiers`,{number:L,trim:O}=n[_]||EMPTY_OBJ;O&&(i=s.map(M=>isString$1(M)?M.trim():M)),L&&(i=s.map(looseToNumber))}let D,T=n[D=toHandlerKey(t)]||n[D=toHandlerKey(camelize(t))];!T&&l&&(T=n[D=toHandlerKey(hyphenate(t))]),T&&callWithAsyncErrorHandling(T,e,6,i);const v=n[D+"Once"];if(v){if(!e.emitted)e.emitted={};else if(e.emitted[D])return;e.emitted[D]=!0,callWithAsyncErrorHandling(v,e,6,i)}}function normalizeEmitsOptions(e,t,s=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const l=e.emits;let y={},D=!1;if(!isFunction$1(e)){const T=v=>{const _=normalizeEmitsOptions(v,t,!0);_&&(D=!0,extend(y,_))};!s&&t.mixins.length&&t.mixins.forEach(T),e.extends&&T(e.extends),e.mixins&&e.mixins.forEach(T)}return!l&&!D?(isObject(e)&&n.set(e,null),null):(isArray(l)?l.forEach(T=>y[T]=null):extend(y,l),isObject(e)&&n.set(e,y),y)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&setBlockTracking(-1);const l=setCurrentRenderingInstance(t);let y;try{y=e(...i)}finally{setCurrentRenderingInstance(l),n._d&&setBlockTracking(1)}return y};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:s,proxy:n,withProxy:i,props:l,propsOptions:[y],slots:D,attrs:T,emit:v,render:_,renderCache:L,data:O,setupState:M,ctx:w,inheritAttrs:A}=e;let u,R;const I=setCurrentRenderingInstance(e);try{if(s.shapeFlag&4){const S=i||n;u=normalizeVNode(_.call(S,S,L,l,M,O,w)),R=T}else{const S=t;u=normalizeVNode(S.length>1?S(l,{attrs:T,slots:D,emit:v}):S(l,null)),R=t.props?T:getFunctionalFallthrough(T)}}catch(S){blockStack.length=0,handleError(S,e,1),u=createVNode(Comment)}let N=u;if(R&&A!==!1){const S=Object.keys(R),{shapeFlag:o}=N;S.length&&o&7&&(y&&S.some(isModelListener)&&(R=filterModelListeners(R,y)),N=cloneVNode(N,R))}return s.dirs&&(N=cloneVNode(N),N.dirs=N.dirs?N.dirs.concat(s.dirs):s.dirs),s.transition&&(N.transition=s.transition),u=N,setCurrentRenderingInstance(I),u}const getFunctionalFallthrough=e=>{let t;for(const s in e)(s==="class"||s==="style"||isOn(s))&&((t||(t={}))[s]=e[s]);return t},filterModelListeners=(e,t)=>{const s={};for(const n in e)(!isModelListener(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function shouldUpdateComponent(e,t,s){const{props:n,children:i,component:l}=e,{props:y,children:D,patchFlag:T}=t,v=l.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&T>=0){if(T&1024)return!0;if(T&16)return n?hasPropsChanged(n,y,v):!!y;if(T&8){const _=t.dynamicProps;for(let L=0;L<_.length;L++){const O=_[L];if(y[O]!==n[O]&&!isEmitListener(v,O))return!0}}}else return(i||D)&&(!D||!D.$stable)?!0:n===y?!1:n?y?hasPropsChanged(n,y,v):!0:!!y;return!1}function hasPropsChanged(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const l=n[i];if(t[l]!==e[l]&&!isEmitListener(s,l))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},s){for(;t&&t.subTree===e;)(e=t.vnode).el=s,t=t.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}function watchEffect(e,t){return doWatch(e,null,t)}const INITIAL_WATCHER_VALUE={};function watch(e,t,s){return doWatch(e,t,s)}function doWatch(e,t,{immediate:s,deep:n,flush:i,onTrack:l,onTrigger:y}=EMPTY_OBJ){var D;const T=getCurrentScope()===((D=currentInstance)==null?void 0:D.scope)?currentInstance:null;let v,_=!1,L=!1;if(isRef(e)?(v=()=>e.value,_=isShallow(e)):isReactive(e)?(v=()=>e,n=!0):isArray(e)?(L=!0,_=e.some(S=>isReactive(S)||isShallow(S)),v=()=>e.map(S=>{if(isRef(S))return S.value;if(isReactive(S))return traverse(S);if(isFunction$1(S))return callWithErrorHandling(S,T,2)})):isFunction$1(e)?t?v=()=>callWithErrorHandling(e,T,2):v=()=>{if(!(T&&T.isUnmounted))return O&&O(),callWithAsyncErrorHandling(e,T,3,[M])}:v=NOOP,t&&n){const S=v;v=()=>traverse(S())}let O,M=S=>{O=I.onStop=()=>{callWithErrorHandling(S,T,4)}},w;if(isInSSRComponentSetup)if(M=NOOP,t?s&&callWithAsyncErrorHandling(t,T,3,[v(),L?[]:void 0,M]):v(),i==="sync"){const S=useSSRContext();w=S.__watcherHandles||(S.__watcherHandles=[])}else return NOOP;let A=L?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const u=()=>{if(I.active)if(t){const S=I.run();(n||_||(L?S.some((o,g)=>hasChanged(o,A[g])):hasChanged(S,A)))&&(O&&O(),callWithAsyncErrorHandling(t,T,3,[S,A===INITIAL_WATCHER_VALUE?void 0:L&&A[0]===INITIAL_WATCHER_VALUE?[]:A,M]),A=S)}else I.run()};u.allowRecurse=!!t;let R;i==="sync"?R=u:i==="post"?R=()=>queuePostRenderEffect(u,T&&T.suspense):(u.pre=!0,T&&(u.id=T.uid),R=()=>queueJob(u));const I=new ReactiveEffect(v,R);t?s?u():A=I.run():i==="post"?queuePostRenderEffect(I.run.bind(I),T&&T.suspense):I.run();const N=()=>{I.stop(),T&&T.scope&&remove(T.scope.effects,I)};return w&&w.push(N),N}function instanceWatch(e,t,s){const n=this.proxy,i=isString$1(e)?e.includes(".")?createPathGetter(n,e):()=>n[e]:e.bind(n,n);let l;isFunction$1(t)?l=t:(l=t.handler,s=t);const y=currentInstance;setCurrentInstance(this);const D=doWatch(i,l.bind(n),s);return y?setCurrentInstance(y):unsetCurrentInstance(),D}function createPathGetter(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}function traverse(e,t){if(!isObject(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef(e))traverse(e.value,t);else if(isArray(e))for(let s=0;s<e.length;s++)traverse(e[s],t);else if(isSet(e)||isMap(e))e.forEach(s=>{traverse(s,t)});else if(isPlainObject(e))for(const s in e)traverse(e[s],t);return e}function withDirectives(e,t){const s=currentRenderingInstance;if(s===null)return e;const n=getExposeProxy(s)||s.proxy,i=e.dirs||(e.dirs=[]);for(let l=0;l<t.length;l++){let[y,D,T,v=EMPTY_OBJ]=t[l];y&&(isFunction$1(y)&&(y={mounted:y,updated:y}),y.deep&&traverse(D),i.push({dir:y,instance:n,value:D,oldValue:void 0,arg:T,modifiers:v}))}return e}function invokeDirectiveHook(e,t,s,n){const i=e.dirs,l=t&&t.dirs;for(let y=0;y<i.length;y++){const D=i[y];l&&(D.oldValue=l[y].value);let T=D.dir[n];T&&(pauseTracking(),callWithAsyncErrorHandling(T,s,8,[e.el,D,e,t]),resetTracking())}}function defineComponent(e,t){return isFunction$1(e)?(()=>extend({name:e.name},t,{setup:e}))():e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,s=currentInstance){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(injectHook(t,n,s),s){let i=s.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(n,t,s,i),i=i.parent}}function injectToKeepAliveRoot(e,t,s,n){const i=injectHook(t,e,n,!0);onUnmounted(()=>{remove(n[t],i)},s)}function injectHook(e,t,s=currentInstance,n=!1){if(s){const i=s[e]||(s[e]=[]),l=t.__weh||(t.__weh=(...y)=>{if(s.isUnmounted)return;pauseTracking(),setCurrentInstance(s);const D=callWithAsyncErrorHandling(t,s,e,y);return unsetCurrentInstance(),resetTracking(),D});return n?i.unshift(l):i.push(l),l}}const createHook=e=>(t,s=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...n)=>t(...n),s),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:s,setupState:n,data:i,props:l,accessCache:y,type:D,appContext:T}=e;let v;if(t[0]!=="$"){const M=y[t];if(M!==void 0)switch(M){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return l[t]}else{if(hasSetupBinding(n,t))return y[t]=1,n[t];if(i!==EMPTY_OBJ&&hasOwn(i,t))return y[t]=2,i[t];if((v=e.propsOptions[0])&&hasOwn(v,t))return y[t]=3,l[t];if(s!==EMPTY_OBJ&&hasOwn(s,t))return y[t]=4,s[t];shouldCacheAccess&&(y[t]=0)}}const _=publicPropertiesMap[t];let L,O;if(_)return t==="$attrs"&&track(e,"get",t),_(e);if((L=D.__cssModules)&&(L=L[t]))return L;if(s!==EMPTY_OBJ&&hasOwn(s,t))return y[t]=4,s[t];if(O=T.config.globalProperties,hasOwn(O,t))return O[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:l}=e;return hasSetupBinding(i,t)?(i[t]=s,!0):n!==EMPTY_OBJ&&hasOwn(n,t)?(n[t]=s,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(l[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,propsOptions:l}},y){let D;return!!s[y]||e!==EMPTY_OBJ&&hasOwn(e,y)||hasSetupBinding(t,y)||(D=l[0])&&hasOwn(D,y)||hasOwn(n,y)||hasOwn(publicPropertiesMap,y)||hasOwn(i.config.globalProperties,y)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:hasOwn(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function normalizePropsOrEmits(e){return isArray(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),s=e.proxy,n=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:i,computed:l,methods:y,watch:D,provide:T,inject:v,created:_,beforeMount:L,mounted:O,beforeUpdate:M,updated:w,activated:A,deactivated:u,beforeDestroy:R,beforeUnmount:I,destroyed:N,unmounted:S,render:o,renderTracked:g,renderTriggered:m,errorCaptured:c,serverPrefetch:E,expose:H,inheritAttrs:f,components:z,directives:J,filters:se}=t;if(v&&resolveInjections(v,n,null),y)for(const he in y){const ae=y[he];isFunction$1(ae)&&(n[he]=ae.bind(s))}if(i){const he=i.call(s,s);isObject(he)&&(e.data=reactive(he))}if(shouldCacheAccess=!0,l)for(const he in l){const ae=l[he],pe=isFunction$1(ae)?ae.bind(s,s):isFunction$1(ae.get)?ae.get.bind(s,s):NOOP,Ae=!isFunction$1(ae)&&isFunction$1(ae.set)?ae.set.bind(s):NOOP,ve=computed({get:pe,set:Ae});Object.defineProperty(n,he,{enumerable:!0,configurable:!0,get:()=>ve.value,set:Ce=>ve.value=Ce})}if(D)for(const he in D)createWatcher(D[he],n,s,he);if(T){const he=isFunction$1(T)?T.call(s):T;Reflect.ownKeys(he).forEach(ae=>{provide(ae,he[ae])})}_&&callHook(_,e,"c");function oe(he,ae){isArray(ae)?ae.forEach(pe=>he(pe.bind(s))):ae&&he(ae.bind(s))}if(oe(onBeforeMount,L),oe(onMounted,O),oe(onBeforeUpdate,M),oe(onUpdated,w),oe(onActivated,A),oe(onDeactivated,u),oe(onErrorCaptured,c),oe(onRenderTracked,g),oe(onRenderTriggered,m),oe(onBeforeUnmount,I),oe(onUnmounted,S),oe(onServerPrefetch,E),isArray(H))if(H.length){const he=e.exposed||(e.exposed={});H.forEach(ae=>{Object.defineProperty(he,ae,{get:()=>s[ae],set:pe=>s[ae]=pe})})}else e.exposed||(e.exposed={});o&&e.render===NOOP&&(e.render=o),f!=null&&(e.inheritAttrs=f),z&&(e.components=z),J&&(e.directives=J)}function resolveInjections(e,t,s=NOOP){isArray(e)&&(e=normalizeInject(e));for(const n in e){const i=e[n];let l;isObject(i)?"default"in i?l=inject(i.from||n,i.default,!0):l=inject(i.from||n):l=inject(i),isRef(l)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>l.value,set:y=>l.value=y}):t[n]=l}}function callHook(e,t,s){callWithAsyncErrorHandling(isArray(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function createWatcher(e,t,s,n){const i=n.includes(".")?createPathGetter(s,n):()=>s[n];if(isString$1(e)){const l=t[e];isFunction$1(l)&&watch(i,l)}else if(isFunction$1(e))watch(i,e.bind(s));else if(isObject(e))if(isArray(e))e.forEach(l=>createWatcher(l,t,s,n));else{const l=isFunction$1(e.handler)?e.handler.bind(s):t[e.handler];isFunction$1(l)&&watch(i,l,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:l,config:{optionMergeStrategies:y}}=e.appContext,D=l.get(t);let T;return D?T=D:!i.length&&!s&&!n?T=t:(T={},i.length&&i.forEach(v=>mergeOptions(T,v,y,!0)),mergeOptions(T,t,y)),isObject(t)&&l.set(t,T),T}function mergeOptions(e,t,s,n=!1){const{mixins:i,extends:l}=t;l&&mergeOptions(e,l,s,!0),i&&i.forEach(y=>mergeOptions(e,y,s,!0));for(const y in t)if(!(n&&y==="expose")){const D=internalOptionMergeStrats[y]||s&&s[y];e[y]=D?D(e[y],t[y]):t[y]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction$1(e)?e.call(this,this):e,isFunction$1(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray(e)&&isArray(t)?[...new Set([...e,...t])]:extend(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const s=extend(Object.create(null),e);for(const n in t)s[n]=mergeAsArray(e[n],t[n]);return s}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(n,i=null){isFunction$1(n)||(n=extend({},n)),i!=null&&!isObject(i)&&(i=null);const l=createAppContext(),y=new Set;let D=!1;const T=l.app={_uid:uid$1++,_component:n,_props:i,_container:null,_context:l,_instance:null,version,get config(){return l.config},set config(v){},use(v,..._){return y.has(v)||(v&&isFunction$1(v.install)?(y.add(v),v.install(T,..._)):isFunction$1(v)&&(y.add(v),v(T,..._))),T},mixin(v){return l.mixins.includes(v)||l.mixins.push(v),T},component(v,_){return _?(l.components[v]=_,T):l.components[v]},directive(v,_){return _?(l.directives[v]=_,T):l.directives[v]},mount(v,_,L){if(!D){const O=createVNode(n,i);return O.appContext=l,_&&t?t(O,v):e(O,v,L),D=!0,T._container=v,v.__vue_app__=T,getExposeProxy(O.component)||O.component.proxy}},unmount(){D&&(e(null,T._container),delete T._container.__vue_app__)},provide(v,_){return l.provides[v]=_,T},runWithContext(v){currentApp=T;try{return v()}finally{currentApp=null}}};return T}}let currentApp=null;function provide(e,t){if(currentInstance){let s=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===s&&(s=currentInstance.provides=Object.create(n)),s[e]=t}}function inject(e,t,s=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:currentApp._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return s&&isFunction$1(t)?t.call(n&&n.proxy):t}}function initProps(e,t,s,n=!1){const i={},l={};def(l,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,i,l);for(const y in e.propsOptions[0])y in i||(i[y]=void 0);s?e.props=n?i:shallowReactive(i):e.type.props?e.props=i:e.props=l,e.attrs=l}function updateProps(e,t,s,n){const{props:i,attrs:l,vnode:{patchFlag:y}}=e,D=toRaw(i),[T]=e.propsOptions;let v=!1;if((n||y>0)&&!(y&16)){if(y&8){const _=e.vnode.dynamicProps;for(let L=0;L<_.length;L++){let O=_[L];if(isEmitListener(e.emitsOptions,O))continue;const M=t[O];if(T)if(hasOwn(l,O))M!==l[O]&&(l[O]=M,v=!0);else{const w=camelize(O);i[w]=resolvePropValue(T,D,w,M,e,!1)}else M!==l[O]&&(l[O]=M,v=!0)}}}else{setFullProps(e,t,i,l)&&(v=!0);let _;for(const L in D)(!t||!hasOwn(t,L)&&((_=hyphenate(L))===L||!hasOwn(t,_)))&&(T?s&&(s[L]!==void 0||s[_]!==void 0)&&(i[L]=resolvePropValue(T,D,L,void 0,e,!0)):delete i[L]);if(l!==D)for(const L in l)(!t||!hasOwn(t,L))&&(delete l[L],v=!0)}v&&trigger(e,"set","$attrs")}function setFullProps(e,t,s,n){const[i,l]=e.propsOptions;let y=!1,D;if(t)for(let T in t){if(isReservedProp(T))continue;const v=t[T];let _;i&&hasOwn(i,_=camelize(T))?!l||!l.includes(_)?s[_]=v:(D||(D={}))[_]=v:isEmitListener(e.emitsOptions,T)||(!(T in n)||v!==n[T])&&(n[T]=v,y=!0)}if(l){const T=toRaw(s),v=D||EMPTY_OBJ;for(let _=0;_<l.length;_++){const L=l[_];s[L]=resolvePropValue(i,T,L,v[L],e,!hasOwn(v,L))}}return y}function resolvePropValue(e,t,s,n,i,l){const y=e[s];if(y!=null){const D=hasOwn(y,"default");if(D&&n===void 0){const T=y.default;if(y.type!==Function&&!y.skipFactory&&isFunction$1(T)){const{propsDefaults:v}=i;s in v?n=v[s]:(setCurrentInstance(i),n=v[s]=T.call(null,t),unsetCurrentInstance())}else n=T}y[0]&&(l&&!D?n=!1:y[1]&&(n===""||n===hyphenate(s))&&(n=!0))}return n}function normalizePropsOptions(e,t,s=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const l=e.props,y={},D=[];let T=!1;if(!isFunction$1(e)){const _=L=>{T=!0;const[O,M]=normalizePropsOptions(L,t,!0);extend(y,O),M&&D.push(...M)};!s&&t.mixins.length&&t.mixins.forEach(_),e.extends&&_(e.extends),e.mixins&&e.mixins.forEach(_)}if(!l&&!T)return isObject(e)&&n.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray(l))for(let _=0;_<l.length;_++){const L=camelize(l[_]);validatePropName(L)&&(y[L]=EMPTY_OBJ)}else if(l)for(const _ in l){const L=camelize(_);if(validatePropName(L)){const O=l[_],M=y[L]=isArray(O)||isFunction$1(O)?{type:O}:extend({},O);if(M){const w=getTypeIndex(Boolean,M.type),A=getTypeIndex(String,M.type);M[0]=w>-1,M[1]=A<0||w<A,(w>-1||hasOwn(M,"default"))&&D.push(L)}}}const v=[y,D];return isObject(e)&&n.set(e,v),v}function validatePropName(e){return e[0]!=="$"}function getType(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray(t)?t.findIndex(s=>isSameType(s,e)):isFunction$1(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,s)=>{if(t._n)return t;const n=withCtx((...i)=>normalizeSlotValue(t(...i)),s);return n._c=!1,n},normalizeObjectSlots=(e,t,s)=>{const n=e._ctx;for(const i in e){if(isInternalKey(i))continue;const l=e[i];if(isFunction$1(l))t[i]=normalizeSlot(i,l,n);else if(l!=null){const y=normalizeSlotValue(l);t[i]=()=>y}}},normalizeVNodeSlots=(e,t)=>{const s=normalizeSlotValue(t);e.slots.default=()=>s},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const s=t._;s?(e.slots=toRaw(t),def(t,"_",s)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,s)=>{const{vnode:n,slots:i}=e;let l=!0,y=EMPTY_OBJ;if(n.shapeFlag&32){const D=t._;D?s&&D===1?l=!1:(extend(i,t),!s&&D===1&&delete i._):(l=!t.$stable,normalizeObjectSlots(t,i)),y=t}else t&&(normalizeVNodeSlots(e,t),y={default:1});if(l)for(const D in i)!isInternalKey(D)&&!(D in y)&&delete i[D]};function setRef(e,t,s,n,i=!1){if(isArray(e)){e.forEach((O,M)=>setRef(O,t&&(isArray(t)?t[M]:t),s,n,i));return}if(isAsyncWrapper(n)&&!i)return;const l=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,y=i?null:l,{i:D,r:T}=e,v=t&&t.r,_=D.refs===EMPTY_OBJ?D.refs={}:D.refs,L=D.setupState;if(v!=null&&v!==T&&(isString$1(v)?(_[v]=null,hasOwn(L,v)&&(L[v]=null)):isRef(v)&&(v.value=null)),isFunction$1(T))callWithErrorHandling(T,D,12,[y,_]);else{const O=isString$1(T),M=isRef(T);if(O||M){const w=()=>{if(e.f){const A=O?hasOwn(L,T)?L[T]:_[T]:T.value;i?isArray(A)&&remove(A,l):isArray(A)?A.includes(l)||A.push(l):O?(_[T]=[l],hasOwn(L,T)&&(L[T]=_[T])):(T.value=[l],e.k&&(_[e.k]=T.value))}else O?(_[T]=y,hasOwn(L,T)&&(L[T]=y)):M&&(T.value=y,e.k&&(_[e.k]=y))};y?(w.id=-1,queuePostRenderEffect(w,s)):w()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const s=getGlobalThis();s.__VUE__=!0;const{insert:n,remove:i,patchProp:l,createElement:y,createText:D,createComment:T,setText:v,setElementText:_,parentNode:L,nextSibling:O,setScopeId:M=NOOP,insertStaticContent:w}=e,A=(d,b,r,a=null,h=null,x=null,F=!1,U=null,X=!!b.dynamicChildren)=>{if(d===b)return;d&&!isSameVNodeType(d,b)&&(a=j(d),Ce(d,h,x,!0),d=null),b.patchFlag===-2&&(X=!1,b.dynamicChildren=null);const{type:W,ref:Z,shapeFlag:ee}=b;switch(W){case Text:u(d,b,r,a);break;case Comment:R(d,b,r,a);break;case Static:d==null&&I(b,r,a,F);break;case Fragment:z(d,b,r,a,h,x,F,U,X);break;default:ee&1?o(d,b,r,a,h,x,F,U,X):ee&6?J(d,b,r,a,h,x,F,U,X):(ee&64||ee&128)&&W.process(d,b,r,a,h,x,F,U,X,V)}Z!=null&&h&&setRef(Z,d&&d.ref,x,b||d,!b)},u=(d,b,r,a)=>{if(d==null)n(b.el=D(b.children),r,a);else{const h=b.el=d.el;b.children!==d.children&&v(h,b.children)}},R=(d,b,r,a)=>{d==null?n(b.el=T(b.children||""),r,a):b.el=d.el},I=(d,b,r,a)=>{[d.el,d.anchor]=w(d.children,b,r,a,d.el,d.anchor)},N=({el:d,anchor:b},r,a)=>{let h;for(;d&&d!==b;)h=O(d),n(d,r,a),d=h;n(b,r,a)},S=({el:d,anchor:b})=>{let r;for(;d&&d!==b;)r=O(d),i(d),d=r;i(b)},o=(d,b,r,a,h,x,F,U,X)=>{F=F||b.type==="svg",d==null?g(b,r,a,h,x,F,U,X):E(d,b,h,x,F,U,X)},g=(d,b,r,a,h,x,F,U)=>{let X,W;const{type:Z,props:ee,shapeFlag:Q,transition:ne,dirs:le}=d;if(X=d.el=y(d.type,x,ee&&ee.is,ee),Q&8?_(X,d.children):Q&16&&c(d.children,X,null,a,h,x&&Z!=="foreignObject",F,U),le&&invokeDirectiveHook(d,null,a,"created"),m(X,d,d.scopeId,F,a),ee){for(const be in ee)be!=="value"&&!isReservedProp(be)&&l(X,be,null,ee[be],x,d.children,a,h,P);"value"in ee&&l(X,"value",null,ee.value),(W=ee.onVnodeBeforeMount)&&invokeVNodeHook(W,a,d)}le&&invokeDirectiveHook(d,null,a,"beforeMount");const de=(!h||h&&!h.pendingBranch)&&ne&&!ne.persisted;de&&ne.beforeEnter(X),n(X,b,r),((W=ee&&ee.onVnodeMounted)||de||le)&&queuePostRenderEffect(()=>{W&&invokeVNodeHook(W,a,d),de&&ne.enter(X),le&&invokeDirectiveHook(d,null,a,"mounted")},h)},m=(d,b,r,a,h)=>{if(r&&M(d,r),a)for(let x=0;x<a.length;x++)M(d,a[x]);if(h){let x=h.subTree;if(b===x){const F=h.vnode;m(d,F,F.scopeId,F.slotScopeIds,h.parent)}}},c=(d,b,r,a,h,x,F,U,X=0)=>{for(let W=X;W<d.length;W++){const Z=d[W]=U?cloneIfMounted(d[W]):normalizeVNode(d[W]);A(null,Z,b,r,a,h,x,F,U)}},E=(d,b,r,a,h,x,F)=>{const U=b.el=d.el;let{patchFlag:X,dynamicChildren:W,dirs:Z}=b;X|=d.patchFlag&16;const ee=d.props||EMPTY_OBJ,Q=b.props||EMPTY_OBJ;let ne;r&&toggleRecurse(r,!1),(ne=Q.onVnodeBeforeUpdate)&&invokeVNodeHook(ne,r,b,d),Z&&invokeDirectiveHook(b,d,r,"beforeUpdate"),r&&toggleRecurse(r,!0);const le=h&&b.type!=="foreignObject";if(W?H(d.dynamicChildren,W,U,r,a,le,x):F||ae(d,b,U,null,r,a,le,x,!1),X>0){if(X&16)f(U,b,ee,Q,r,a,h);else if(X&2&&ee.class!==Q.class&&l(U,"class",null,Q.class,h),X&4&&l(U,"style",ee.style,Q.style,h),X&8){const de=b.dynamicProps;for(let be=0;be<de.length;be++){const me=de[be],we=ee[me],te=Q[me];(te!==we||me==="value")&&l(U,me,we,te,h,d.children,r,a,P)}}X&1&&d.children!==b.children&&_(U,b.children)}else!F&&W==null&&f(U,b,ee,Q,r,a,h);((ne=Q.onVnodeUpdated)||Z)&&queuePostRenderEffect(()=>{ne&&invokeVNodeHook(ne,r,b,d),Z&&invokeDirectiveHook(b,d,r,"updated")},a)},H=(d,b,r,a,h,x,F)=>{for(let U=0;U<b.length;U++){const X=d[U],W=b[U],Z=X.el&&(X.type===Fragment||!isSameVNodeType(X,W)||X.shapeFlag&70)?L(X.el):r;A(X,W,Z,null,a,h,x,F,!0)}},f=(d,b,r,a,h,x,F)=>{if(r!==a){if(r!==EMPTY_OBJ)for(const U in r)!isReservedProp(U)&&!(U in a)&&l(d,U,r[U],null,F,b.children,h,x,P);for(const U in a){if(isReservedProp(U))continue;const X=a[U],W=r[U];X!==W&&U!=="value"&&l(d,U,W,X,F,b.children,h,x,P)}"value"in a&&l(d,"value",r.value,a.value)}},z=(d,b,r,a,h,x,F,U,X)=>{const W=b.el=d?d.el:D(""),Z=b.anchor=d?d.anchor:D("");let{patchFlag:ee,dynamicChildren:Q,slotScopeIds:ne}=b;ne&&(U=U?U.concat(ne):ne),d==null?(n(W,r,a),n(Z,r,a),c(b.children,r,Z,h,x,F,U,X)):ee>0&&ee&64&&Q&&d.dynamicChildren?(H(d.dynamicChildren,Q,r,h,x,F,U),(b.key!=null||h&&b===h.subTree)&&traverseStaticChildren(d,b,!0)):ae(d,b,r,Z,h,x,F,U,X)},J=(d,b,r,a,h,x,F,U,X)=>{b.slotScopeIds=U,d==null?b.shapeFlag&512?h.ctx.activate(b,r,a,F,X):se(b,r,a,h,x,F,X):ie(d,b,X)},se=(d,b,r,a,h,x,F)=>{const U=d.component=createComponentInstance(d,a,h);if(isKeepAlive(d)&&(U.ctx.renderer=V),setupComponent(U),U.asyncDep){if(h&&h.registerDep(U,oe),!d.el){const X=U.subTree=createVNode(Comment);R(null,X,b,r)}return}oe(U,d,b,r,h,x,F)},ie=(d,b,r)=>{const a=b.component=d.component;if(shouldUpdateComponent(d,b,r))if(a.asyncDep&&!a.asyncResolved){he(a,b,r);return}else a.next=b,invalidateJob(a.update),a.update();else b.el=d.el,a.vnode=b},oe=(d,b,r,a,h,x,F)=>{const U=()=>{if(d.isMounted){let{next:Z,bu:ee,u:Q,parent:ne,vnode:le}=d,de=Z,be;toggleRecurse(d,!1),Z?(Z.el=le.el,he(d,Z,F)):Z=le,ee&&invokeArrayFns(ee),(be=Z.props&&Z.props.onVnodeBeforeUpdate)&&invokeVNodeHook(be,ne,Z,le),toggleRecurse(d,!0);const me=renderComponentRoot(d),we=d.subTree;d.subTree=me,A(we,me,L(we.el),j(we),d,h,x),Z.el=me.el,de===null&&updateHOCHostEl(d,me.el),Q&&queuePostRenderEffect(Q,h),(be=Z.props&&Z.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(be,ne,Z,le),h)}else{let Z;const{el:ee,props:Q}=b,{bm:ne,m:le,parent:de}=d,be=isAsyncWrapper(b);if(toggleRecurse(d,!1),ne&&invokeArrayFns(ne),!be&&(Z=Q&&Q.onVnodeBeforeMount)&&invokeVNodeHook(Z,de,b),toggleRecurse(d,!0),ee&&q){const me=()=>{d.subTree=renderComponentRoot(d),q(ee,d.subTree,d,h,null)};be?b.type.__asyncLoader().then(()=>!d.isUnmounted&&me()):me()}else{const me=d.subTree=renderComponentRoot(d);A(null,me,r,a,d,h,x),b.el=me.el}if(le&&queuePostRenderEffect(le,h),!be&&(Z=Q&&Q.onVnodeMounted)){const me=b;queuePostRenderEffect(()=>invokeVNodeHook(Z,de,me),h)}(b.shapeFlag&256||de&&isAsyncWrapper(de.vnode)&&de.vnode.shapeFlag&256)&&d.a&&queuePostRenderEffect(d.a,h),d.isMounted=!0,b=r=a=null}},X=d.effect=new ReactiveEffect(U,()=>queueJob(W),d.scope),W=d.update=()=>X.run();W.id=d.uid,toggleRecurse(d,!0),W()},he=(d,b,r)=>{b.component=d;const a=d.vnode.props;d.vnode=b,d.next=null,updateProps(d,b.props,a,r),updateSlots(d,b.children,r),pauseTracking(),flushPreFlushCbs(),resetTracking()},ae=(d,b,r,a,h,x,F,U,X=!1)=>{const W=d&&d.children,Z=d?d.shapeFlag:0,ee=b.children,{patchFlag:Q,shapeFlag:ne}=b;if(Q>0){if(Q&128){Ae(W,ee,r,a,h,x,F,U,X);return}else if(Q&256){pe(W,ee,r,a,h,x,F,U,X);return}}ne&8?(Z&16&&P(W,h,x),ee!==W&&_(r,ee)):Z&16?ne&16?Ae(W,ee,r,a,h,x,F,U,X):P(W,h,x,!0):(Z&8&&_(r,""),ne&16&&c(ee,r,a,h,x,F,U,X))},pe=(d,b,r,a,h,x,F,U,X)=>{d=d||EMPTY_ARR,b=b||EMPTY_ARR;const W=d.length,Z=b.length,ee=Math.min(W,Z);let Q;for(Q=0;Q<ee;Q++){const ne=b[Q]=X?cloneIfMounted(b[Q]):normalizeVNode(b[Q]);A(d[Q],ne,r,null,h,x,F,U,X)}W>Z?P(d,h,x,!0,!1,ee):c(b,r,a,h,x,F,U,X,ee)},Ae=(d,b,r,a,h,x,F,U,X)=>{let W=0;const Z=b.length;let ee=d.length-1,Q=Z-1;for(;W<=ee&&W<=Q;){const ne=d[W],le=b[W]=X?cloneIfMounted(b[W]):normalizeVNode(b[W]);if(isSameVNodeType(ne,le))A(ne,le,r,null,h,x,F,U,X);else break;W++}for(;W<=ee&&W<=Q;){const ne=d[ee],le=b[Q]=X?cloneIfMounted(b[Q]):normalizeVNode(b[Q]);if(isSameVNodeType(ne,le))A(ne,le,r,null,h,x,F,U,X);else break;ee--,Q--}if(W>ee){if(W<=Q){const ne=Q+1,le=ne<Z?b[ne].el:a;for(;W<=Q;)A(null,b[W]=X?cloneIfMounted(b[W]):normalizeVNode(b[W]),r,le,h,x,F,U,X),W++}}else if(W>Q)for(;W<=ee;)Ce(d[W],h,x,!0),W++;else{const ne=W,le=W,de=new Map;for(W=le;W<=Q;W++){const ue=b[W]=X?cloneIfMounted(b[W]):normalizeVNode(b[W]);ue.key!=null&&de.set(ue.key,W)}let be,me=0;const we=Q-le+1;let te=!1,ye=0;const Ee=new Array(we);for(W=0;W<we;W++)Ee[W]=0;for(W=ne;W<=ee;W++){const ue=d[W];if(me>=we){Ce(ue,h,x,!0);continue}let B;if(ue.key!=null)B=de.get(ue.key);else for(be=le;be<=Q;be++)if(Ee[be-le]===0&&isSameVNodeType(ue,b[be])){B=be;break}B===void 0?Ce(ue,h,x,!0):(Ee[B-le]=W+1,B>=ye?ye=B:te=!0,A(ue,b[B],r,null,h,x,F,U,X),me++)}const Oe=te?getSequence(Ee):EMPTY_ARR;for(be=Oe.length-1,W=we-1;W>=0;W--){const ue=le+W,B=b[ue],$=ue+1<Z?b[ue+1].el:a;Ee[W]===0?A(null,B,r,$,h,x,F,U,X):te&&(be<0||W!==Oe[be]?ve(B,r,$,2):be--)}}},ve=(d,b,r,a,h=null)=>{const{el:x,type:F,transition:U,children:X,shapeFlag:W}=d;if(W&6){ve(d.component.subTree,b,r,a);return}if(W&128){d.suspense.move(b,r,a);return}if(W&64){F.move(d,b,r,V);return}if(F===Fragment){n(x,b,r);for(let ee=0;ee<X.length;ee++)ve(X[ee],b,r,a);n(d.anchor,b,r);return}if(F===Static){N(d,b,r);return}if(a!==2&&W&1&&U)if(a===0)U.beforeEnter(x),n(x,b,r),queuePostRenderEffect(()=>U.enter(x),h);else{const{leave:ee,delayLeave:Q,afterLeave:ne}=U,le=()=>n(x,b,r),de=()=>{ee(x,()=>{le(),ne&&ne()})};Q?Q(x,le,de):de()}else n(x,b,r)},Ce=(d,b,r,a=!1,h=!1)=>{const{type:x,props:F,ref:U,children:X,dynamicChildren:W,shapeFlag:Z,patchFlag:ee,dirs:Q}=d;if(U!=null&&setRef(U,null,r,d,!0),Z&256){b.ctx.deactivate(d);return}const ne=Z&1&&Q,le=!isAsyncWrapper(d);let de;if(le&&(de=F&&F.onVnodeBeforeUnmount)&&invokeVNodeHook(de,b,d),Z&6)C(d.component,r,a);else{if(Z&128){d.suspense.unmount(r,a);return}ne&&invokeDirectiveHook(d,null,b,"beforeUnmount"),Z&64?d.type.remove(d,b,r,h,V,a):W&&(x!==Fragment||ee>0&&ee&64)?P(W,b,r,!1,!0):(x===Fragment&&ee&384||!h&&Z&16)&&P(X,b,r),a&&Se(d)}(le&&(de=F&&F.onVnodeUnmounted)||ne)&&queuePostRenderEffect(()=>{de&&invokeVNodeHook(de,b,d),ne&&invokeDirectiveHook(d,null,b,"unmounted")},r)},Se=d=>{const{type:b,el:r,anchor:a,transition:h}=d;if(b===Fragment){K(r,a);return}if(b===Static){S(d);return}const x=()=>{i(r),h&&!h.persisted&&h.afterLeave&&h.afterLeave()};if(d.shapeFlag&1&&h&&!h.persisted){const{leave:F,delayLeave:U}=h,X=()=>F(r,x);U?U(d.el,x,X):X()}else x()},K=(d,b)=>{let r;for(;d!==b;)r=O(d),i(d),d=r;i(b)},C=(d,b,r)=>{const{bum:a,scope:h,update:x,subTree:F,um:U}=d;a&&invokeArrayFns(a),h.stop(),x&&(x.active=!1,Ce(F,d,b,r)),U&&queuePostRenderEffect(U,b),queuePostRenderEffect(()=>{d.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},P=(d,b,r,a=!1,h=!1,x=0)=>{for(let F=x;F<d.length;F++)Ce(d[F],b,r,a,h)},j=d=>d.shapeFlag&6?j(d.component.subTree):d.shapeFlag&128?d.suspense.next():O(d.anchor||d.el),G=(d,b,r)=>{d==null?b._vnode&&Ce(b._vnode,null,null,!0):A(b._vnode||null,d,b,null,null,null,r),flushPreFlushCbs(),flushPostFlushCbs(),b._vnode=d},V={p:A,um:Ce,m:ve,r:Se,mt:se,mc:c,pc:ae,pbc:H,n:j,o:e};let Y,q;return t&&([Y,q]=t(V)),{render:G,hydrate:Y,createApp:createAppAPI(G,Y)}}function toggleRecurse({effect:e,update:t},s){e.allowRecurse=t.allowRecurse=s}function traverseStaticChildren(e,t,s=!1){const n=e.children,i=t.children;if(isArray(n)&&isArray(i))for(let l=0;l<n.length;l++){const y=n[l];let D=i[l];D.shapeFlag&1&&!D.dynamicChildren&&((D.patchFlag<=0||D.patchFlag===32)&&(D=i[l]=cloneIfMounted(i[l]),D.el=y.el),s||traverseStaticChildren(y,D)),D.type===Text&&(D.el=y.el)}}function getSequence(e){const t=e.slice(),s=[0];let n,i,l,y,D;const T=e.length;for(n=0;n<T;n++){const v=e[n];if(v!==0){if(i=s[s.length-1],e[i]<v){t[n]=i,s.push(n);continue}for(l=0,y=s.length-1;l<y;)D=l+y>>1,e[s[D]]<v?l=D+1:y=D;v<e[s[l]]&&(l>0&&(t[n]=s[l-1]),s[l]=n)}}for(l=s.length,y=s[l-1];l-- >0;)s[l]=y,y=t[y];return s}const isTeleport=e=>e.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,s,n,i,l){return setupBlock(createBaseVNode(e,t,s,n,i,l,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?isString$1(e)||isRef(e)||isFunction$1(e)?{i:currentRenderingInstance,r:e,k:t,f:!!s}:e:null);function createBaseVNode(e,t=null,s=null,n=0,i=null,l=e===Fragment?0:1,y=!1,D=!1){const T={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return D?(normalizeChildren(T,s),l&128&&e.normalize(T)):s&&(T.shapeFlag|=isString$1(s)?8:16),isBlockTreeEnabled>0&&!y&&currentBlock&&(T.patchFlag>0||l&6)&&T.patchFlag!==32&&currentBlock.push(T),T}const createVNode=_createVNode;function _createVNode(e,t=null,s=null,n=0,i=null,l=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const D=cloneVNode(e,t,!0);return s&&normalizeChildren(D,s),isBlockTreeEnabled>0&&!l&&currentBlock&&(D.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=D:currentBlock.push(D)),D.patchFlag|=-2,D}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:D,style:T}=t;D&&!isString$1(D)&&(t.class=normalizeClass(D)),isObject(T)&&(isProxy(T)&&!isArray(T)&&(T=extend({},T)),t.style=normalizeStyle(T))}const y=isString$1(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction$1(e)?2:0;return createBaseVNode(e,t,s,n,i,y,l,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend({},e):e:null}function cloneVNode(e,t,s=!1){const{props:n,ref:i,patchFlag:l,children:y}=e,D=t?mergeProps(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:D,key:D&&normalizeKey(D),ref:t&&t.ref?s&&i?isArray(i)?i.concat(normalizeRef(t)):[i,normalizeRef(t)]:normalizeRef(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:y,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(isArray(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),normalizeChildren(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction$1(t)?(t={default:t,_ctx:currentRenderingInstance},s=32):(t=String(t),n&64?(s=16,t=[createTextVNode(t)]):s=8);e.children=t,e.shapeFlag|=s}function mergeProps(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=normalizeClass([t.class,n.class]));else if(i==="style")t.style=normalizeStyle([t.style,n.style]);else if(isOn(i)){const l=t[i],y=n[i];y&&l!==y&&!(isArray(l)&&l.includes(y))&&(t[i]=l?[].concat(l,y):y)}else i!==""&&(t[i]=n[i])}return t}function invokeVNodeHook(e,t,s,n=null){callWithAsyncErrorHandling(e,t,7,[s,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||emptyAppContext,l={uid:uid++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,i),emitsOptions:normalizeEmitsOptions(n,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=emit.bind(null,l),e.ce&&e.ce(l),l}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(e=>currentInstance=e),internalSetCurrentInstance=e=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(t=>t(e)):globalCurrentInstanceSetters[0](e)};const setCurrentInstance=e=>{internalSetCurrentInstance(e),e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:s,children:n}=e.vnode,i=isStatefulComponent(e);initProps(e,s,i,t),initSlots(e,n);const l=i?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,l}function setupStatefulComponent(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:n}=s;if(n){const i=e.setupContext=n.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const l=callWithErrorHandling(n,e,0,[e.props,i]);if(resetTracking(),unsetCurrentInstance(),isPromise(l)){if(l.then(unsetCurrentInstance,unsetCurrentInstance),t)return l.then(y=>{handleSetupResult(e,y,t)}).catch(y=>{handleError(y,e,0)});e.asyncDep=l}else handleSetupResult(e,l,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,s){isFunction$1(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,s)}let compile;function finishComponentSetup(e,t,s){const n=e.type;if(!e.render){if(!t&&compile&&!n.render){const i=n.template||resolveMergedOptions(e).template;if(i){const{isCustomElement:l,compilerOptions:y}=e.appContext.config,{delimiters:D,compilerOptions:T}=n,v=extend(extend({isCustomElement:l,delimiters:D},y),T);n.render=compile(i,v)}}e.render=n.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,s){return track(e,"get","$attrs"),t[s]}}))}function createSetupContext(e){const t=s=>{e.exposed=s||{}};return{get attrs(){return getAttrsProxy(e)},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in publicPropertiesMap)return publicPropertiesMap[s](e)},has(t,s){return s in t||s in publicPropertiesMap}}))}function isClassComponent(e){return isFunction$1(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup),ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.2",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t?doc.createElementNS(svgNS,e):doc.createElement(e,s?{is:s}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,l){const y=s?s.previousSibling:t.lastChild;if(i&&(i===l||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===l||!(i=i.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${e}</svg>`:e;const D=templateContainer.content;if(n){const T=D.firstChild;for(;T.firstChild;)D.appendChild(T.firstChild);D.removeChild(T)}t.insertBefore(D,s)}return[y?y.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}};function patchClass(e,t,s){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,s){const n=e.style,i=isString$1(s);if(s&&!i){if(t&&!isString$1(t))for(const l in t)s[l]==null&&setStyle(n,l,"");for(const l in s)setStyle(n,l,s[l])}else{const l=n.display;i?t!==s&&(n.cssText=s):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=l)}}const importantRE=/\s*!important$/;function setStyle(e,t,s){if(isArray(s))s.forEach(n=>setStyle(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=autoPrefix(e,t);importantRE.test(s)?e.setProperty(hyphenate(n),s.replace(importantRE,""),"important"):e[n]=s}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const s=prefixCache[t];if(s)return s;let n=camelize(t);if(n!=="filter"&&n in e)return prefixCache[t]=n;n=capitalize(n);for(let i=0;i<prefixes.length;i++){const l=prefixes[i]+n;if(l in e)return prefixCache[t]=l}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,s,n,i){if(n&&t.startsWith("xlink:"))s==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,s);else{const l=isSpecialBooleanAttr(t);s==null||l&&!includeBooleanAttr(s)?e.removeAttribute(t):e.setAttribute(t,l?"":s)}}function patchDOMProp(e,t,s,n,i,l,y){if(t==="innerHTML"||t==="textContent"){n&&y(n,i,l),e[t]=s??"";return}const D=e.tagName;if(t==="value"&&D!=="PROGRESS"&&!D.includes("-")){e._value=s;const v=D==="OPTION"?e.getAttribute("value"):e.value,_=s??"";v!==_&&(e.value=_),s==null&&e.removeAttribute(t);return}let T=!1;if(s===""||s==null){const v=typeof e[t];v==="boolean"?s=includeBooleanAttr(s):s==null&&v==="string"?(s="",T=!0):v==="number"&&(s=0,T=!0)}try{e[t]=s}catch{}T&&e.removeAttribute(t)}function addEventListener(e,t,s,n){e.addEventListener(t,s,n)}function removeEventListener(e,t,s,n){e.removeEventListener(t,s,n)}function patchEvent(e,t,s,n,i=null){const l=e._vei||(e._vei={}),y=l[t];if(n&&y)y.value=n;else{const[D,T]=parseName(t);if(n){const v=l[t]=createInvoker(n,i);addEventListener(e,D,v,T)}else y&&(removeEventListener(e,D,y,T),l[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let n;for(;n=e.match(optionsModifierRE);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,s.value),t,5,[n])};return s.value=e,s.attached=getNow(),s}function patchStopImmediatePropagation(e,t){if(isArray(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,s,n,i=!1,l,y,D,T)=>{t==="class"?patchClass(e,n,i):t==="style"?patchStyle(e,s,n):isOn(t)?isModelListener(t)||patchEvent(e,t,s,n,y):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,n,i))?patchDOMProp(e,t,n,l,y,D,T):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),patchAttr(e,t,n,i))};function shouldSetAsProp(e,t,s,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction$1(s)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString$1(s)?!1:t in e}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray(t)?s=>invokeArrayFns(t,s):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vModelText={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e._assign=getModelAssigner(i);const l=n||i.props&&i.props.type==="number";addEventListener(e,t?"change":"input",y=>{if(y.target.composing)return;let D=e.value;s&&(D=D.trim()),l&&(D=looseToNumber(D)),e._assign(D)}),s&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:s,trim:n,number:i}},l){if(e._assign=getModelAssigner(l),e.composing||document.activeElement===e&&e.type!=="range"&&(s||n&&e.value.trim()===t||(i||e.type==="number")&&looseToNumber(e.value)===t))return;const y=t??"";e.value!==y&&(e.value=y)}},vShow={beforeMount(e,{value:t},{transition:s}){e._vod=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),setDisplay(e,!0),n.enter(e)):n.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e._vod:"none"}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=normalizeContainer(n);if(!i)return;const l=t._component;!isFunction$1(l)&&!l.render&&!l.template&&(l.template=i.innerHTML),i.innerHTML="";const y=s(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),y},t};function normalizeContainer(e){return isString$1(e)?document.querySelector(e):e}var _a;const isClient=typeof window<"u",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",noop=()=>{};isClient&&((_a=window==null?void 0:window.navigator)!=null&&_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(e){return typeof e=="function"?e():unref(e)}function createFilterWrapper(e,t){function s(...n){return new Promise((i,l)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(i).catch(l)})}return s}const bypassFilter=e=>e();function pausableFilter(e=bypassFilter){const t=ref(!0);function s(){t.value=!1}function n(){t.value=!0}const i=(...l)=>{t.value&&e(...l)};return{isActive:readonly(t),pause:s,resume:n,eventFilter:i}}function identity(e){return e}function tryOnScopeDispose(e){return getCurrentScope()?(onScopeDispose(e),!0):!1}function resolveRef(e){return typeof e=="function"?computed(e):ref(e)}function tryOnMounted(e,t=!0){getCurrentInstance()?onMounted(e):t?e():nextTick(e)}function useToggle(e=!1,t={}){const{truthyValue:s=!0,falsyValue:n=!1}=t,i=isRef(e),l=ref(e);function y(D){if(arguments.length)return l.value=D,l.value;{const T=resolveUnref(s);return l.value=l.value===T?resolveUnref(n):T,l.value}}return i?y:[l,y]}var __getOwnPropSymbols$6=Object.getOwnPropertySymbols,__hasOwnProp$6=Object.prototype.hasOwnProperty,__propIsEnum$6=Object.prototype.propertyIsEnumerable,__objRest$5=(e,t)=>{var s={};for(var n in e)__hasOwnProp$6.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&__getOwnPropSymbols$6)for(var n of __getOwnPropSymbols$6(e))t.indexOf(n)<0&&__propIsEnum$6.call(e,n)&&(s[n]=e[n]);return s};function watchWithFilter(e,t,s={}){const n=s,{eventFilter:i=bypassFilter}=n,l=__objRest$5(n,["eventFilter"]);return watch(e,createFilterWrapper(i,t),l)}var __defProp$2=Object.defineProperty,__defProps$2=Object.defineProperties,__getOwnPropDescs$2=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(e,t,s)=>t in e?__defProp$2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__spreadValues$2=(e,t)=>{for(var s in t||(t={}))__hasOwnProp$2.call(t,s)&&__defNormalProp$2(e,s,t[s]);if(__getOwnPropSymbols$2)for(var s of __getOwnPropSymbols$2(t))__propIsEnum$2.call(t,s)&&__defNormalProp$2(e,s,t[s]);return e},__spreadProps$2=(e,t)=>__defProps$2(e,__getOwnPropDescs$2(t)),__objRest$1=(e,t)=>{var s={};for(var n in e)__hasOwnProp$2.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&__getOwnPropSymbols$2)for(var n of __getOwnPropSymbols$2(e))t.indexOf(n)<0&&__propIsEnum$2.call(e,n)&&(s[n]=e[n]);return s};function watchPausable(e,t,s={}){const n=s,{eventFilter:i}=n,l=__objRest$1(n,["eventFilter"]),{eventFilter:y,pause:D,resume:T,isActive:v}=pausableFilter(i);return{stop:watchWithFilter(e,t,__spreadProps$2(__spreadValues$2({},l),{eventFilter:y})),pause:D,resume:T,isActive:v}}function unrefElement(e){var t;const s=resolveUnref(e);return(t=s==null?void 0:s.$el)!=null?t:s}const defaultWindow=isClient?window:void 0;function useEventListener(...e){let t,s,n,i;if(isString(e[0])||Array.isArray(e[0])?([s,n,i]=e,t=defaultWindow):[t,s,n,i]=e,!t)return noop;Array.isArray(s)||(s=[s]),Array.isArray(n)||(n=[n]);const l=[],y=()=>{l.forEach(_=>_()),l.length=0},D=(_,L,O,M)=>(_.addEventListener(L,O,M),()=>_.removeEventListener(L,O,M)),T=watch(()=>[unrefElement(t),resolveUnref(i)],([_,L])=>{y(),_&&l.push(...s.flatMap(O=>n.map(M=>D(_,O,M,L))))},{immediate:!0,flush:"post"}),v=()=>{T(),y()};return tryOnScopeDispose(v),v}function useSupported(e,t=!1){const s=ref(),n=()=>s.value=!!e();return n(),tryOnMounted(n,t),s}function useMediaQuery(e,t={}){const{window:s=defaultWindow}=t,n=useSupported(()=>s&&"matchMedia"in s&&typeof s.matchMedia=="function");let i;const l=ref(!1),y=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",D):i.removeListener(D))},D=()=>{n.value&&(y(),i=s.matchMedia(resolveRef(e).value),l.value=i.matches,"addEventListener"in i?i.addEventListener("change",D):i.addListener(D))};return watchEffect(D),tryOnScopeDispose(()=>y()),l}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};const handlers=_global[globalKey];function getSSRHandler(e,t){return handlers[e]||t}function guessSerializerType(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var __defProp$k=Object.defineProperty,__getOwnPropSymbols$m=Object.getOwnPropertySymbols,__hasOwnProp$m=Object.prototype.hasOwnProperty,__propIsEnum$m=Object.prototype.propertyIsEnumerable,__defNormalProp$k=(e,t,s)=>t in e?__defProp$k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__spreadValues$k=(e,t)=>{for(var s in t||(t={}))__hasOwnProp$m.call(t,s)&&__defNormalProp$k(e,s,t[s]);if(__getOwnPropSymbols$m)for(var s of __getOwnPropSymbols$m(t))__propIsEnum$m.call(t,s)&&__defNormalProp$k(e,s,t[s]);return e};const StorageSerializers={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(e,t,s,n={}){var i;const{flush:l="pre",deep:y=!0,listenToStorageChanges:D=!0,writeDefaults:T=!0,mergeDefaults:v=!1,shallow:_,window:L=defaultWindow,eventFilter:O,onError:M=c=>{console.error(c)}}=n,w=(_?shallowRef:ref)(t);if(!s)try{s=getSSRHandler("getDefaultStorage",()=>{var c;return(c=defaultWindow)==null?void 0:c.localStorage})()}catch(c){M(c)}if(!s)return w;const A=resolveUnref(t),u=guessSerializerType(A),R=(i=n.serializer)!=null?i:StorageSerializers[u],{pause:I,resume:N}=watchPausable(w,()=>S(w.value),{flush:l,deep:y,eventFilter:O});return L&&D&&(useEventListener(L,"storage",m),useEventListener(L,customStorageEventName,g)),m(),w;function S(c){try{if(c==null)s.removeItem(e);else{const E=R.write(c),H=s.getItem(e);H!==E&&(s.setItem(e,E),L&&L.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:e,oldValue:H,newValue:E,storageArea:s}})))}}catch(E){M(E)}}function o(c){const E=c?c.newValue:s.getItem(e);if(E==null)return T&&A!==null&&s.setItem(e,R.write(A)),A;if(!c&&v){const H=R.read(E);return isFunction(v)?v(H,A):u==="object"&&!Array.isArray(H)?__spreadValues$k(__spreadValues$k({},A),H):H}else return typeof E!="string"?E:R.read(E)}function g(c){m(c.detail)}function m(c){if(!(c&&c.storageArea!==s)){if(c&&c.key==null){w.value=A;return}if(!(c&&c.key!==e)){I();try{w.value=o(c)}catch(E){M(E)}finally{c?nextTick(N):N()}}}}}function usePreferredDark(e){return useMediaQuery("(prefers-color-scheme: dark)",e)}var __defProp$j=Object.defineProperty,__getOwnPropSymbols$l=Object.getOwnPropertySymbols,__hasOwnProp$l=Object.prototype.hasOwnProperty,__propIsEnum$l=Object.prototype.propertyIsEnumerable,__defNormalProp$j=(e,t,s)=>t in e?__defProp$j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__spreadValues$j=(e,t)=>{for(var s in t||(t={}))__hasOwnProp$l.call(t,s)&&__defNormalProp$j(e,s,t[s]);if(__getOwnPropSymbols$l)for(var s of __getOwnPropSymbols$l(t))__propIsEnum$l.call(t,s)&&__defNormalProp$j(e,s,t[s]);return e};function useColorMode(e={}){const{selector:t="html",attribute:s="class",initialValue:n="auto",window:i=defaultWindow,storage:l,storageKey:y="vueuse-color-scheme",listenToStorageChanges:D=!0,storageRef:T,emitAuto:v}=e,_=__spreadValues$j({auto:"",light:"light",dark:"dark"},e.modes||{}),L=usePreferredDark({window:i}),O=computed(()=>L.value?"dark":"light"),M=T||(y==null?ref(n):useStorage(y,n,l,{window:i,listenToStorageChanges:D})),w=computed({get(){return M.value==="auto"&&!v?O.value:M.value},set(I){M.value=I}}),A=getSSRHandler("updateHTMLAttrs",(I,N,S)=>{const o=i==null?void 0:i.document.querySelector(I);if(o)if(N==="class"){const g=S.split(/\s/g);Object.values(_).flatMap(m=>(m||"").split(/\s/g)).filter(Boolean).forEach(m=>{g.includes(m)?o.classList.add(m):o.classList.remove(m)})}else o.setAttribute(N,S)});function u(I){var N;const S=I==="auto"?O.value:I;A(t,s,(N=_[S])!=null?N:S)}function R(I){e.onChanged?e.onChanged(I,u):u(I)}return watch(w,R,{flush:"post",immediate:!0}),v&&watch(O,()=>R(w.value),{flush:"post"}),tryOnMounted(()=>R(w.value)),w}var __defProp$i=Object.defineProperty,__defProps$7=Object.defineProperties,__getOwnPropDescs$7=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$k=Object.getOwnPropertySymbols,__hasOwnProp$k=Object.prototype.hasOwnProperty,__propIsEnum$k=Object.prototype.propertyIsEnumerable,__defNormalProp$i=(e,t,s)=>t in e?__defProp$i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__spreadValues$i=(e,t)=>{for(var s in t||(t={}))__hasOwnProp$k.call(t,s)&&__defNormalProp$i(e,s,t[s]);if(__getOwnPropSymbols$k)for(var s of __getOwnPropSymbols$k(t))__propIsEnum$k.call(t,s)&&__defNormalProp$i(e,s,t[s]);return e},__spreadProps$7=(e,t)=>__defProps$7(e,__getOwnPropDescs$7(t));function useDark(e={}){const{valueDark:t="dark",valueLight:s="",window:n=defaultWindow}=e,i=useColorMode(__spreadProps$7(__spreadValues$i({},e),{onChanged:(D,T)=>{var v;e.onChanged?(v=e.onChanged)==null||v.call(e,D==="dark"):T(D)},modes:{dark:t,light:s}})),l=usePreferredDark({window:n});return computed({get(){return i.value==="dark"},set(D){D===l.value?i.value="auto":i.value=D?"dark":"light"}})}var SwipeDirection;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,s)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__spreadValues=(e,t)=>{for(var s in t||(t={}))__hasOwnProp.call(t,s)&&__defNormalProp(e,s,t[s]);if(__getOwnPropSymbols)for(var s of __getOwnPropSymbols(t))__propIsEnum.call(t,s)&&__defNormalProp(e,s,t[s]);return e};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity},_TransitionPresets);const isDark=useDark(),toggleDark=useToggle(isDark),_export_sfc=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},_sfc_main$2={},_hoisted_1$2={"mt-6":"","inline-flex":"","gap-2":"","text-xl":""},_hoisted_2$1=createBaseVNode("div",{"i-carbon-sun":"","dark:i-carbon-moon":""},null,-1),_hoisted_3$1=[_hoisted_2$1],_hoisted_4$1=createBaseVNode("a",{"i-carbon-logo-github":"","icon-btn":"",rel:"noreferrer",href:"https://github.com/Efrice/watermark.git",target:"_blank",title:"GitHub"},null,-1);function _sfc_render(e,t){return openBlock(),createElementBlock("nav",_hoisted_1$2,[createBaseVNode("button",{"icon-btn":"",onClick:t[0]||(t[0]=s=>("toggleDark"in e?e.toggleDark:unref(toggleDark))())},_hoisted_3$1),_hoisted_4$1])}const __unplugin_components_0=_export_sfc(_sfc_main$2,[["render",_sfc_render]]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var l=Function.bind.apply(t,i);return new l}return t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),s}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,s){module.exports=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var Oe;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=ve,t.bytesToString=b,t.createValidAbsoluteUrl=Se,t.getModificationDate=me,t.getVerbosityLevel=he,t.info=ae,t.isArrayBuffer=de,t.isArrayEqual=be,t.normalizeUnicode=Ee,t.objectFromMap=x,t.objectSize=h,t.setVerbosityLevel=oe,t.shadow=K,t.string32=a,t.stringToBytes=r,t.stringToPDFString=Q,t.stringToUTF8String=ne,t.unreachable=Ae,t.utf8StringToString=le,t.warn=pe;const s=[1,0,0,1,0,0];t.IDENTITY_MATRIX=s;const n=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=n;const i=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=i;const l=1.35;t.LINE_FACTOR=l;const y=.35;t.LINE_DESCENT_FACTOR=y;const D=y/l;t.BASELINE_FACTOR=D;const T={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=T;const v={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=v;const _="pdfjs_internal_editor_";t.AnnotationEditorPrefix=_;const L={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=L;const O={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=O;const M={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=M;const w={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=w;const A={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=A;const u={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=u;const R={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=R;const I={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=I;const N={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=N;const S={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=S;const o={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=o;const g={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=g;const m={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=m;const c={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=c;const E={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=E;const H={O:"PageOpen",C:"PageClose"};t.PageActionEventType=H;const f={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=f;const z={NONE:0,BINARY:1};t.CMapCompressionType=z;const J={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=J;const se={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=se;let ie=f.WARNINGS;function oe(ue){Number.isInteger(ue)&&(ie=ue)}function he(){return ie}function ae(ue){ie>=f.INFOS&&console.log(`Info: ${ue}`)}function pe(ue){ie>=f.WARNINGS&&console.log(`Warning: ${ue}`)}function Ae(ue){throw new Error(ue)}function ve(ue,B){ue||Ae(B)}function Ce(ue){switch(ue==null?void 0:ue.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Se(ue,B=null,$=null){if(!ue)return null;try{if($&&typeof ue=="string"){if($.addDefaultProtocol&&ue.startsWith("www.")){const _e=ue.match(/\./g);(_e==null?void 0:_e.length)>=2&&(ue=`http://${ue}`)}if($.tryConvertEncoding)try{ue=ne(ue)}catch{}}const fe=B?new URL(ue,B):new URL(ue);if(Ce(fe))return fe}catch{}return null}function K(ue,B,$,fe=!1){return Object.defineProperty(ue,B,{value:$,enumerable:!fe,configurable:!0,writable:!1}),$}const C=function(){function B($,fe){this.constructor===B&&Ae("Cannot initialize BaseException."),this.message=$,this.name=fe}return B.prototype=new Error,B.constructor=B,B}();t.BaseException=C;class P extends C{constructor(B,$){super(B,"PasswordException"),this.code=$}}t.PasswordException=P;class j extends C{constructor(B,$){super(B,"UnknownErrorException"),this.details=$}}t.UnknownErrorException=j;class G extends C{constructor(B){super(B,"InvalidPDFException")}}t.InvalidPDFException=G;class V extends C{constructor(B){super(B,"MissingPDFException")}}t.MissingPDFException=V;class Y extends C{constructor(B,$){super(B,"UnexpectedResponseException"),this.status=$}}t.UnexpectedResponseException=Y;class q extends C{constructor(B){super(B,"FormatError")}}t.FormatError=q;class d extends C{constructor(B){super(B,"AbortException")}}t.AbortException=d;function b(ue){(typeof ue!="object"||(ue==null?void 0:ue.length)===void 0)&&Ae("Invalid argument for bytesToString");const B=ue.length,$=8192;if(B<$)return String.fromCharCode.apply(null,ue);const fe=[];for(let _e=0;_e<B;_e+=$){const Pe=Math.min(_e+$,B),xe=ue.subarray(_e,Pe);fe.push(String.fromCharCode.apply(null,xe))}return fe.join("")}function r(ue){typeof ue!="string"&&Ae("Invalid argument for stringToBytes");const B=ue.length,$=new Uint8Array(B);for(let fe=0;fe<B;++fe)$[fe]=ue.charCodeAt(fe)&255;return $}function a(ue){return String.fromCharCode(ue>>24&255,ue>>16&255,ue>>8&255,ue&255)}function h(ue){return Object.keys(ue).length}function x(ue){const B=Object.create(null);for(const[$,fe]of ue)B[$]=fe;return B}function F(){const ue=new Uint8Array(4);return ue[0]=1,new Uint32Array(ue.buffer,0,1)[0]===1}function U(){try{return new Function(""),!0}catch{return!1}}class X{static get isLittleEndian(){return K(this,"isLittleEndian",F())}static get isEvalSupported(){return K(this,"isEvalSupported",U())}static get isOffscreenCanvasSupported(){return K(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?K(this,"platform",{isWin:!1,isMac:!1}):K(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=X;const W=[...Array(256).keys()].map(ue=>ue.toString(16).padStart(2,"0"));class Z{static makeHexColor(B,$,fe){return`#${W[B]}${W[$]}${W[fe]}`}static scaleMinMax(B,$){let fe;B[0]?(B[0]<0&&(fe=$[0],$[0]=$[1],$[1]=fe),$[0]*=B[0],$[1]*=B[0],B[3]<0&&(fe=$[2],$[2]=$[3],$[3]=fe),$[2]*=B[3],$[3]*=B[3]):(fe=$[0],$[0]=$[2],$[2]=fe,fe=$[1],$[1]=$[3],$[3]=fe,B[1]<0&&(fe=$[2],$[2]=$[3],$[3]=fe),$[2]*=B[1],$[3]*=B[1],B[2]<0&&(fe=$[0],$[0]=$[1],$[1]=fe),$[0]*=B[2],$[1]*=B[2]),$[0]+=B[4],$[1]+=B[4],$[2]+=B[5],$[3]+=B[5]}static transform(B,$){return[B[0]*$[0]+B[2]*$[1],B[1]*$[0]+B[3]*$[1],B[0]*$[2]+B[2]*$[3],B[1]*$[2]+B[3]*$[3],B[0]*$[4]+B[2]*$[5]+B[4],B[1]*$[4]+B[3]*$[5]+B[5]]}static applyTransform(B,$){const fe=B[0]*$[0]+B[1]*$[2]+$[4],_e=B[0]*$[1]+B[1]*$[3]+$[5];return[fe,_e]}static applyInverseTransform(B,$){const fe=$[0]*$[3]-$[1]*$[2],_e=(B[0]*$[3]-B[1]*$[2]+$[2]*$[5]-$[4]*$[3])/fe,Pe=(-B[0]*$[1]+B[1]*$[0]+$[4]*$[1]-$[5]*$[0])/fe;return[_e,Pe]}static getAxialAlignedBoundingBox(B,$){const fe=Z.applyTransform(B,$),_e=Z.applyTransform(B.slice(2,4),$),Pe=Z.applyTransform([B[0],B[3]],$),xe=Z.applyTransform([B[2],B[1]],$);return[Math.min(fe[0],_e[0],Pe[0],xe[0]),Math.min(fe[1],_e[1],Pe[1],xe[1]),Math.max(fe[0],_e[0],Pe[0],xe[0]),Math.max(fe[1],_e[1],Pe[1],xe[1])]}static inverseTransform(B){const $=B[0]*B[3]-B[1]*B[2];return[B[3]/$,-B[1]/$,-B[2]/$,B[0]/$,(B[2]*B[5]-B[4]*B[3])/$,(B[4]*B[1]-B[5]*B[0])/$]}static singularValueDecompose2dScale(B){const $=[B[0],B[2],B[1],B[3]],fe=B[0]*$[0]+B[1]*$[2],_e=B[0]*$[1]+B[1]*$[3],Pe=B[2]*$[0]+B[3]*$[2],xe=B[2]*$[1]+B[3]*$[3],ke=(fe+xe)/2,Re=Math.sqrt((fe+xe)**2-4*(fe*xe-Pe*_e))/2,Me=ke+Re||1,Te=ke-Re||1;return[Math.sqrt(Me),Math.sqrt(Te)]}static normalizeRect(B){const $=B.slice(0);return B[0]>B[2]&&($[0]=B[2],$[2]=B[0]),B[1]>B[3]&&($[1]=B[3],$[3]=B[1]),$}static intersect(B,$){const fe=Math.max(Math.min(B[0],B[2]),Math.min($[0],$[2])),_e=Math.min(Math.max(B[0],B[2]),Math.max($[0],$[2]));if(fe>_e)return null;const Pe=Math.max(Math.min(B[1],B[3]),Math.min($[1],$[3])),xe=Math.min(Math.max(B[1],B[3]),Math.max($[1],$[3]));return Pe>xe?null:[fe,Pe,_e,xe]}static bezierBoundingBox(B,$,fe,_e,Pe,xe,ke,Re){const Me=[],Te=[[],[]];let Ne,Ie,Le,Fe,Ue,He,$e,Ve;for(let Xe=0;Xe<2;++Xe){if(Xe===0?(Ie=6*B-12*fe+6*Pe,Ne=-3*B+9*fe-9*Pe+3*ke,Le=3*fe-3*B):(Ie=6*$-12*_e+6*xe,Ne=-3*$+9*_e-9*xe+3*Re,Le=3*_e-3*$),Math.abs(Ne)<1e-12){if(Math.abs(Ie)<1e-12)continue;Fe=-Le/Ie,0<Fe&&Fe<1&&Me.push(Fe);continue}$e=Ie*Ie-4*Le*Ne,Ve=Math.sqrt($e),!($e<0)&&(Ue=(-Ie+Ve)/(2*Ne),0<Ue&&Ue<1&&Me.push(Ue),He=(-Ie-Ve)/(2*Ne),0<He&&He<1&&Me.push(He))}let je=Me.length,Be;const qe=je;for(;je--;)Fe=Me[je],Be=1-Fe,Te[0][je]=Be*Be*Be*B+3*Be*Be*Fe*fe+3*Be*Fe*Fe*Pe+Fe*Fe*Fe*ke,Te[1][je]=Be*Be*Be*$+3*Be*Be*Fe*_e+3*Be*Fe*Fe*xe+Fe*Fe*Fe*Re;return Te[0][qe]=B,Te[1][qe]=$,Te[0][qe+1]=ke,Te[1][qe+1]=Re,Te[0].length=Te[1].length=qe+2,[Math.min(...Te[0]),Math.min(...Te[1]),Math.max(...Te[0]),Math.max(...Te[1])]}}t.Util=Z;const ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Q(ue){if(ue[0]>="ï"){let $;if(ue[0]==="þ"&&ue[1]==="ÿ"?$="utf-16be":ue[0]==="ÿ"&&ue[1]==="þ"?$="utf-16le":ue[0]==="ï"&&ue[1]==="»"&&ue[2]==="¿"&&($="utf-8"),$)try{const fe=new TextDecoder($,{fatal:!0}),_e=r(ue);return fe.decode(_e)}catch(fe){pe(`stringToPDFString: "${fe}".`)}}const B=[];for(let $=0,fe=ue.length;$<fe;$++){const _e=ee[ue.charCodeAt($)];B.push(_e?String.fromCharCode(_e):ue.charAt($))}return B.join("")}function ne(ue){return decodeURIComponent(escape(ue))}function le(ue){return unescape(encodeURIComponent(ue))}function de(ue){return typeof ue=="object"&&(ue==null?void 0:ue.byteLength)!==void 0}function be(ue,B){if(ue.length!==B.length)return!1;for(let $=0,fe=ue.length;$<fe;$++)if(ue[$]!==B[$])return!1;return!0}function me(ue=new Date){return[ue.getUTCFullYear().toString(),(ue.getUTCMonth()+1).toString().padStart(2,"0"),ue.getUTCDate().toString().padStart(2,"0"),ue.getUTCHours().toString().padStart(2,"0"),ue.getUTCMinutes().toString().padStart(2,"0"),ue.getUTCSeconds().toString().padStart(2,"0")].join("")}class we{constructor(){re(this,Oe,!1);this.promise=new Promise((B,$)=>{this.resolve=fe=>{ge(this,Oe,!0),B(fe)},this.reject=fe=>{ge(this,Oe,!0),$(fe)}})}get settled(){return k(this,Oe)}}Oe=new WeakMap,t.PromiseCapability=we;let te=null,ye=null;function Ee(ue){return te||(te=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ye=new Map([["ﬅ","ſt"]])),ue.replaceAll(te,(B,$,fe)=>$?$.normalize("NFKC"):ye.get(fe))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,s,n,i,Je,y,at,T,v,_,L,O,M,w,A,ft,R,I,pt,S,o;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:m,NodeCMapReaderFactory:c,NodeFilterFactory:E,NodeStandardFontDataFactory:H}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=m,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=c,exports.DefaultFilterFactory=DefaultFilterFactory=E,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=H}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:m}=__w_pdfjs_require__(21);createPDFNetworkStream=c=>new m(c)}else{const{PDFNetworkStream:m}=__w_pdfjs_require__(24),{PDFFetchStream:c}=__w_pdfjs_require__(25);createPDFNetworkStream=E=>(0,_display_utils.isValidFetchUrl)(E.url)?new c(E):new m(E)}function getDocument(m){if(typeof m=="string"||m instanceof URL?m={url:m}:(0,_util.isArrayBuffer)(m)&&(m={data:m}),typeof m!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!m.url&&!m.data&&!m.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const c=new PDFDocumentLoadingTask,{docId:E}=c,H=m.url?getUrlProp(m.url):null,f=m.data?getDataProp(m.data):null,z=m.httpHeaders||null,J=m.withCredentials===!0,se=m.password??null,ie=m.range instanceof PDFDataRangeTransport?m.range:null,oe=Number.isInteger(m.rangeChunkSize)&&m.rangeChunkSize>0?m.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let he=m.worker instanceof PDFWorker?m.worker:null;const ae=m.verbosity,pe=typeof m.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(m.docBaseUrl)?m.docBaseUrl:null,Ae=typeof m.cMapUrl=="string"?m.cMapUrl:null,ve=m.cMapPacked!==!1,Ce=m.CMapReaderFactory||DefaultCMapReaderFactory,Se=typeof m.standardFontDataUrl=="string"?m.standardFontDataUrl:null,K=m.StandardFontDataFactory||DefaultStandardFontDataFactory,C=m.stopAtErrors!==!0,P=Number.isInteger(m.maxImageSize)&&m.maxImageSize>-1?m.maxImageSize:-1,j=m.isEvalSupported!==!1,G=typeof m.isOffscreenCanvasSupported=="boolean"?m.isOffscreenCanvasSupported:!_is_node.isNodeJS,V=Number.isInteger(m.canvasMaxAreaInBytes)?m.canvasMaxAreaInBytes:-1,Y=typeof m.disableFontFace=="boolean"?m.disableFontFace:_is_node.isNodeJS,q=m.fontExtraProperties===!0,d=m.enableXfa===!0,b=m.ownerDocument||globalThis.document,r=m.disableRange===!0,a=m.disableStream===!0,h=m.disableAutoFetch===!0,x=m.pdfBug===!0,F=ie?ie.length:m.length??NaN,U=typeof m.useSystemFonts=="boolean"?m.useSystemFonts:!_is_node.isNodeJS&&!Y,X=typeof m.useWorkerFetch=="boolean"?m.useWorkerFetch:Ce===_display_utils.DOMCMapReaderFactory&&K===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(Ae,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Se,document.baseURI),W=m.canvasFactory||new DefaultCanvasFactory({ownerDocument:b}),Z=m.filterFactory||new DefaultFilterFactory({docId:E,ownerDocument:b}),ee=null;(0,_util.setVerbosityLevel)(ae);const Q={canvasFactory:W,filterFactory:Z};if(X||(Q.cMapReaderFactory=new Ce({baseUrl:Ae,isCompressed:ve}),Q.standardFontDataFactory=new K({baseUrl:Se})),!he){const de={verbosity:ae,port:_worker_options.GlobalWorkerOptions.workerPort};he=de.port?PDFWorker.fromPort(de):new PDFWorker(de),c._worker=he}const ne={docId:E,apiVersion:"3.6.172",data:f,password:se,disableAutoFetch:h,rangeChunkSize:oe,length:F,docBaseUrl:pe,enableXfa:d,evaluatorOptions:{maxImageSize:P,disableFontFace:Y,ignoreErrors:C,isEvalSupported:j,isOffscreenCanvasSupported:G,canvasMaxAreaInBytes:V,fontExtraProperties:q,useSystemFonts:U,cMapUrl:X?Ae:null,standardFontDataUrl:X?Se:null}},le={ignoreErrors:C,isEvalSupported:j,disableFontFace:Y,fontExtraProperties:q,enableXfa:d,ownerDocument:b,disableAutoFetch:h,pdfBug:x,styleElement:ee};return he.promise.then(function(){if(c.destroyed)throw new Error("Loading aborted");const de=_fetchDocument(he,ne),be=new Promise(function(me){let we;ie?we=new _transport_stream.PDFDataTransportStream({length:F,initialData:ie.initialData,progressiveDone:ie.progressiveDone,contentDispositionFilename:ie.contentDispositionFilename,disableRange:r,disableStream:a},ie):f||(we=createPDFNetworkStream({url:H,length:F,httpHeaders:z,withCredentials:J,rangeChunkSize:oe,disableRange:r,disableStream:a})),me(we)});return Promise.all([de,be]).then(function([me,we]){if(c.destroyed)throw new Error("Loading aborted");const te=new _message_handler.MessageHandler(E,me,he.port),ye=new WorkerTransport(te,c,we,le,Q);c._transport=ye,te.send("Ready",null)})}).catch(c._capability.reject),c}async function _fetchDocument(m,c){if(m.destroyed)throw new Error("Worker was destroyed");const E=await m.messageHandler.sendWithPromise("GetDocRequest",c,c.data?[c.data.buffer]:null);if(m.destroyed)throw new Error("Worker was destroyed");return E}function getUrlProp(m){if(m instanceof URL)return m.href;try{return new URL(m,window.location).href}catch{if(_is_node.isNodeJS&&typeof m=="string")return m}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(m){if(_is_node.isNodeJS&&typeof Buffer<"u"&&m instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(m);if(m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength)return m;if(typeof m=="string")return(0,_util.stringToBytes)(m);if(typeof m=="object"&&!isNaN(m==null?void 0:m.length)||(0,_util.isArrayBuffer)(m))return new Uint8Array(m);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${rt(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var c;this.destroyed=!0,await((c=this._transport)==null?void 0:c.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=t;e=new WeakMap,re(PDFDocumentLoadingTask,e,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(c,E,H=!1,f=null){this.length=c,this.initialData=E,this.progressiveDone=H,this.contentDispositionFilename=f,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(c){this._rangeListeners.push(c)}addProgressListener(c){this._progressListeners.push(c)}addProgressiveReadListener(c){this._progressiveReadListeners.push(c)}addProgressiveDoneListener(c){this._progressiveDoneListeners.push(c)}onDataRange(c,E){for(const H of this._rangeListeners)H(c,E)}onDataProgress(c,E){this._readyCapability.promise.then(()=>{for(const H of this._progressListeners)H(c,E)})}onDataProgressiveRead(c){this._readyCapability.promise.then(()=>{for(const E of this._progressiveReadListeners)E(c)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const c of this._progressiveDoneListeners)c()})}transportReady(){this._readyCapability.resolve()}requestDataRange(c,E){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(c,E){this._pdfInfo=c,this._transport=E}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(c){return this._transport.getPage(c)}getPageIndex(c){return this._transport.getPageIndex(c)}getDestinations(){return this._transport.getDestinations()}getDestination(c){return this._transport.getDestination(c)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(c=!1){return this._transport.startCleanup(c||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(c,E,H,f=!1){re(this,i);re(this,y);re(this,s,null);re(this,n,!1);this._pageIndex=c,this._pageInfo=E,this._transport=H,this._stats=f?new _display_utils.StatTimer:null,this._pdfBug=f,this.commonObjs=H.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:c,rotation:E=this.rotate,offsetX:H=0,offsetY:f=0,dontFlip:z=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:c,rotation:E,offsetX:H,offsetY:f,dontFlip:z})}getAnnotations({intent:c="display"}={}){const E=this._transport.getRenderingIntent(c);return this._transport.getAnnotations(this._pageIndex,E.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var c;return((c=this._transport._htmlForXfa)==null?void 0:c.children[this._pageIndex])||null}render({canvasContext:c,viewport:E,intent:H="display",annotationMode:f=_util.AnnotationMode.ENABLE,transform:z=null,background:J=null,optionalContentConfigPromise:se=null,annotationCanvasMap:ie=null,pageColors:oe=null,printAnnotationStorage:he=null}){var K,C,P;if((K=arguments[0])!=null&&K.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(C=this._stats)==null||C.time("Overall");const ae=this._transport.getRenderingIntent(H,f,he);ge(this,n,!1),ce(this,y,at).call(this),se||(se=this._transport.getOptionalContentConfig());let pe=this._intentStates.get(ae.cacheKey);pe||(pe=Object.create(null),this._intentStates.set(ae.cacheKey,pe)),pe.streamReaderCancelTimeout&&(clearTimeout(pe.streamReaderCancelTimeout),pe.streamReaderCancelTimeout=null);const Ae=!!(ae.renderingIntent&_util.RenderingIntentFlag.PRINT);pe.displayReadyCapability||(pe.displayReadyCapability=new _util.PromiseCapability,pe.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(P=this._stats)==null||P.time("Page Request"),this._pumpOperatorList(ae));const ve=j=>{var G,V;pe.renderTasks.delete(Ce),(this._maybeCleanupAfterRender||Ae)&&ge(this,n,!0),ce(this,i,Je).call(this,!Ae),j?(Ce.capability.reject(j),this._abortOperatorList({intentState:pe,reason:j instanceof Error?j:new Error(j)})):Ce.capability.resolve(),(G=this._stats)==null||G.timeEnd("Rendering"),(V=this._stats)==null||V.timeEnd("Overall")},Ce=new InternalRenderTask({callback:ve,params:{canvasContext:c,viewport:E,transform:z,background:J},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ie,operatorList:pe.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Ae,pdfBug:this._pdfBug,pageColors:oe});(pe.renderTasks||(pe.renderTasks=new Set)).add(Ce);const Se=Ce.task;return Promise.all([pe.displayReadyCapability.promise,se]).then(([j,G])=>{var V;if(k(this,n)){ve();return}(V=this._stats)==null||V.time("Rendering"),Ce.initializeGraphics({transparency:j,optionalContentConfig:G}),Ce.operatorListChanged()}).catch(ve),Se}getOperatorList({intent:c="display",annotationMode:E=_util.AnnotationMode.ENABLE,printAnnotationStorage:H=null}={}){var ie;function f(){J.operatorList.lastChunk&&(J.opListReadCapability.resolve(J.operatorList),J.renderTasks.delete(se))}const z=this._transport.getRenderingIntent(c,E,H,!0);let J=this._intentStates.get(z.cacheKey);J||(J=Object.create(null),this._intentStates.set(z.cacheKey,J));let se;return J.opListReadCapability||(se=Object.create(null),se.operatorListChanged=f,J.opListReadCapability=new _util.PromiseCapability,(J.renderTasks||(J.renderTasks=new Set)).add(se),J.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ie=this._stats)==null||ie.time("Page Request"),this._pumpOperatorList(z)),J.opListReadCapability.promise}streamTextContent({includeMarkedContent:c=!1,disableNormalization:E=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:c===!0,disableNormalization:E===!0},{highWaterMark:100,size(f){return f.items.length}})}getTextContent(c={}){if(this._transport._htmlForXfa)return this.getXfa().then(H=>_xfa_text.XfaText.textContent(H));const E=this.streamTextContent(c);return new Promise(function(H,f){function z(){J.read().then(function({value:ie,done:oe}){if(oe){H(se);return}Object.assign(se.styles,ie.styles),se.items.push(...ie.items),z()},f)}const J=E.getReader(),se={items:[],styles:Object.create(null)};z()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const c=[];for(const E of this._intentStates.values())if(this._abortOperatorList({intentState:E,reason:new Error("Page was destroyed."),force:!0}),!E.opListReadCapability)for(const H of E.renderTasks)c.push(H.completed),H.cancel();return this.objs.clear(),ge(this,n,!1),ce(this,y,at).call(this),Promise.all(c)}cleanup(c=!1){ge(this,n,!0);const E=ce(this,i,Je).call(this,!1);return c&&E&&this._stats&&(this._stats=new _display_utils.StatTimer),E}_startRenderPage(c,E){var f,z;const H=this._intentStates.get(E);H&&((f=this._stats)==null||f.timeEnd("Page Request"),(z=H.displayReadyCapability)==null||z.resolve(c))}_renderPageChunk(c,E){for(let H=0,f=c.length;H<f;H++)E.operatorList.fnArray.push(c.fnArray[H]),E.operatorList.argsArray.push(c.argsArray[H]);E.operatorList.lastChunk=c.lastChunk,E.operatorList.separateAnnots=c.separateAnnots;for(const H of E.renderTasks)H.operatorListChanged();c.lastChunk&&ce(this,i,Je).call(this,!0)}_pumpOperatorList({renderingIntent:c,cacheKey:E,annotationStorageMap:H}){const z=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:c,cacheKey:E,annotationStorage:H}).getReader(),J=this._intentStates.get(E);J.streamReader=z;const se=()=>{z.read().then(({value:ie,done:oe})=>{if(oe){J.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ie,J),se())},ie=>{if(J.streamReader=null,!this._transport.destroyed){if(J.operatorList){J.operatorList.lastChunk=!0;for(const oe of J.renderTasks)oe.operatorListChanged();ce(this,i,Je).call(this,!0)}if(J.displayReadyCapability)J.displayReadyCapability.reject(ie);else if(J.opListReadCapability)J.opListReadCapability.reject(ie);else throw ie}})};se()}_abortOperatorList({intentState:c,reason:E,force:H=!1}){if(c.streamReader){if(c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null),!H){if(c.renderTasks.size>0)return;if(E instanceof _display_utils.RenderingCancelledException){let f=RENDERING_CANCELLED_TIMEOUT;E.extraDelay>0&&E.extraDelay<1e3&&(f+=E.extraDelay),c.streamReaderCancelTimeout=setTimeout(()=>{c.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:c,reason:E,force:!0})},f);return}}if(c.streamReader.cancel(new _util.AbortException(E.message)).catch(()=>{}),c.streamReader=null,!this._transport.destroyed){for(const[f,z]of this._intentStates)if(z===c){this._intentStates.delete(f);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,n=new WeakMap,i=new WeakSet,Je=function(c=!1){if(ce(this,y,at).call(this),!k(this,n))return!1;if(c)return ge(this,s,setTimeout(()=>{ge(this,s,null),ce(this,i,Je).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:E,operatorList:H}of this._intentStates.values())if(E.size>0||!H.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ge(this,n,!1),!0},y=new WeakSet,at=function(){k(this,s)&&(clearTimeout(k(this,s)),ge(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){re(this,T,new Set);re(this,v,Promise.resolve())}postMessage(c,E){const H={data:structuredClone(c,E?{transfer:E}:null)};k(this,v).then(()=>{for(const f of k(this,T))f.call(this,H)})}addEventListener(c,E){k(this,T).add(E)}removeEventListener(c,E){k(this,T).delete(E)}terminate(){k(this,T).clear()}}T=new WeakMap,v=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const m=(_=document==null?void 0:document.currentScript)==null?void 0:_.src;m&&(PDFWorkerUtil.fallbackWorkerSrc=m.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(m,c){let E;try{if(E=new URL(m),!E.origin||E.origin==="null")return!1}catch{return!1}const H=new URL(c,E);return E.origin===H.origin},PDFWorkerUtil.createCDNWrapper=function(m){const c=`importScripts("${m}");`;return URL.createObjectURL(new Blob([c]))}}const _PDFWorker=class{constructor({name:m=null,port:c=null,verbosity:E=(0,_util.getVerbosityLevel)()}={}){if(c&&k(_PDFWorker,L).has(c))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=m,this.destroyed=!1,this.verbosity=E,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,c){k(_PDFWorker,L).set(c,this),this._initializeFromPort(c);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(m){this._port=m,this._messageHandler=new _message_handler.MessageHandler("main","worker",m),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:m}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,m)||(m=PDFWorkerUtil.createCDNWrapper(new URL(m,window.location).href));const c=new Worker(m),E=new _message_handler.MessageHandler("main","worker",c),H=()=>{c.removeEventListener("error",f),E.destroy(),c.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},f=()=>{this._webWorker||H()};c.addEventListener("error",f),E.on("test",J=>{if(c.removeEventListener("error",f),this.destroyed){H();return}J?(this._messageHandler=E,this._port=c,this._webWorker=c,this._readyCapability.resolve(),E.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),E.destroy(),c.terminate())}),E.on("ready",J=>{if(c.removeEventListener("error",f),this.destroyed){H();return}try{z()}catch{this._setupFakeWorker()}});const z=()=>{const J=new Uint8Array;E.send("test",J,[J.buffer])};z();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(m=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const c=new LoopbackPort;this._port=c;const E=`fake${PDFWorkerUtil.fakeWorkerId++}`,H=new _message_handler.MessageHandler(E+"_worker",E,c);m.setup(H,c);const f=new _message_handler.MessageHandler(E,E+"_worker",c);this._messageHandler=f,this._readyCapability.resolve(),f.send("configure",{verbosity:this.verbosity})}).catch(m=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${m.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),k(_PDFWorker,L).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(m){if(!(m!=null&&m.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return k(this,L).has(m.port)?k(this,L).get(m.port):new _PDFWorker(m)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var m;try{return((m=globalThis.pdfjsWorker)==null?void 0:m.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;L=new WeakMap,re(PDFWorker,L,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(c,E,H,f,z){re(this,A);re(this,O,new Map);re(this,M,new Map);re(this,w,new Map);this.messageHandler=c,this.loadingTask=E,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:f.ownerDocument,styleElement:f.styleElement}),this._params=f,this.canvasFactory=z.canvasFactory,this.filterFactory=z.filterFactory,this.cMapReaderFactory=z.cMapReaderFactory,this.standardFontDataFactory=z.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=H,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(c,E=_util.AnnotationMode.ENABLE,H=null,f=!1){let z=_util.RenderingIntentFlag.DISPLAY,J=null;switch(c){case"any":z=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":z=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${c}`)}switch(E){case _util.AnnotationMode.DISABLE:z+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:z+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:z+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,J=(z&_util.RenderingIntentFlag.PRINT&&H instanceof _annotation_storage.PrintAnnotationStorage?H:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${E}`)}return f&&(z+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:z,cacheKey:`${z}_${_annotation_storage.AnnotationStorage.getHash(J)}`,annotationStorageMap:J}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const c=[];for(const H of k(this,M).values())c.push(H._destroy());k(this,M).clear(),k(this,w).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const E=this.messageHandler.sendWithPromise("Terminate",null);return c.push(E),Promise.all(c).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),k(this,O).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:c,loadingTask:E}=this;c.on("GetReader",(H,f)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=z=>{this._lastProgress={loaded:z.loaded,total:z.total}},f.onPull=()=>{this._fullReader.read().then(function({value:z,done:J}){if(J){f.close();return}(0,_util.assert)(z instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(z),1,[z])}).catch(z=>{f.error(z)})},f.onCancel=z=>{this._fullReader.cancel(z),f.ready.catch(J=>{if(!this.destroyed)throw J})}}),c.on("ReaderHeadersReady",H=>{const f=new _util.PromiseCapability,z=this._fullReader;return z.headersReady.then(()=>{var J;(!z.isStreamingSupported||!z.isRangeSupported)&&(this._lastProgress&&((J=E.onProgress)==null||J.call(E,this._lastProgress)),z.onProgress=se=>{var ie;(ie=E.onProgress)==null||ie.call(E,{loaded:se.loaded,total:se.total})}),f.resolve({isStreamingSupported:z.isStreamingSupported,isRangeSupported:z.isRangeSupported,contentLength:z.contentLength})},f.reject),f.promise}),c.on("GetRangeReader",(H,f)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const z=this._networkStream.getRangeReader(H.begin,H.end);if(!z){f.close();return}f.onPull=()=>{z.read().then(function({value:J,done:se}){if(se){f.close();return}(0,_util.assert)(J instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),f.enqueue(new Uint8Array(J),1,[J])}).catch(J=>{f.error(J)})},f.onCancel=J=>{z.cancel(J),f.ready.catch(se=>{if(!this.destroyed)throw se})}}),c.on("GetDoc",({pdfInfo:H})=>{this._numPages=H.numPages,this._htmlForXfa=H.htmlForXfa,delete H.htmlForXfa,E._capability.resolve(new PDFDocumentProxy(H,this))}),c.on("DocException",function(H){let f;switch(H.name){case"PasswordException":f=new _util.PasswordException(H.message,H.code);break;case"InvalidPDFException":f=new _util.InvalidPDFException(H.message);break;case"MissingPDFException":f=new _util.MissingPDFException(H.message);break;case"UnexpectedResponseException":f=new _util.UnexpectedResponseException(H.message,H.status);break;case"UnknownErrorException":f=new _util.UnknownErrorException(H.message,H.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}E._capability.reject(f)}),c.on("PasswordRequest",H=>{if(this._passwordCapability=new _util.PromiseCapability,E.onPassword){const f=z=>{z instanceof Error?this._passwordCapability.reject(z):this._passwordCapability.resolve({password:z})};try{E.onPassword(f,H.code)}catch(z){this._passwordCapability.reject(z)}}else this._passwordCapability.reject(new _util.PasswordException(H.message,H.code));return this._passwordCapability.promise}),c.on("DataLoaded",H=>{var f;(f=E.onProgress)==null||f.call(E,{loaded:H.length,total:H.length}),this.downloadInfoCapability.resolve(H)}),c.on("StartRenderPage",H=>{if(this.destroyed)return;k(this,M).get(H.pageIndex)._startRenderPage(H.transparency,H.cacheKey)}),c.on("commonobj",([H,f,z])=>{var J;if(!this.destroyed&&!this.commonObjs.has(H))switch(f){case"Font":const se=this._params;if("error"in z){const he=z.error;(0,_util.warn)(`Error during font loading: ${he}`),this.commonObjs.resolve(H,he);break}const ie=se.pdfBug&&((J=globalThis.FontInspector)!=null&&J.enabled)?(he,ae)=>globalThis.FontInspector.fontAdded(he,ae):null,oe=new _font_loader.FontFaceObject(z,{isEvalSupported:se.isEvalSupported,disableFontFace:se.disableFontFace,ignoreErrors:se.ignoreErrors,inspectFont:ie});this.fontLoader.bind(oe).catch(he=>c.sendWithPromise("FontFallback",{id:H})).finally(()=>{!se.fontExtraProperties&&oe.data&&(oe.data=null),this.commonObjs.resolve(H,oe)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(H,z);break;default:throw new Error(`Got unknown common object type ${f}`)}}),c.on("obj",([H,f,z,J])=>{var ie;if(this.destroyed)return;const se=k(this,M).get(f);if(!se.objs.has(H))switch(z){case"Image":if(se.objs.resolve(H,J),J){let oe;if(J.bitmap){const{width:he,height:ae}=J;oe=he*ae*4}else oe=((ie=J.data)==null?void 0:ie.length)||0;oe>_util.MAX_IMAGE_SIZE_TO_CACHE&&(se._maybeCleanupAfterRender=!0)}break;case"Pattern":se.objs.resolve(H,J);break;default:throw new Error(`Got unknown object type ${z}`)}}),c.on("DocProgress",H=>{var f;this.destroyed||(f=E.onProgress)==null||f.call(E,{loaded:H.loaded,total:H.total})}),c.on("FetchBuiltInCMap",H=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(H):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),c.on("FetchStandardFontData",H=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(H):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var c;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((c=this._fullReader)==null?void 0:c.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(c){if(!Number.isInteger(c)||c<=0||c>this._numPages)return Promise.reject(new Error("Invalid page request."));const E=c-1,H=k(this,w).get(E);if(H)return H;const f=this.messageHandler.sendWithPromise("GetPage",{pageIndex:E}).then(z=>{if(this.destroyed)throw new Error("Transport destroyed");const J=new PDFPageProxy(E,z,this,this._params.pdfBug);return k(this,M).set(E,J),J});return k(this,w).set(E,f),f}getPageIndex(c){return typeof c!="object"||c===null||!Number.isInteger(c.num)||c.num<0||!Number.isInteger(c.gen)||c.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:c.num,gen:c.gen})}getAnnotations(c,E){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c,intent:E})}getFieldObjects(){return ce(this,A,ft).call(this,"GetFieldObjects")}hasJSActions(){return ce(this,A,ft).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(c){return typeof c!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:c})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(c){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c})}getStructTree(c){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(c=>new _optional_content_config.OptionalContentConfig(c))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const c="GetMetadata",E=k(this,O).get(c);if(E)return E;const H=this.messageHandler.sendWithPromise(c,null).then(f=>{var z,J;return{info:f[0],metadata:f[1]?new _metadata.Metadata(f[1]):null,contentDispositionFilename:((z=this._fullReader)==null?void 0:z.filename)??null,contentLength:((J=this._fullReader)==null?void 0:J.contentLength)??null}});return k(this,O).set(c,H),H}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(c=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const E of k(this,M).values())if(!E.cleanup())throw new Error(`startCleanup: Page ${E.pageNumber} is currently rendering.`);this.commonObjs.clear(),c||this.fontLoader.clear(),k(this,O).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:c,enableXfa:E}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:c,enableXfa:E})}}O=new WeakMap,M=new WeakMap,w=new WeakMap,A=new WeakSet,ft=function(c,E=null){const H=k(this,O).get(c);if(H)return H;const f=this.messageHandler.sendWithPromise(c,E);return k(this,O).set(c,f),f};class PDFObjects{constructor(){re(this,I);re(this,R,Object.create(null))}get(c,E=null){if(E){const f=ce(this,I,pt).call(this,c);return f.capability.promise.then(()=>E(f.data)),null}const H=k(this,R)[c];if(!(H!=null&&H.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${c}.`);return H.data}has(c){const E=k(this,R)[c];return(E==null?void 0:E.capability.settled)||!1}resolve(c,E=null){const H=ce(this,I,pt).call(this,c);H.data=E,H.capability.resolve()}clear(){var c;for(const E in k(this,R)){const{data:H}=k(this,R)[E];(c=H==null?void 0:H.bitmap)==null||c.close()}ge(this,R,Object.create(null))}}R=new WeakMap,I=new WeakSet,pt=function(c){const E=k(this,R)[c];return E||(k(this,R)[c]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(c){re(this,S,null);ge(this,S,c),this.onContinue=null}get promise(){return k(this,S).capability.promise}cancel(c=0){k(this,S).cancel(null,c)}get separateAnnots(){const{separateAnnots:c}=k(this,S).operatorList;if(!c)return!1;const{annotationCanvasMap:E}=k(this,S);return c.form||c.canvas&&(E==null?void 0:E.size)>0}}S=new WeakMap,exports.RenderTask=RenderTask;const g=class{constructor({callback:c,params:E,objs:H,commonObjs:f,annotationCanvasMap:z,operatorList:J,pageIndex:se,canvasFactory:ie,filterFactory:oe,useRequestAnimationFrame:he=!1,pdfBug:ae=!1,pageColors:pe=null}){this.callback=c,this.params=E,this.objs=H,this.commonObjs=f,this.annotationCanvasMap=z,this.operatorListIdx=null,this.operatorList=J,this._pageIndex=se,this.canvasFactory=ie,this.filterFactory=oe,this._pdfBug=ae,this.pageColors=pe,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=he===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=E.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:c=!1,optionalContentConfig:E}){var se,ie;if(this.cancelled)return;if(this._canvas){if(k(g,o).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");k(g,o).add(this._canvas)}this._pdfBug&&((se=globalThis.StepperManager)!=null&&se.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:H,viewport:f,transform:z,background:J}=this.params;this.gfx=new _canvas.CanvasGraphics(H,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:E},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:z,viewport:f,transparency:c,background:J}),this.operatorListIdx=0,this.graphicsReady=!0,(ie=this.graphicsReadyCallback)==null||ie.call(this)}cancel(c=null,E=0){var H;this.running=!1,this.cancelled=!0,(H=this.gfx)==null||H.endDrawing(),this._canvas&&k(g,o).delete(this._canvas),this.callback(c||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",E))}operatorListChanged(){var c;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(c=this.stepper)==null||c.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&k(g,o).delete(this._canvas),this.callback())))}};let InternalRenderTask=g;o=new WeakMap,re(InternalRenderTask,o,new WeakSet);const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(e,t,s)=>{var T,v,_,Dt,O;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=s(1),i=s(4),l=s(8);class y{constructor(){re(this,_);re(this,T,!1);re(this,v,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(w,A){const u=k(this,v).get(w);return u===void 0?A:Object.assign(A,u)}getRawValue(w){return k(this,v).get(w)}remove(w){if(k(this,v).delete(w),k(this,v).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const A of k(this,v).values())if(A instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(w,A){const u=k(this,v).get(w);let R=!1;if(u!==void 0)for(const[I,N]of Object.entries(A))u[I]!==N&&(R=!0,u[I]=N);else R=!0,k(this,v).set(w,A);R&&ce(this,_,Dt).call(this),A instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(A.constructor._type)}has(w){return k(this,v).has(w)}getAll(){return k(this,v).size>0?(0,n.objectFromMap)(k(this,v)):null}setAll(w){for(const[A,u]of Object.entries(w))this.setValue(A,u)}get size(){return k(this,v).size}resetModified(){k(this,T)&&(ge(this,T,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new D(this)}get serializable(){if(k(this,v).size===0)return null;const w=new Map;for(const[A,u]of k(this,v)){const R=u instanceof i.AnnotationEditor?u.serialize():u;R&&w.set(A,R)}return w}static getHash(w){if(!w)return"";const A=new l.MurmurHash3_64;for(const[u,R]of w)A.update(`${u}:${JSON.stringify(R)}`);return A.hexdigest()}}T=new WeakMap,v=new WeakMap,_=new WeakSet,Dt=function(){k(this,T)||(ge(this,T,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=y;class D extends y{constructor(A){super();re(this,O,null);ge(this,O,structuredClone(A.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return k(this,O)}}O=new WeakMap,t.PrintAnnotationStorage=D},(e,t,s)=>{var y,D,T,v,_,L;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=s(5),i=s(1);const O=class{constructor(w){re(this,y,this.focusin.bind(this));re(this,D,this.focusout.bind(this));re(this,T,!1);re(this,v,!1);re(this,_,!1);De(this,"_uiManager",null);re(this,L,O._zIndex++);this.constructor===O&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=w.parent,this.id=w.id,this.width=this.height=null,this.pageIndex=w.parent.pageIndex,this.name=w.name,this.div=null,this._uiManager=w.uiManager;const{rotation:A,rawDims:{pageWidth:u,pageHeight:R,pageX:I,pageY:N}}=this.parent.viewport;this.rotation=A,this.pageRotation=(360+A-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[u,R],this.pageTranslation=[I,N];const[S,o]=this.parentDimensions;this.x=w.x/S,this.y=w.y/o,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(w){this._uiManager.addCommands(w)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=k(this,L)}setParent(w){w!==null&&(this.pageIndex=w.pageIndex,this.pageDimensions=w.pageDimensions),this.parent=w}focusin(w){k(this,T)?ge(this,T,!1):this.parent.setSelected(this)}focusout(w){var u;if(!this.isAttachedToDOM)return;const A=w.relatedTarget;A!=null&&A.closest(`#${this.id}`)||(w.preventDefault(),(u=this.parent)!=null&&u.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(w){const A=this.parent.div.getBoundingClientRect();this.startX=w.clientX-A.x,this.startY=w.clientY-A.y,w.dataTransfer.setData("text/plain",this.id),w.dataTransfer.effectAllowed="move"}setAt(w,A,u,R){const[I,N]=this.parentDimensions;[u,R]=this.screenToPageTranslation(u,R),this.x=(w+u)/I,this.y=(A+R)/N,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(w,A){const[u,R]=this.parentDimensions;[w,A]=this.screenToPageTranslation(w,A),this.x+=w/u,this.y+=A/R,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(w,A){switch(this.parentRotation){case 90:return[A,-w];case 180:return[-w,-A];case 270:return[-A,w];default:return[w,A]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:w}=this._uiManager.viewParameters,[A,u]=this.pageDimensions;return[A*w,u*w]}setDims(w,A){const[u,R]=this.parentDimensions;this.div.style.width=`${100*w/u}%`,this.div.style.height=`${100*A/R}%`}fixDims(){const{style:w}=this.div,{height:A,width:u}=w,R=u.endsWith("%"),I=A.endsWith("%");if(R&&I)return;const[N,S]=this.parentDimensions;R||(w.width=`${100*parseFloat(u)/N}%`),I||(w.height=`${100*parseFloat(A)/S}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",k(this,y)),this.div.addEventListener("focusout",k(this,D));const[w,A]=this.getInitialTranslation();return this.translate(w,A),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(w){const{isMac:A}=i.FeatureTest.platform;if(w.button!==0||w.ctrlKey&&A){w.preventDefault();return}w.ctrlKey&&!A||w.shiftKey||w.metaKey&&A?this.parent.toggleSelected(this):this.parent.setSelected(this),ge(this,T,!0)}getRect(w,A){const u=this.parentScale,[R,I]=this.pageDimensions,[N,S]=this.pageTranslation,o=w/u,g=A/u,m=this.x*R,c=this.y*I,E=this.width*R,H=this.height*I;switch(this.rotation){case 0:return[m+o+N,I-c-g-H+S,m+o+E+N,I-c-g+S];case 90:return[m+g+N,I-c+o+S,m+g+H+N,I-c+o+E+S];case 180:return[m-o-E+N,I-c+g+S,m-o+N,I-c+g+H+S];case 270:return[m-g-H+N,I-c-o-E+S,m-g+N,I-c-o+S];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(w,A){const[u,R,I,N]=w,S=I-u,o=N-R;switch(this.rotation){case 0:return[u,A-N,S,o];case 90:return[u,A-R,o,S];case 180:return[I,A-R,S,o];case 270:return[I,A-N,o,S];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ge(this,_,!0)}disableEditMode(){ge(this,_,!1)}isInEditMode(){return k(this,_)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var w;(w=this.div)==null||w.addEventListener("focusin",k(this,y))}serialize(){(0,i.unreachable)("An editor must be serializable")}static deserialize(w,A,u){const R=new this.prototype.constructor({parent:A,id:A.getNextId(),uiManager:u});R.rotation=w.rotation;const[I,N]=R.pageDimensions,[S,o,g,m]=R.getRectInCurrentCoords(w.rect,N);return R.x=S/I,R.y=o/N,R.width=g/I,R.height=m/N,R}remove(){this.div.removeEventListener("focusin",k(this,y)),this.div.removeEventListener("focusout",k(this,D)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var w;(w=this.div)==null||w.classList.add("selectedEditor")}unselect(){var w;(w=this.div)==null||w.classList.remove("selectedEditor")}updateParams(w,A){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return k(this,v)}set isEditing(w){ge(this,v,w),w?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let l=O;y=new WeakMap,D=new WeakMap,T=new WeakMap,v=new WeakMap,_=new WeakMap,L=new WeakMap,De(l,"_colorManager",new n.ColorManager),De(l,"_zIndex",1),t.AnnotationEditor=l},(e,t,s)=>{var O,M,w,A,u,R,Lt,S,o,g,m,c,E,H,f,z,J,se,ie,oe,he,ae,pe,Ae,ve,Ce,Se,K,C,P,j,Nt,V,gt,q,jt,b,Bt,a,We,x,tt,U,Ut,W,Ht,ee,mt,ne,nt,de,_t;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=l,t.opacityToHex=y;var n=s(1),i=s(6);function l(we,te,ye){for(const Ee of ye)te.addEventListener(Ee,we[Ee].bind(we))}function y(we){return Math.round(Math.min(255,Math.max(1,255*we))).toString(16).padStart(2,"0")}class D{constructor(){re(this,O,0)}getId(){return`${n.AnnotationEditorPrefix}${rt(this,O)._++}`}}O=new WeakMap;class T{constructor(te=128){re(this,M,[]);re(this,w,!1);re(this,A,void 0);re(this,u,-1);ge(this,A,te)}add({cmd:te,undo:ye,mustExec:Ee,type:Oe=NaN,overwriteIfSameType:ue=!1,keepUndo:B=!1}){if(Ee&&te(),k(this,w))return;const $={cmd:te,undo:ye,type:Oe};if(k(this,u)===-1){k(this,M).length>0&&(k(this,M).length=0),ge(this,u,0),k(this,M).push($);return}if(ue&&k(this,M)[k(this,u)].type===Oe){B&&($.undo=k(this,M)[k(this,u)].undo),k(this,M)[k(this,u)]=$;return}const fe=k(this,u)+1;fe===k(this,A)?k(this,M).splice(0,1):(ge(this,u,fe),fe<k(this,M).length&&k(this,M).splice(fe)),k(this,M).push($)}undo(){k(this,u)!==-1&&(ge(this,w,!0),k(this,M)[k(this,u)].undo(),ge(this,w,!1),ge(this,u,k(this,u)-1))}redo(){k(this,u)<k(this,M).length-1&&(ge(this,u,k(this,u)+1),ge(this,w,!0),k(this,M)[k(this,u)].cmd(),ge(this,w,!1))}hasSomethingToUndo(){return k(this,u)!==-1}hasSomethingToRedo(){return k(this,u)<k(this,M).length-1}destroy(){ge(this,M,null)}}M=new WeakMap,w=new WeakMap,A=new WeakMap,u=new WeakMap,t.CommandManager=T;class v{constructor(te){re(this,R);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:ye}=n.FeatureTest.platform;for(const[Ee,Oe]of te)for(const ue of Ee){const B=ue.startsWith("mac+");ye&&B?(this.callbacks.set(ue.slice(4),Oe),this.allKeys.add(ue.split("+").at(-1))):!ye&&!B&&(this.callbacks.set(ue,Oe),this.allKeys.add(ue.split("+").at(-1)))}}exec(te,ye){if(!this.allKeys.has(ye.key))return;const Ee=this.callbacks.get(ce(this,R,Lt).call(this,ye));Ee&&(Ee.bind(te)(),ye.stopPropagation(),ye.preventDefault())}}R=new WeakSet,Lt=function(te){te.altKey&&this.buffer.push("alt"),te.ctrlKey&&this.buffer.push("ctrl"),te.metaKey&&this.buffer.push("meta"),te.shiftKey&&this.buffer.push("shift"),this.buffer.push(te.key);const ye=this.buffer.join("+");return this.buffer.length=0,ye},t.KeyboardManager=v;const N=class{get _colors(){const te=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(te),(0,n.shadow)(this,"_colors",te)}convert(te){const ye=(0,i.getRGB)(te);if(!window.matchMedia("(forced-colors: active)").matches)return ye;for(const[Ee,Oe]of this._colors)if(Oe.every((ue,B)=>ue===ye[B]))return N._colorsMapping.get(Ee);return ye}getHexCode(te){const ye=this._colors.get(te);return ye?n.Util.makeHexColor(...ye):te}};let _=N;De(_,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=_;const me=class{constructor(te,ye,Ee){re(this,j);re(this,V);re(this,q);re(this,b);re(this,a);re(this,x);re(this,U);re(this,W);re(this,ee);re(this,ne);re(this,de);re(this,S,null);re(this,o,new Map);re(this,g,new Map);re(this,m,null);re(this,c,new T);re(this,E,0);re(this,H,null);re(this,f,new Set);re(this,z,null);re(this,J,new D);re(this,se,!1);re(this,ie,n.AnnotationEditorType.NONE);re(this,oe,new Set);re(this,he,this.copy.bind(this));re(this,ae,this.cut.bind(this));re(this,pe,this.paste.bind(this));re(this,Ae,this.keydown.bind(this));re(this,ve,this.onEditingAction.bind(this));re(this,Ce,this.onPageChanging.bind(this));re(this,Se,this.onScaleChanging.bind(this));re(this,K,this.onRotationChanging.bind(this));re(this,C,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});re(this,P,null);ge(this,P,te),ge(this,z,ye),k(this,z)._on("editingaction",k(this,ve)),k(this,z)._on("pagechanging",k(this,Ce)),k(this,z)._on("scalechanging",k(this,Se)),k(this,z)._on("rotationchanging",k(this,K)),ge(this,m,Ee),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){ce(this,V,gt).call(this),k(this,z)._off("editingaction",k(this,ve)),k(this,z)._off("pagechanging",k(this,Ce)),k(this,z)._off("scalechanging",k(this,Se)),k(this,z)._off("rotationchanging",k(this,K));for(const te of k(this,g).values())te.destroy();k(this,g).clear(),k(this,o).clear(),k(this,f).clear(),ge(this,S,null),k(this,oe).clear(),k(this,c).destroy()}onPageChanging({pageNumber:te}){ge(this,E,te-1)}focusMainContainer(){k(this,P).focus()}addShouldRescale(te){k(this,f).add(te)}removeShouldRescale(te){k(this,f).delete(te)}onScaleChanging({scale:te}){this.commitOrRemove(),this.viewParameters.realScale=te*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const ye of k(this,f))ye.onScaleChanging()}onRotationChanging({pagesRotation:te}){this.commitOrRemove(),this.viewParameters.rotation=te}addToAnnotationStorage(te){!te.isEmpty()&&k(this,m)&&!k(this,m).has(te.id)&&k(this,m).setValue(te.id,te)}copy(te){if(te.preventDefault(),k(this,S)&&k(this,S).commitOrRemove(),!this.hasSelection)return;const ye=[];for(const Ee of k(this,oe))Ee.isEmpty()||ye.push(Ee.serialize());ye.length!==0&&te.clipboardData.setData("application/pdfjs",JSON.stringify(ye))}cut(te){this.copy(te),this.delete()}paste(te){te.preventDefault();let ye=te.clipboardData.getData("application/pdfjs");if(!ye)return;try{ye=JSON.parse(ye)}catch(Oe){(0,n.warn)(`paste: "${Oe.message}".`);return}if(!Array.isArray(ye))return;this.unselectAll();const Ee=k(this,g).get(k(this,E));try{const Oe=[];for(const $ of ye){const fe=Ee.deserialize($);if(!fe)return;Oe.push(fe)}const ue=()=>{for(const $ of Oe)ce(this,ee,mt).call(this,$);ce(this,de,_t).call(this,Oe)},B=()=>{for(const $ of Oe)$.remove()};this.addCommands({cmd:ue,undo:B,mustExec:!0})}catch(Oe){(0,n.warn)(`paste: "${Oe.message}".`)}}keydown(te){var ye;(ye=this.getActive())!=null&&ye.shouldGetKeyboardEvents()||me._keyboardManager.exec(this,te)}onEditingAction(te){["undo","redo","delete","selectAll"].includes(te.name)&&this[te.name]()}setEditingState(te){te?(ce(this,j,Nt).call(this),ce(this,q,jt).call(this),ce(this,a,We).call(this,{isEditing:k(this,ie)!==n.AnnotationEditorType.NONE,isEmpty:ce(this,ne,nt).call(this),hasSomethingToUndo:k(this,c).hasSomethingToUndo(),hasSomethingToRedo:k(this,c).hasSomethingToRedo(),hasSelectedEditor:!1})):(ce(this,V,gt).call(this),ce(this,b,Bt).call(this),ce(this,a,We).call(this,{isEditing:!1}))}registerEditorTypes(te){if(!k(this,H)){ge(this,H,te);for(const ye of k(this,H))ce(this,x,tt).call(this,ye.defaultPropertiesToUpdate)}}getId(){return k(this,J).getId()}get currentLayer(){return k(this,g).get(k(this,E))}get currentPageIndex(){return k(this,E)}addLayer(te){k(this,g).set(te.pageIndex,te),k(this,se)?te.enable():te.disable()}removeLayer(te){k(this,g).delete(te.pageIndex)}updateMode(te){if(ge(this,ie,te),te===n.AnnotationEditorType.NONE)this.setEditingState(!1),ce(this,W,Ht).call(this);else{this.setEditingState(!0),ce(this,U,Ut).call(this);for(const ye of k(this,g).values())ye.updateMode(te)}}updateToolbar(te){te!==k(this,ie)&&k(this,z).dispatch("switchannotationeditormode",{source:this,mode:te})}updateParams(te,ye){if(k(this,H)){for(const Ee of k(this,oe))Ee.updateParams(te,ye);for(const Ee of k(this,H))Ee.updateDefaultParams(te,ye)}}getEditors(te){const ye=[];for(const Ee of k(this,o).values())Ee.pageIndex===te&&ye.push(Ee);return ye}getEditor(te){return k(this,o).get(te)}addEditor(te){k(this,o).set(te.id,te)}removeEditor(te){var ye;k(this,o).delete(te.id),this.unselect(te),(ye=k(this,m))==null||ye.remove(te.id)}setActiveEditor(te){k(this,S)!==te&&(ge(this,S,te),te&&ce(this,x,tt).call(this,te.propertiesToUpdate))}toggleSelected(te){if(k(this,oe).has(te)){k(this,oe).delete(te),te.unselect(),ce(this,a,We).call(this,{hasSelectedEditor:this.hasSelection});return}k(this,oe).add(te),te.select(),ce(this,x,tt).call(this,te.propertiesToUpdate),ce(this,a,We).call(this,{hasSelectedEditor:!0})}setSelected(te){for(const ye of k(this,oe))ye!==te&&ye.unselect();k(this,oe).clear(),k(this,oe).add(te),te.select(),ce(this,x,tt).call(this,te.propertiesToUpdate),ce(this,a,We).call(this,{hasSelectedEditor:!0})}isSelected(te){return k(this,oe).has(te)}unselect(te){te.unselect(),k(this,oe).delete(te),ce(this,a,We).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return k(this,oe).size!==0}undo(){k(this,c).undo(),ce(this,a,We).call(this,{hasSomethingToUndo:k(this,c).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ce(this,ne,nt).call(this)})}redo(){k(this,c).redo(),ce(this,a,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:k(this,c).hasSomethingToRedo(),isEmpty:ce(this,ne,nt).call(this)})}addCommands(te){k(this,c).add(te),ce(this,a,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ce(this,ne,nt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const te=[...k(this,oe)],ye=()=>{for(const Oe of te)Oe.remove()},Ee=()=>{for(const Oe of te)ce(this,ee,mt).call(this,Oe)};this.addCommands({cmd:ye,undo:Ee,mustExec:!0})}commitOrRemove(){var te;(te=k(this,S))==null||te.commitOrRemove()}selectAll(){for(const te of k(this,oe))te.commit();ce(this,de,_t).call(this,k(this,o).values())}unselectAll(){if(k(this,S)){k(this,S).commitOrRemove();return}if(k(this,oe).size!==0){for(const te of k(this,oe))te.unselect();k(this,oe).clear(),ce(this,a,We).call(this,{hasSelectedEditor:!1})}}isActive(te){return k(this,S)===te}getActive(){return k(this,S)}getMode(){return k(this,ie)}};let L=me;S=new WeakMap,o=new WeakMap,g=new WeakMap,m=new WeakMap,c=new WeakMap,E=new WeakMap,H=new WeakMap,f=new WeakMap,z=new WeakMap,J=new WeakMap,se=new WeakMap,ie=new WeakMap,oe=new WeakMap,he=new WeakMap,ae=new WeakMap,pe=new WeakMap,Ae=new WeakMap,ve=new WeakMap,Ce=new WeakMap,Se=new WeakMap,K=new WeakMap,C=new WeakMap,P=new WeakMap,j=new WeakSet,Nt=function(){k(this,P).addEventListener("keydown",k(this,Ae))},V=new WeakSet,gt=function(){k(this,P).removeEventListener("keydown",k(this,Ae))},q=new WeakSet,jt=function(){document.addEventListener("copy",k(this,he)),document.addEventListener("cut",k(this,ae)),document.addEventListener("paste",k(this,pe))},b=new WeakSet,Bt=function(){document.removeEventListener("copy",k(this,he)),document.removeEventListener("cut",k(this,ae)),document.removeEventListener("paste",k(this,pe))},a=new WeakSet,We=function(te){Object.entries(te).some(([Ee,Oe])=>k(this,C)[Ee]!==Oe)&&k(this,z).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(k(this,C),te)})},x=new WeakSet,tt=function(te){k(this,z).dispatch("annotationeditorparamschanged",{source:this,details:te})},U=new WeakSet,Ut=function(){if(!k(this,se)){ge(this,se,!0);for(const te of k(this,g).values())te.enable()}},W=new WeakSet,Ht=function(){if(this.unselectAll(),k(this,se)){ge(this,se,!1);for(const te of k(this,g).values())te.disable()}},ee=new WeakSet,mt=function(te){const ye=k(this,g).get(te.pageIndex);ye?ye.addOrRebuild(te):this.addEditor(te)},ne=new WeakSet,nt=function(){if(k(this,o).size===0)return!0;if(k(this,o).size===1)for(const te of k(this,o).values())return te.isEmpty();return!1},de=new WeakSet,_t=function(te){k(this,oe).clear();for(const ye of te)ye.isEmpty()||(k(this,oe).add(ye),ye.select());ce(this,a,We).call(this,{hasSelectedEditor:!0})},De(L,"_keyboardManager",new v([[["ctrl+a","mac+meta+a"],me.prototype.selectAll],[["ctrl+z","mac+meta+z"],me.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],me.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],me.prototype.delete],[["Escape","mac+Escape"],me.prototype.unselectAll]])),t.AnnotationEditorUIManager=L},(e,t,s)=>{var he,ae,pe,Ae,ve,Ce,Se,K,C,Qe,j,Ke,V,ze;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=m,t.getColorValues=z,t.getCurrentTransform=J,t.getCurrentTransformInverse=se,t.getFilenameFromUrl=I,t.getPdfFilenameFromUrl=N,t.getRGB=f,t.getXfaPageViewport=H,t.isDataScheme=u,t.isPdfFile=R,t.isValidFetchUrl=o,t.loadScript=g,t.setLayerDimensions=ie;var n=s(7),i=s(1);const l="http://www.w3.org/2000/svg",y="pdfjs_internal_id_";t.AnnotationPrefix=y;const oe=class{};let D=oe;De(D,"CSS",96),De(D,"PDF",72),De(D,"PDF_TO_CSS_UNITS",oe.CSS/oe.PDF),t.PixelsPerInch=D;class T extends n.BaseFilterFactory{constructor({docId:b,ownerDocument:r=globalThis.document}={}){super();re(this,C);re(this,j);re(this,V);re(this,he,void 0);re(this,ae,void 0);re(this,pe,void 0);re(this,Ae,void 0);re(this,ve,void 0);re(this,Ce,void 0);re(this,Se,void 0);re(this,K,0);ge(this,pe,b),ge(this,Ae,r)}addFilter(b){if(!b)return"none";let r=k(this,C,Qe).get(b);if(r)return r;let a,h,x,F;if(b.length===1){const ee=b[0],Q=new Array(256);for(let ne=0;ne<256;ne++)Q[ne]=ee[ne]/255;F=a=h=x=Q.join(",")}else{const[ee,Q,ne]=b,le=new Array(256),de=new Array(256),be=new Array(256);for(let me=0;me<256;me++)le[me]=ee[me]/255,de[me]=Q[me]/255,be[me]=ne[me]/255;a=le.join(","),h=de.join(","),x=be.join(","),F=`${a}${h}${x}`}if(r=k(this,C,Qe).get(F),r)return k(this,C,Qe).set(b,r),r;const U=`g_${k(this,pe)}_transfer_map_${rt(this,K)._++}`,X=`url(#${U})`;k(this,C,Qe).set(b,X),k(this,C,Qe).set(F,X);const W=k(this,Ae).createElementNS(l,"filter",l);W.setAttribute("id",U),W.setAttribute("color-interpolation-filters","sRGB");const Z=k(this,Ae).createElementNS(l,"feComponentTransfer");return W.append(Z),ce(this,V,ze).call(this,Z,"feFuncR",a),ce(this,V,ze).call(this,Z,"feFuncG",h),ce(this,V,ze).call(this,Z,"feFuncB",x),k(this,j,Ke).append(W),X}addHCMFilter(b,r){var ne;const a=`${b}-${r}`;if(k(this,Ce)===a)return k(this,Se);if(ge(this,Ce,a),ge(this,Se,"none"),(ne=k(this,ve))==null||ne.remove(),!b||!r)return k(this,Se);k(this,j,Ke).style.color=b,b=getComputedStyle(k(this,j,Ke)).getPropertyValue("color");const h=f(b);b=i.Util.makeHexColor(...h),k(this,j,Ke).style.color=r,r=getComputedStyle(k(this,j,Ke)).getPropertyValue("color");const x=f(r);if(r=i.Util.makeHexColor(...x),k(this,j,Ke).style.color="",b==="#000000"&&r==="#ffffff"||b===r)return k(this,Se);const F=new Array(256);for(let le=0;le<=255;le++){const de=le/255;F[le]=de<=.03928?de/12.92:((de+.055)/1.055)**2.4}const U=F.join(","),X=`g_${k(this,pe)}_hcm_filter`,W=ge(this,ve,k(this,Ae).createElementNS(l,"filter",l));W.setAttribute("id",X),W.setAttribute("color-interpolation-filters","sRGB");let Z=k(this,Ae).createElementNS(l,"feComponentTransfer");W.append(Z),ce(this,V,ze).call(this,Z,"feFuncR",U),ce(this,V,ze).call(this,Z,"feFuncG",U),ce(this,V,ze).call(this,Z,"feFuncB",U);const ee=k(this,Ae).createElementNS(l,"feColorMatrix");ee.setAttribute("type","matrix"),ee.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),W.append(ee),Z=k(this,Ae).createElementNS(l,"feComponentTransfer"),W.append(Z);const Q=(le,de)=>{const be=h[le]/255,me=x[le]/255,we=new Array(de+1);for(let te=0;te<=de;te++)we[te]=be+te/de*(me-be);return we.join(",")};return ce(this,V,ze).call(this,Z,"feFuncR",Q(0,5)),ce(this,V,ze).call(this,Z,"feFuncG",Q(1,5)),ce(this,V,ze).call(this,Z,"feFuncB",Q(2,5)),k(this,j,Ke).append(W),ge(this,Se,`url(#${X})`),k(this,Se)}destroy(b=!1){b&&k(this,Se)||(k(this,ae)&&(k(this,ae).parentNode.parentNode.remove(),ge(this,ae,null)),k(this,he)&&(k(this,he).clear(),ge(this,he,null)),ge(this,K,0))}}he=new WeakMap,ae=new WeakMap,pe=new WeakMap,Ae=new WeakMap,ve=new WeakMap,Ce=new WeakMap,Se=new WeakMap,K=new WeakMap,C=new WeakSet,Qe=function(){return k(this,he)||ge(this,he,new Map)},j=new WeakSet,Ke=function(){if(!k(this,ae)){const b=k(this,Ae).createElement("div"),{style:r}=b;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const a=k(this,Ae).createElementNS(l,"svg");a.setAttribute("width",0),a.setAttribute("height",0),ge(this,ae,k(this,Ae).createElementNS(l,"defs")),b.append(a),a.append(k(this,ae)),k(this,Ae).body.append(b)}return k(this,ae)},V=new WeakSet,ze=function(b,r,a){const h=k(this,Ae).createElementNS(l,r);h.setAttribute("type","discrete"),h.setAttribute("tableValues",a),b.append(h)},t.DOMFilterFactory=T;class v extends n.BaseCanvasFactory{constructor({ownerDocument:d=globalThis.document}={}){super(),this._document=d}_createCanvas(d,b){const r=this._document.createElement("canvas");return r.width=d,r.height=b,r}}t.DOMCanvasFactory=v;async function _(q,d=!1){if(o(q,document.baseURI)){const b=await fetch(q);if(!b.ok)throw new Error(b.statusText);return d?new Uint8Array(await b.arrayBuffer()):(0,i.stringToBytes)(await b.text())}return new Promise((b,r)=>{const a=new XMLHttpRequest;a.open("GET",q,!0),d&&(a.responseType="arraybuffer"),a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){let h;if(d&&a.response?h=new Uint8Array(a.response):!d&&a.responseText&&(h=(0,i.stringToBytes)(a.responseText)),h){b(h);return}}r(new Error(a.statusText))}},a.send(null)})}class L extends n.BaseCMapReaderFactory{_fetchData(d,b){return _(d,this.isCompressed).then(r=>({cMapData:r,compressionType:b}))}}t.DOMCMapReaderFactory=L;class O extends n.BaseStandardFontDataFactory{_fetchData(d){return _(d,!0)}}t.DOMStandardFontDataFactory=O;class M extends n.BaseSVGFactory{_createSVG(d){return document.createElementNS(l,d)}}t.DOMSVGFactory=M;class w{constructor({viewBox:d,scale:b,rotation:r,offsetX:a=0,offsetY:h=0,dontFlip:x=!1}){this.viewBox=d,this.scale=b,this.rotation=r,this.offsetX=a,this.offsetY=h;const F=(d[2]+d[0])/2,U=(d[3]+d[1])/2;let X,W,Z,ee;switch(r%=360,r<0&&(r+=360),r){case 180:X=-1,W=0,Z=0,ee=1;break;case 90:X=0,W=1,Z=1,ee=0;break;case 270:X=0,W=-1,Z=-1,ee=0;break;case 0:X=1,W=0,Z=0,ee=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}x&&(Z=-Z,ee=-ee);let Q,ne,le,de;X===0?(Q=Math.abs(U-d[1])*b+a,ne=Math.abs(F-d[0])*b+h,le=(d[3]-d[1])*b,de=(d[2]-d[0])*b):(Q=Math.abs(F-d[0])*b+a,ne=Math.abs(U-d[1])*b+h,le=(d[2]-d[0])*b,de=(d[3]-d[1])*b),this.transform=[X*b,W*b,Z*b,ee*b,Q-X*b*F-Z*b*U,ne-W*b*F-ee*b*U],this.width=le,this.height=de}get rawDims(){const{viewBox:d}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:d[2]-d[0],pageHeight:d[3]-d[1],pageX:d[0],pageY:d[1]})}clone({scale:d=this.scale,rotation:b=this.rotation,offsetX:r=this.offsetX,offsetY:a=this.offsetY,dontFlip:h=!1}={}){return new w({viewBox:this.viewBox.slice(),scale:d,rotation:b,offsetX:r,offsetY:a,dontFlip:h})}convertToViewportPoint(d,b){return i.Util.applyTransform([d,b],this.transform)}convertToViewportRectangle(d){const b=i.Util.applyTransform([d[0],d[1]],this.transform),r=i.Util.applyTransform([d[2],d[3]],this.transform);return[b[0],b[1],r[0],r[1]]}convertToPdfPoint(d,b){return i.Util.applyInverseTransform([d,b],this.transform)}}t.PageViewport=w;class A extends i.BaseException{constructor(d,b,r=0){super(d,"RenderingCancelledException"),this.type=b,this.extraDelay=r}}t.RenderingCancelledException=A;function u(q){const d=q.length;let b=0;for(;b<d&&q[b].trim()==="";)b++;return q.substring(b,b+5).toLowerCase()==="data:"}function R(q){return typeof q=="string"&&/\.pdf$/i.test(q)}function I(q,d=!1){return d||([q]=q.split(/[#?]/,1)),q.substring(q.lastIndexOf("/")+1)}function N(q,d="document.pdf"){if(typeof q!="string")return d;if(u(q))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),d;const b=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=b.exec(q);let h=r.exec(a[1])||r.exec(a[2])||r.exec(a[3]);if(h&&(h=h[0],h.includes("%")))try{h=r.exec(decodeURIComponent(h))[0]}catch{}return h||d}class S{constructor(){De(this,"started",Object.create(null));De(this,"times",[])}time(d){d in this.started&&(0,i.warn)(`Timer is already running for ${d}`),this.started[d]=Date.now()}timeEnd(d){d in this.started||(0,i.warn)(`Timer has not been started for ${d}`),this.times.push({name:d,start:this.started[d],end:Date.now()}),delete this.started[d]}toString(){const d=[];let b=0;for(const{name:r}of this.times)b=Math.max(r.length,b);for(const{name:r,start:a,end:h}of this.times)d.push(`${r.padEnd(b)} ${h-a}ms
`);return d.join("")}}t.StatTimer=S;function o(q,d){try{const{protocol:b}=d?new URL(q,d):new URL(q);return b==="http:"||b==="https:"}catch{return!1}}function g(q,d=!1){return new Promise((b,r)=>{const a=document.createElement("script");a.src=q,a.onload=function(h){d&&a.remove(),b(h)},a.onerror=function(){r(new Error(`Cannot load script at: ${a.src}`))},(document.head||document.documentElement).append(a)})}function m(q){console.log("Deprecated API usage: "+q)}let c;class E{static toDateObject(d){if(!d||typeof d!="string")return null;c||(c=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const b=c.exec(d);if(!b)return null;const r=parseInt(b[1],10);let a=parseInt(b[2],10);a=a>=1&&a<=12?a-1:0;let h=parseInt(b[3],10);h=h>=1&&h<=31?h:1;let x=parseInt(b[4],10);x=x>=0&&x<=23?x:0;let F=parseInt(b[5],10);F=F>=0&&F<=59?F:0;let U=parseInt(b[6],10);U=U>=0&&U<=59?U:0;const X=b[7]||"Z";let W=parseInt(b[8],10);W=W>=0&&W<=23?W:0;let Z=parseInt(b[9],10)||0;return Z=Z>=0&&Z<=59?Z:0,X==="-"?(x+=W,F+=Z):X==="+"&&(x-=W,F-=Z),new Date(Date.UTC(r,a,h,x,F,U))}}t.PDFDateString=E;function H(q,{scale:d=1,rotation:b=0}){const{width:r,height:a}=q.attributes.style,h=[0,0,parseInt(r),parseInt(a)];return new w({viewBox:h,scale:d,rotation:b})}function f(q){if(q.startsWith("#")){const d=parseInt(q.slice(1),16);return[(d&16711680)>>16,(d&65280)>>8,d&255]}return q.startsWith("rgb(")?q.slice(4,-1).split(",").map(d=>parseInt(d)):q.startsWith("rgba(")?q.slice(5,-1).split(",").map(d=>parseInt(d)).slice(0,3):((0,i.warn)(`Not a valid color format: "${q}"`),[0,0,0])}function z(q){const d=document.createElement("span");d.style.visibility="hidden",document.body.append(d);for(const b of q.keys()){d.style.color=b;const r=window.getComputedStyle(d).color;q.set(b,f(r))}d.remove()}function J(q){const{a:d,b,c:r,d:a,e:h,f:x}=q.getTransform();return[d,b,r,a,h,x]}function se(q){const{a:d,b,c:r,d:a,e:h,f:x}=q.getTransform().invertSelf();return[d,b,r,a,h,x]}function ie(q,d,b=!1,r=!0){if(d instanceof w){const{pageWidth:a,pageHeight:h}=d.rawDims,{style:x}=q,F=`calc(var(--scale-factor) * ${a}px)`,U=`calc(var(--scale-factor) * ${h}px)`;!b||d.rotation%180===0?(x.width=F,x.height=U):(x.width=U,x.height=F)}r&&q.setAttribute("data-main-rotation",d.rotation)}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=s(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(_){return"none"}addHCMFilter(_,L){return"none"}destroy(_=!1){}}t.BaseFilterFactory=i;class l{constructor(){this.constructor===l&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(_,L){if(_<=0||L<=0)throw new Error("Invalid canvas size");const O=this._createCanvas(_,L);return{canvas:O,context:O.getContext("2d")}}reset(_,L,O){if(!_.canvas)throw new Error("Canvas is not specified");if(L<=0||O<=0)throw new Error("Invalid canvas size");_.canvas.width=L,_.canvas.height=O}destroy(_){if(!_.canvas)throw new Error("Canvas is not specified");_.canvas.width=0,_.canvas.height=0,_.canvas=null,_.context=null}_createCanvas(_,L){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=l;class y{constructor({baseUrl:_=null,isCompressed:L=!0}){this.constructor===y&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_,this.isCompressed=L}async fetch({name:_}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_)throw new Error("CMap name must be specified.");const L=this.baseUrl+_+(this.isCompressed?".bcmap":""),O=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(L,O).catch(M=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${L}`)})}_fetchData(_,L){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=y;class D{constructor({baseUrl:_=null}){this.constructor===D&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_}async fetch({filename:_}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_)throw new Error("Font filename must be specified.");const L=`${this.baseUrl}${_}`;return this._fetchData(L).catch(O=>{throw new Error(`Unable to load font data at: ${L}`)})}_fetchData(_){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=D;class T{constructor(){this.constructor===T&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(_,L,O=!1){if(_<=0||L<=0)throw new Error("Invalid SVG dimensions");const M=this._createSVG("svg:svg");return M.setAttribute("version","1.1"),O||(M.setAttribute("width",`${_}px`),M.setAttribute("height",`${L}px`)),M.setAttribute("preserveAspectRatio","none"),M.setAttribute("viewBox",`0 0 ${_} ${L}`),M}createElement(_){if(typeof _!="string")throw new Error("Invalid SVG element type");return this._createSVG(_)}_createSVG(_){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=T},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,l=4294901760,y=65535;class D{constructor(v){this.h1=v?v&4294967295:i,this.h2=v?v&4294967295:i}update(v){let _,L;if(typeof v=="string"){_=new Uint8Array(v.length*2),L=0;for(let m=0,c=v.length;m<c;m++){const E=v.charCodeAt(m);E<=255?_[L++]=E:(_[L++]=E>>>8,_[L++]=E&255)}}else if((0,n.isArrayBuffer)(v))_=v.slice(),L=_.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const O=L>>2,M=L-O*4,w=new Uint32Array(_.buffer,0,O);let A=0,u=0,R=this.h1,I=this.h2;const N=3432918353,S=461845907,o=N&y,g=S&y;for(let m=0;m<O;m++)m&1?(A=w[m],A=A*N&l|A*o&y,A=A<<15|A>>>17,A=A*S&l|A*g&y,R^=A,R=R<<13|R>>>19,R=R*5+3864292196):(u=w[m],u=u*N&l|u*o&y,u=u<<15|u>>>17,u=u*S&l|u*g&y,I^=u,I=I<<13|I>>>19,I=I*5+3864292196);switch(A=0,M){case 3:A^=_[O*4+2]<<16;case 2:A^=_[O*4+1]<<8;case 1:A^=_[O*4],A=A*N&l|A*o&y,A=A<<15|A>>>17,A=A*S&l|A*g&y,O&1?R^=A:I^=A}this.h1=R,this.h2=I}hexdigest(){let v=this.h1,_=this.h2;return v^=_>>>1,v=v*3981806797&l|v*36045&y,_=_*4283543511&l|((_<<16|v>>>16)*2950163797&l)>>>16,v^=_>>>1,v=v*444984403&l|v*60499&y,_=_*3301882366&l|((_<<16|v>>>16)*3120437893&l)>>>16,v^=_>>>1,(v>>>0).toString(16).padStart(8,"0")+(_>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=D},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=s(1),i=s(10);class l{constructor({ownerDocument:T=globalThis.document,styleElement:v=null}){this._document=T,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(T){this.nativeFontFaces.push(T),this._document.fonts.add(T)}insertRule(T){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const v=this.styleElement.sheet;v.insertRule(T,v.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(T){if(T.attached||T.missingFile)return;if(T.attached=!0,this.isFontLoadingAPISupported){const _=T.createNativeFontFace();if(_){this.addNativeFontFace(_);try{await _.loaded}catch(L){throw(0,n.warn)(`Failed to load font '${_.family}': '${L}'.`),T.disableFontFace=!0,L}}return}const v=T.createFontFaceRule();if(v){if(this.insertRule(v),this.isSyncFontLoadingSupported)return;await new Promise(_=>{const L=this._queueLoadingCallback(_);this._prepareFontLoadEvent(T,L)})}}get isFontLoadingAPISupported(){var v;const T=!!((v=this._document)!=null&&v.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",T)}get isSyncFontLoadingSupported(){let T=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(T=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){function v(){for((0,n.assert)(!L.done,"completeRequest() cannot be called twice."),L.done=!0;_.length>0&&_[0].done;){const O=_.shift();setTimeout(O.callback,0)}}const{loadingRequests:_}=this,L={done:!1,complete:v,callback:T};return _.push(L),L}get _loadTestFont(){const T=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",T)}_prepareFontLoadEvent(T,v){function _(f,z){return f.charCodeAt(z)<<24|f.charCodeAt(z+1)<<16|f.charCodeAt(z+2)<<8|f.charCodeAt(z+3)&255}function L(f,z,J,se){const ie=f.substring(0,z),oe=f.substring(z+J);return ie+se+oe}let O,M;const w=this._document.createElement("canvas");w.width=1,w.height=1;const A=w.getContext("2d");let u=0;function R(f,z){if(++u>30){(0,n.warn)("Load test font never loaded."),z();return}if(A.font="30px "+f,A.fillText(".",0,20),A.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(R.bind(null,f,z))}const I=`lt${Date.now()}${this.loadTestFontId++}`;let N=this._loadTestFont;N=L(N,976,I.length,I);const o=16,g=1482184792;let m=_(N,o);for(O=0,M=I.length-3;O<M;O+=4)m=m-g+_(I,O)|0;O<I.length&&(m=m-g+_(I+"XXX",O)|0),N=L(N,o,4,(0,n.string32)(m));const c=`url(data:font/opentype;base64,${btoa(N)});`,E=`@font-face {font-family:"${I}";src:${c}}`;this.insertRule(E);const H=this._document.createElement("div");H.style.visibility="hidden",H.style.width=H.style.height="10px",H.style.position="absolute",H.style.top=H.style.left="0px";for(const f of[T.loadedName,I]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=f,H.append(z)}this._document.body.append(H),R(I,()=>{H.remove(),v.complete()})}}t.FontLoader=l;class y{constructor(T,{isEvalSupported:v=!0,disableFontFace:_=!1,ignoreErrors:L=!1,inspectFont:O=null}){this.compiledGlyphs=Object.create(null);for(const M in T)this[M]=T[M];this.isEvalSupported=v!==!1,this.disableFontFace=_===!0,this.ignoreErrors=L===!0,this._inspectFont=O}createNativeFontFace(){var v;if(!this.data||this.disableFontFace)return null;let T;if(!this.cssFontInfo)T=new FontFace(this.loadedName,this.data,{});else{const _={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,_)}return(v=this._inspectFont)==null||v.call(this,this),T}createFontFaceRule(){var L;if(!this.data||this.disableFontFace)return null;const T=(0,n.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(T)});`;let _;if(!this.cssFontInfo)_=`@font-face {font-family:"${this.loadedName}";src:${v}}`;else{let O=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(O+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),_=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${O}src:${v}}`}return(L=this._inspectFont)==null||L.call(this,this,v),_}getPathGenerator(T,v){if(this.compiledGlyphs[v]!==void 0)return this.compiledGlyphs[v];let _;try{_=T.get(this.loadedName+"_path_"+v)}catch(L){if(!this.ignoreErrors)throw L;return(0,n.warn)(`getPathGenerator - ignoring character: "${L}".`),this.compiledGlyphs[v]=function(O,M){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const L=[];for(const O of _){const M=O.args!==void 0?O.args.join(","):"";L.push("c.",O.cmd,"(",M,`);
`)}return this.compiledGlyphs[v]=new Function("c","size",L.join(""))}return this.compiledGlyphs[v]=function(L,O){for(const M of _)M.cmd==="scale"&&(M.args=[O,-O]),L[M.cmd].apply(L,M.args)}}}t.FontFaceObject=y},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=s},(e,t,s)=>{var pe,bt,ve,At;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=s(1),i=s(6),l=s(12),y=s(13),D=s(10);const T=16,v=100,_=4096,L=15,O=10,M=1e3,w=16;function A(K,C){if(K._removeMirroring)throw new Error("Context is already forwarding operations.");K.__originalSave=K.save,K.__originalRestore=K.restore,K.__originalRotate=K.rotate,K.__originalScale=K.scale,K.__originalTranslate=K.translate,K.__originalTransform=K.transform,K.__originalSetTransform=K.setTransform,K.__originalResetTransform=K.resetTransform,K.__originalClip=K.clip,K.__originalMoveTo=K.moveTo,K.__originalLineTo=K.lineTo,K.__originalBezierCurveTo=K.bezierCurveTo,K.__originalRect=K.rect,K.__originalClosePath=K.closePath,K.__originalBeginPath=K.beginPath,K._removeMirroring=()=>{K.save=K.__originalSave,K.restore=K.__originalRestore,K.rotate=K.__originalRotate,K.scale=K.__originalScale,K.translate=K.__originalTranslate,K.transform=K.__originalTransform,K.setTransform=K.__originalSetTransform,K.resetTransform=K.__originalResetTransform,K.clip=K.__originalClip,K.moveTo=K.__originalMoveTo,K.lineTo=K.__originalLineTo,K.bezierCurveTo=K.__originalBezierCurveTo,K.rect=K.__originalRect,K.closePath=K.__originalClosePath,K.beginPath=K.__originalBeginPath,delete K._removeMirroring},K.save=function(){C.save(),this.__originalSave()},K.restore=function(){C.restore(),this.__originalRestore()},K.translate=function(j,G){C.translate(j,G),this.__originalTranslate(j,G)},K.scale=function(j,G){C.scale(j,G),this.__originalScale(j,G)},K.transform=function(j,G,V,Y,q,d){C.transform(j,G,V,Y,q,d),this.__originalTransform(j,G,V,Y,q,d)},K.setTransform=function(j,G,V,Y,q,d){C.setTransform(j,G,V,Y,q,d),this.__originalSetTransform(j,G,V,Y,q,d)},K.resetTransform=function(){C.resetTransform(),this.__originalResetTransform()},K.rotate=function(j){C.rotate(j),this.__originalRotate(j)},K.clip=function(j){C.clip(j),this.__originalClip(j)},K.moveTo=function(P,j){C.moveTo(P,j),this.__originalMoveTo(P,j)},K.lineTo=function(P,j){C.lineTo(P,j),this.__originalLineTo(P,j)},K.bezierCurveTo=function(P,j,G,V,Y,q){C.bezierCurveTo(P,j,G,V,Y,q),this.__originalBezierCurveTo(P,j,G,V,Y,q)},K.rect=function(P,j,G,V){C.rect(P,j,G,V),this.__originalRect(P,j,G,V)},K.closePath=function(){C.closePath(),this.__originalClosePath()},K.beginPath=function(){C.beginPath(),this.__originalBeginPath()}}class u{constructor(C){this.canvasFactory=C,this.cache=Object.create(null)}getCanvas(C,P,j){let G;return this.cache[C]!==void 0?(G=this.cache[C],this.canvasFactory.reset(G,P,j)):(G=this.canvasFactory.create(P,j),this.cache[C]=G),G}delete(C){delete this.cache[C]}clear(){for(const C in this.cache){const P=this.cache[C];this.canvasFactory.destroy(P),delete this.cache[C]}}}function R(K,C,P,j,G,V,Y,q,d,b){const[r,a,h,x,F,U]=(0,i.getCurrentTransform)(K);if(a===0&&h===0){const Z=Y*r+F,ee=Math.round(Z),Q=q*x+U,ne=Math.round(Q),le=(Y+d)*r+F,de=Math.abs(Math.round(le)-ee)||1,be=(q+b)*x+U,me=Math.abs(Math.round(be)-ne)||1;return K.setTransform(Math.sign(r),0,0,Math.sign(x),ee,ne),K.drawImage(C,P,j,G,V,0,0,de,me),K.setTransform(r,a,h,x,F,U),[de,me]}if(r===0&&x===0){const Z=q*h+F,ee=Math.round(Z),Q=Y*a+U,ne=Math.round(Q),le=(q+b)*h+F,de=Math.abs(Math.round(le)-ee)||1,be=(Y+d)*a+U,me=Math.abs(Math.round(be)-ne)||1;return K.setTransform(0,Math.sign(a),Math.sign(h),0,ee,ne),K.drawImage(C,P,j,G,V,0,0,me,de),K.setTransform(r,a,h,x,F,U),[me,de]}K.drawImage(C,P,j,G,V,Y,q,d,b);const X=Math.hypot(r,a),W=Math.hypot(h,x);return[X*d,W*b]}function I(K){const{width:C,height:P}=K;if(C>M||P>M)return null;const j=1e3,G=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),V=C+1;let Y=new Uint8Array(V*(P+1)),q,d,b;const r=C+7&-8;let a=new Uint8Array(r*P),h=0;for(const W of K.data){let Z=128;for(;Z>0;)a[h++]=W&Z?0:255,Z>>=1}let x=0;for(h=0,a[h]!==0&&(Y[0]=1,++x),d=1;d<C;d++)a[h]!==a[h+1]&&(Y[d]=a[h]?2:1,++x),h++;for(a[h]!==0&&(Y[d]=2,++x),q=1;q<P;q++){h=q*r,b=q*V,a[h-r]!==a[h]&&(Y[b]=a[h]?1:8,++x);let W=(a[h]?4:0)+(a[h-r]?8:0);for(d=1;d<C;d++)W=(W>>2)+(a[h+1]?4:0)+(a[h-r+1]?8:0),G[W]&&(Y[b+d]=G[W],++x),h++;if(a[h-r]!==a[h]&&(Y[b+d]=a[h]?2:4,++x),x>j)return null}for(h=r*(P-1),b=q*V,a[h]!==0&&(Y[b]=8,++x),d=1;d<C;d++)a[h]!==a[h+1]&&(Y[b+d]=a[h]?4:8,++x),h++;if(a[h]!==0&&(Y[b+d]=4,++x),x>j)return null;const F=new Int32Array([0,V,-1,0,-V,0,0,0,1]),U=new Path2D;for(q=0;x&&q<=P;q++){let W=q*V;const Z=W+C;for(;W<Z&&!Y[W];)W++;if(W===Z)continue;U.moveTo(W%V,q);const ee=W;let Q=Y[W];do{const ne=F[Q];do W+=ne;while(!Y[W]);const le=Y[W];le!==5&&le!==10?(Q=le,Y[W]=0):(Q=le&51*Q>>4,Y[W]&=Q>>2|Q<<2),U.lineTo(W%V,W/V|0),Y[W]||--x}while(ee!==W);--q}return a=null,Y=null,function(W){W.save(),W.scale(1/C,-1/P),W.translate(0,-P),W.fill(U),W.beginPath(),W.restore()}}class N{constructor(C,P){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,C,P])}clone(){const C=Object.create(this);return C.clipBox=this.clipBox.slice(),C}setCurrentPoint(C,P){this.x=C,this.y=P}updatePathMinMax(C,P,j){[P,j]=n.Util.applyTransform([P,j],C),this.minX=Math.min(this.minX,P),this.minY=Math.min(this.minY,j),this.maxX=Math.max(this.maxX,P),this.maxY=Math.max(this.maxY,j)}updateRectMinMax(C,P){const j=n.Util.applyTransform(P,C),G=n.Util.applyTransform(P.slice(2),C);this.minX=Math.min(this.minX,j[0],G[0]),this.minY=Math.min(this.minY,j[1],G[1]),this.maxX=Math.max(this.maxX,j[0],G[0]),this.maxY=Math.max(this.maxY,j[1],G[1])}updateScalingPathMinMax(C,P){n.Util.scaleMinMax(C,P),this.minX=Math.min(this.minX,P[0]),this.maxX=Math.max(this.maxX,P[1]),this.minY=Math.min(this.minY,P[2]),this.maxY=Math.max(this.maxY,P[3])}updateCurvePathMinMax(C,P,j,G,V,Y,q,d,b,r){const a=n.Util.bezierBoundingBox(P,j,G,V,Y,q,d,b);if(r){r[0]=Math.min(r[0],a[0],a[2]),r[1]=Math.max(r[1],a[0],a[2]),r[2]=Math.min(r[2],a[1],a[3]),r[3]=Math.max(r[3],a[1],a[3]);return}this.updateRectMinMax(C,a)}getPathBoundingBox(C=l.PathType.FILL,P=null){const j=[this.minX,this.minY,this.maxX,this.maxY];if(C===l.PathType.STROKE){P||(0,n.unreachable)("Stroke bounding box must include transform.");const G=n.Util.singularValueDecompose2dScale(P),V=G[0]*this.lineWidth/2,Y=G[1]*this.lineWidth/2;j[0]-=V,j[1]-=Y,j[2]+=V,j[3]+=Y}return j}updateClipFromPath(){const C=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(C||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(C){this.clipBox=C,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(C=l.PathType.FILL,P=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(C,P))}}function S(K,C){if(typeof ImageData<"u"&&C instanceof ImageData){K.putImageData(C,0,0);return}const P=C.height,j=C.width,G=P%w,V=(P-G)/w,Y=G===0?V:V+1,q=K.createImageData(j,w);let d=0,b;const r=C.data,a=q.data;let h,x,F,U;if(C.kind===n.ImageKind.GRAYSCALE_1BPP){const X=r.byteLength,W=new Uint32Array(a.buffer,0,a.byteLength>>2),Z=W.length,ee=j+7>>3,Q=4294967295,ne=n.FeatureTest.isLittleEndian?4278190080:255;for(h=0;h<Y;h++){for(F=h<V?w:G,b=0,x=0;x<F;x++){const le=X-d;let de=0;const be=le>ee?j:le*8-7,me=be&-8;let we=0,te=0;for(;de<me;de+=8)te=r[d++],W[b++]=te&128?Q:ne,W[b++]=te&64?Q:ne,W[b++]=te&32?Q:ne,W[b++]=te&16?Q:ne,W[b++]=te&8?Q:ne,W[b++]=te&4?Q:ne,W[b++]=te&2?Q:ne,W[b++]=te&1?Q:ne;for(;de<be;de++)we===0&&(te=r[d++],we=128),W[b++]=te&we?Q:ne,we>>=1}for(;b<Z;)W[b++]=0;K.putImageData(q,0,h*w)}}else if(C.kind===n.ImageKind.RGBA_32BPP){for(x=0,U=j*w*4,h=0;h<V;h++)a.set(r.subarray(d,d+U)),d+=U,K.putImageData(q,0,x),x+=w;h<Y&&(U=j*G*4,a.set(r.subarray(d,d+U)),K.putImageData(q,0,x))}else if(C.kind===n.ImageKind.RGB_24BPP)for(F=w,U=j*F,h=0;h<Y;h++){for(h>=V&&(F=G,U=j*F),b=0,x=U;x--;)a[b++]=r[d++],a[b++]=r[d++],a[b++]=r[d++],a[b++]=255;K.putImageData(q,0,h*w)}else throw new Error(`bad image kind: ${C.kind}`)}function o(K,C){if(C.bitmap){K.drawImage(C.bitmap,0,0);return}const P=C.height,j=C.width,G=P%w,V=(P-G)/w,Y=G===0?V:V+1,q=K.createImageData(j,w);let d=0;const b=C.data,r=q.data;for(let a=0;a<Y;a++){const h=a<V?w:G;({srcPos:d}=(0,y.convertBlackAndWhiteToRGBA)({src:b,srcPos:d,dest:r,width:j,height:h,nonBlackColor:0})),K.putImageData(q,0,a*w)}}function g(K,C){const P=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const j of P)K[j]!==void 0&&(C[j]=K[j]);K.setLineDash!==void 0&&(C.setLineDash(K.getLineDash()),C.lineDashOffset=K.lineDashOffset)}function m(K){K.strokeStyle=K.fillStyle="#000000",K.fillRule="nonzero",K.globalAlpha=1,K.lineWidth=1,K.lineCap="butt",K.lineJoin="miter",K.miterLimit=10,K.globalCompositeOperation="source-over",K.font="10px sans-serif",K.setLineDash!==void 0&&(K.setLineDash([]),K.lineDashOffset=0),D.isNodeJS||(K.filter="none")}function c(K,C,P,j){const G=K.length;for(let V=3;V<G;V+=4){const Y=K[V];if(Y===0)K[V-3]=C,K[V-2]=P,K[V-1]=j;else if(Y<255){const q=255-Y;K[V-3]=K[V-3]*Y+C*q>>8,K[V-2]=K[V-2]*Y+P*q>>8,K[V-1]=K[V-1]*Y+j*q>>8}}}function E(K,C,P){const j=K.length,G=1/255;for(let V=3;V<j;V+=4){const Y=P?P[K[V]]:K[V];C[V]=C[V]*Y*G|0}}function H(K,C,P){const j=K.length;for(let G=3;G<j;G+=4){const V=K[G-3]*77+K[G-2]*152+K[G-1]*28;C[G]=P?C[G]*P[V>>8]>>8:C[G]*V>>16}}function f(K,C,P,j,G,V,Y,q,d,b,r){const a=!!V,h=a?V[0]:0,x=a?V[1]:0,F=a?V[2]:0;let U;G==="Luminosity"?U=H:U=E;const W=Math.min(j,Math.ceil(1048576/P));for(let Z=0;Z<j;Z+=W){const ee=Math.min(W,j-Z),Q=K.getImageData(q-b,Z+(d-r),P,ee),ne=C.getImageData(q,Z+d,P,ee);a&&c(Q.data,h,x,F),U(Q.data,ne.data,Y),C.putImageData(ne,q,Z+d)}}function z(K,C,P,j){const G=j[0],V=j[1],Y=j[2]-G,q=j[3]-V;Y===0||q===0||(f(C.context,P,Y,q,C.subtype,C.backdrop,C.transferMap,G,V,C.offsetX,C.offsetY),K.save(),K.globalAlpha=1,K.globalCompositeOperation="source-over",K.setTransform(1,0,0,1,0,0),K.drawImage(P.canvas,0,0),K.restore())}function J(K,C){const P=n.Util.singularValueDecompose2dScale(K);P[0]=Math.fround(P[0]),P[1]=Math.fround(P[1]);const j=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return C!==void 0?C:P[0]<=j||P[1]<=j}const se=["butt","round","square"],ie=["miter","round","bevel"],oe={},he={},Se=class{constructor(C,P,j,G,V,{optionalContentConfig:Y,markedContentStack:q=null},d,b){re(this,pe);re(this,ve);this.ctx=C,this.current=new N(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=P,this.objs=j,this.canvasFactory=G,this.filterFactory=V,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=q||[],this.optionalContentConfig=Y,this.cachedCanvases=new u(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=b,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(C,P=null){return typeof C=="string"?C.startsWith("g_")?this.commonObjs.get(C):this.objs.get(C):P}beginDrawing({transform:C,viewport:P,transparency:j=!1,background:G=null}){const V=this.ctx.canvas.width,Y=this.ctx.canvas.height,q=this.ctx.fillStyle;if(this.ctx.fillStyle=G||"#ffffff",this.ctx.fillRect(0,0,V,Y),this.ctx.fillStyle=q,j){const d=this.cachedCanvases.getCanvas("transparent",V,Y);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),m(this.ctx),C&&(this.ctx.transform(...C),this.outputScaleX=C[0],this.outputScaleY=C[0]),this.ctx.transform(...P.transform),this.viewportScale=P.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(C,P,j,G){const V=C.argsArray,Y=C.fnArray;let q=P||0;const d=V.length;if(d===q)return q;const b=d-q>O&&typeof j=="function",r=b?Date.now()+L:0;let a=0;const h=this.commonObjs,x=this.objs;let F;for(;;){if(G!==void 0&&q===G.nextBreakPoint)return G.breakIt(q,j),q;if(F=Y[q],F!==n.OPS.dependency)this[F].apply(this,V[q]);else for(const U of V[q]){const X=U.startsWith("g_")?h:x;if(!X.has(U))return X.get(U,j),q}if(q++,q===d)return q;if(b&&++a>O){if(Date.now()>r)return j(),q;a=0}}}endDrawing(){ce(this,pe,bt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const C of this._cachedBitmapsMap.values()){for(const P of C.values())typeof HTMLCanvasElement<"u"&&P instanceof HTMLCanvasElement&&(P.width=P.height=0);C.clear()}this._cachedBitmapsMap.clear(),ce(this,ve,At).call(this)}_scaleImage(C,P){const j=C.width,G=C.height;let V=Math.max(Math.hypot(P[0],P[1]),1),Y=Math.max(Math.hypot(P[2],P[3]),1),q=j,d=G,b="prescale1",r,a;for(;V>2&&q>1||Y>2&&d>1;){let h=q,x=d;V>2&&q>1&&(h=q>=16384?Math.floor(q/2)-1||1:Math.ceil(q/2),V/=q/h),Y>2&&d>1&&(x=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,Y/=d/x),r=this.cachedCanvases.getCanvas(b,h,x),a=r.context,a.clearRect(0,0,h,x),a.drawImage(C,0,0,q,d,0,0,h,x),C=r.canvas,q=h,d=x,b=b==="prescale1"?"prescale2":"prescale1"}return{img:C,paintWidth:q,paintHeight:d}}_createMaskCanvas(C){const P=this.ctx,{width:j,height:G}=C,V=this.current.fillColor,Y=this.current.patternFill,q=(0,i.getCurrentTransform)(P);let d,b,r,a;if((C.bitmap||C.data)&&C.count>1){const de=C.bitmap||C.data.buffer;b=JSON.stringify(Y?q:[q.slice(0,4),V]),d=this._cachedBitmapsMap.get(de),d||(d=new Map,this._cachedBitmapsMap.set(de,d));const be=d.get(b);if(be&&!Y){const me=Math.round(Math.min(q[0],q[2])+q[4]),we=Math.round(Math.min(q[1],q[3])+q[5]);return{canvas:be,offsetX:me,offsetY:we}}r=be}r||(a=this.cachedCanvases.getCanvas("maskCanvas",j,G),o(a.context,C));let h=n.Util.transform(q,[1/j,0,0,-1/G,0,0]);h=n.Util.transform(h,[1,0,0,1,0,-G]);const x=n.Util.applyTransform([0,0],h),F=n.Util.applyTransform([j,G],h),U=n.Util.normalizeRect([x[0],x[1],F[0],F[1]]),X=Math.round(U[2]-U[0])||1,W=Math.round(U[3]-U[1])||1,Z=this.cachedCanvases.getCanvas("fillCanvas",X,W),ee=Z.context,Q=Math.min(x[0],F[0]),ne=Math.min(x[1],F[1]);ee.translate(-Q,-ne),ee.transform(...h),r||(r=this._scaleImage(a.canvas,(0,i.getCurrentTransformInverse)(ee)),r=r.img,d&&Y&&d.set(b,r)),ee.imageSmoothingEnabled=J((0,i.getCurrentTransform)(ee),C.interpolate),R(ee,r,0,0,r.width,r.height,0,0,j,G),ee.globalCompositeOperation="source-in";const le=n.Util.transform((0,i.getCurrentTransformInverse)(ee),[1,0,0,1,-Q,-ne]);return ee.fillStyle=Y?V.getPattern(P,this,le,l.PathType.FILL):V,ee.fillRect(0,0,j,G),d&&!Y&&(this.cachedCanvases.delete("fillCanvas"),d.set(b,Z.canvas)),{canvas:Z.canvas,offsetX:Math.round(Q),offsetY:Math.round(ne)}}setLineWidth(C){C!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=C,this.ctx.lineWidth=C}setLineCap(C){this.ctx.lineCap=se[C]}setLineJoin(C){this.ctx.lineJoin=ie[C]}setMiterLimit(C){this.ctx.miterLimit=C}setDash(C,P){const j=this.ctx;j.setLineDash!==void 0&&(j.setLineDash(C),j.lineDashOffset=P)}setRenderingIntent(C){}setFlatness(C){}setGState(C){for(const[P,j]of C)switch(P){case"LW":this.setLineWidth(j);break;case"LC":this.setLineCap(j);break;case"LJ":this.setLineJoin(j);break;case"ML":this.setMiterLimit(j);break;case"D":this.setDash(j[0],j[1]);break;case"RI":this.setRenderingIntent(j);break;case"FL":this.setFlatness(j);break;case"Font":this.setFont(j[0],j[1]);break;case"CA":this.current.strokeAlpha=j;break;case"ca":this.current.fillAlpha=j,this.ctx.globalAlpha=j;break;case"BM":this.ctx.globalCompositeOperation=j;break;case"SMask":this.current.activeSMask=j?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(j);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const C=this.inSMaskMode;this.current.activeSMask&&!C?this.beginSMaskMode():!this.current.activeSMask&&C&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const C=this.ctx.canvas.width,P=this.ctx.canvas.height,j="smaskGroupAt"+this.groupLevel,G=this.cachedCanvases.getCanvas(j,C,P);this.suspendedCtx=this.ctx,this.ctx=G.context;const V=this.ctx;V.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),g(this.suspendedCtx,V),A(V,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),g(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(C){if(!this.current.activeSMask)return;C?(C[0]=Math.floor(C[0]),C[1]=Math.floor(C[1]),C[2]=Math.ceil(C[2]),C[3]=Math.ceil(C[3])):C=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const P=this.current.activeSMask,j=this.suspendedCtx;z(j,P,this.ctx,C),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(g(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const C=this.current;this.stateStack.push(C),this.current=C.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),g(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(C,P,j,G,V,Y){this.ctx.transform(C,P,j,G,V,Y),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(C,P,j){const G=this.ctx,V=this.current;let Y=V.x,q=V.y,d,b;const r=(0,i.getCurrentTransform)(G),a=r[0]===0&&r[3]===0||r[1]===0&&r[2]===0,h=a?j.slice(0):null;for(let x=0,F=0,U=C.length;x<U;x++)switch(C[x]|0){case n.OPS.rectangle:Y=P[F++],q=P[F++];const X=P[F++],W=P[F++],Z=Y+X,ee=q+W;G.moveTo(Y,q),X===0||W===0?G.lineTo(Z,ee):(G.lineTo(Z,q),G.lineTo(Z,ee),G.lineTo(Y,ee)),a||V.updateRectMinMax(r,[Y,q,Z,ee]),G.closePath();break;case n.OPS.moveTo:Y=P[F++],q=P[F++],G.moveTo(Y,q),a||V.updatePathMinMax(r,Y,q);break;case n.OPS.lineTo:Y=P[F++],q=P[F++],G.lineTo(Y,q),a||V.updatePathMinMax(r,Y,q);break;case n.OPS.curveTo:d=Y,b=q,Y=P[F+4],q=P[F+5],G.bezierCurveTo(P[F],P[F+1],P[F+2],P[F+3],Y,q),V.updateCurvePathMinMax(r,d,b,P[F],P[F+1],P[F+2],P[F+3],Y,q,h),F+=6;break;case n.OPS.curveTo2:d=Y,b=q,G.bezierCurveTo(Y,q,P[F],P[F+1],P[F+2],P[F+3]),V.updateCurvePathMinMax(r,d,b,Y,q,P[F],P[F+1],P[F+2],P[F+3],h),Y=P[F+2],q=P[F+3],F+=4;break;case n.OPS.curveTo3:d=Y,b=q,Y=P[F+2],q=P[F+3],G.bezierCurveTo(P[F],P[F+1],Y,q,Y,q),V.updateCurvePathMinMax(r,d,b,P[F],P[F+1],Y,q,Y,q,h),F+=4;break;case n.OPS.closePath:G.closePath();break}a&&V.updateScalingPathMinMax(r,h),V.setCurrentPoint(Y,q)}closePath(){this.ctx.closePath()}stroke(C=!0){const P=this.ctx,j=this.current.strokeColor;P.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof j=="object"&&(j!=null&&j.getPattern)?(P.save(),P.strokeStyle=j.getPattern(P,this,(0,i.getCurrentTransformInverse)(P),l.PathType.STROKE),this.rescaleAndStroke(!1),P.restore()):this.rescaleAndStroke(!0)),C&&this.consumePath(this.current.getClippedPathBoundingBox()),P.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(C=!0){const P=this.ctx,j=this.current.fillColor,G=this.current.patternFill;let V=!1;G&&(P.save(),P.fillStyle=j.getPattern(P,this,(0,i.getCurrentTransformInverse)(P),l.PathType.FILL),V=!0);const Y=this.current.getClippedPathBoundingBox();this.contentVisible&&Y!==null&&(this.pendingEOFill?(P.fill("evenodd"),this.pendingEOFill=!1):P.fill()),V&&P.restore(),C&&this.consumePath(Y)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=oe}eoClip(){this.pendingClip=he}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const C=this.pendingTextPaths,P=this.ctx;if(C===void 0){P.beginPath();return}P.save(),P.beginPath();for(const j of C)P.setTransform(...j.transform),P.translate(j.x,j.y),j.addToPath(P,j.fontSize);P.restore(),P.clip(),P.beginPath(),delete this.pendingTextPaths}setCharSpacing(C){this.current.charSpacing=C}setWordSpacing(C){this.current.wordSpacing=C}setHScale(C){this.current.textHScale=C/100}setLeading(C){this.current.leading=-C}setFont(C,P){const j=this.commonObjs.get(C),G=this.current;if(!j)throw new Error(`Can't find font for ${C}`);if(G.fontMatrix=j.fontMatrix||n.FONT_IDENTITY_MATRIX,(G.fontMatrix[0]===0||G.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+C),P<0?(P=-P,G.fontDirection=-1):G.fontDirection=1,this.current.font=j,this.current.fontSize=P,j.isType3Font)return;const V=j.loadedName||"sans-serif";let Y="normal";j.black?Y="900":j.bold&&(Y="bold");const q=j.italic?"italic":"normal",d=`"${V}", ${j.fallbackName}`;let b=P;P<T?b=T:P>v&&(b=v),this.current.fontSizeScale=P/b,this.ctx.font=`${q} ${Y} ${b}px ${d}`}setTextRenderingMode(C){this.current.textRenderingMode=C}setTextRise(C){this.current.textRise=C}moveText(C,P){this.current.x=this.current.lineX+=C,this.current.y=this.current.lineY+=P}setLeadingMoveText(C,P){this.setLeading(-P),this.moveText(C,P)}setTextMatrix(C,P,j,G,V,Y){this.current.textMatrix=[C,P,j,G,V,Y],this.current.textMatrixScale=Math.hypot(C,P),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(C,P,j,G){const V=this.ctx,Y=this.current,q=Y.font,d=Y.textRenderingMode,b=Y.fontSize/Y.fontSizeScale,r=d&n.TextRenderingMode.FILL_STROKE_MASK,a=!!(d&n.TextRenderingMode.ADD_TO_PATH_FLAG),h=Y.patternFill&&!q.missingFile;let x;(q.disableFontFace||a||h)&&(x=q.getPathGenerator(this.commonObjs,C)),q.disableFontFace||h?(V.save(),V.translate(P,j),V.beginPath(),x(V,b),G&&V.setTransform(...G),(r===n.TextRenderingMode.FILL||r===n.TextRenderingMode.FILL_STROKE)&&V.fill(),(r===n.TextRenderingMode.STROKE||r===n.TextRenderingMode.FILL_STROKE)&&V.stroke(),V.restore()):((r===n.TextRenderingMode.FILL||r===n.TextRenderingMode.FILL_STROKE)&&V.fillText(C,P,j),(r===n.TextRenderingMode.STROKE||r===n.TextRenderingMode.FILL_STROKE)&&V.strokeText(C,P,j)),a&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(V),x:P,y:j,fontSize:b,addToPath:x})}get isFontSubpixelAAEnabled(){const{context:C}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);C.scale(1.5,1),C.fillText("I",0,10);const P=C.getImageData(0,0,10,10).data;let j=!1;for(let G=3;G<P.length;G+=4)if(P[G]>0&&P[G]<255){j=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",j)}showText(C){const P=this.current,j=P.font;if(j.isType3Font)return this.showType3Text(C);const G=P.fontSize;if(G===0)return;const V=this.ctx,Y=P.fontSizeScale,q=P.charSpacing,d=P.wordSpacing,b=P.fontDirection,r=P.textHScale*b,a=C.length,h=j.vertical,x=h?1:-1,F=j.defaultVMetrics,U=G*P.fontMatrix[0],X=P.textRenderingMode===n.TextRenderingMode.FILL&&!j.disableFontFace&&!P.patternFill;V.save(),V.transform(...P.textMatrix),V.translate(P.x,P.y+P.textRise),b>0?V.scale(r,-1):V.scale(r,1);let W;if(P.patternFill){V.save();const le=P.fillColor.getPattern(V,this,(0,i.getCurrentTransformInverse)(V),l.PathType.FILL);W=(0,i.getCurrentTransform)(V),V.restore(),V.fillStyle=le}let Z=P.lineWidth;const ee=P.textMatrixScale;if(ee===0||Z===0){const le=P.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(le===n.TextRenderingMode.STROKE||le===n.TextRenderingMode.FILL_STROKE)&&(Z=this.getSinglePixelWidth())}else Z/=ee;if(Y!==1&&(V.scale(Y,Y),Z/=Y),V.lineWidth=Z,j.isInvalidPDFjsFont){const le=[];let de=0;for(const be of C)le.push(be.unicode),de+=be.width;V.fillText(le.join(""),0,0),P.x+=de*U*r,V.restore(),this.compose();return}let Q=0,ne;for(ne=0;ne<a;++ne){const le=C[ne];if(typeof le=="number"){Q+=x*le*G/1e3;continue}let de=!1;const be=(le.isSpace?d:0)+q,me=le.fontChar,we=le.accent;let te,ye,Ee=le.width;if(h){const ue=le.vmetric||F,B=-(le.vmetric?ue[1]:Ee*.5)*U,$=ue[2]*U;Ee=ue?-ue[0]:Ee,te=B/Y,ye=(Q+$)/Y}else te=Q/Y,ye=0;if(j.remeasure&&Ee>0){const ue=V.measureText(me).width*1e3/G*Y;if(Ee<ue&&this.isFontSubpixelAAEnabled){const B=Ee/ue;de=!0,V.save(),V.scale(B,1),te/=B}else Ee!==ue&&(te+=(Ee-ue)/2e3*G/Y)}if(this.contentVisible&&(le.isInFont||j.missingFile)){if(X&&!we)V.fillText(me,te,ye);else if(this.paintChar(me,te,ye,W),we){const ue=te+G*we.offset.x/Y,B=ye-G*we.offset.y/Y;this.paintChar(we.fontChar,ue,B,W)}}let Oe;h?Oe=Ee*U-be*b:Oe=Ee*U+be*b,Q+=Oe,de&&V.restore()}h?P.y-=Q:P.x+=Q*r,V.restore(),this.compose()}showType3Text(C){const P=this.ctx,j=this.current,G=j.font,V=j.fontSize,Y=j.fontDirection,q=G.vertical?1:-1,d=j.charSpacing,b=j.wordSpacing,r=j.textHScale*Y,a=j.fontMatrix||n.FONT_IDENTITY_MATRIX,h=C.length,x=j.textRenderingMode===n.TextRenderingMode.INVISIBLE;let F,U,X,W;if(!(x||V===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,P.save(),P.transform(...j.textMatrix),P.translate(j.x,j.y),P.scale(r,Y),F=0;F<h;++F){if(U=C[F],typeof U=="number"){W=q*U*V/1e3,this.ctx.translate(W,0),j.x+=W*r;continue}const Z=(U.isSpace?b:0)+d,ee=G.charProcOperatorList[U.operatorListId];if(!ee){(0,n.warn)(`Type3 character "${U.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=U,this.save(),P.scale(V,V),P.transform(...a),this.executeOperatorList(ee),this.restore()),X=n.Util.applyTransform([U.width,0],a)[0]*V+Z,P.translate(X,0),j.x+=X*r}P.restore(),this.processingType3=null}}setCharWidth(C,P){}setCharWidthAndBounds(C,P,j,G,V,Y){this.ctx.rect(j,G,V-j,Y-G),this.ctx.clip(),this.endPath()}getColorN_Pattern(C){let P;if(C[0]==="TilingPattern"){const j=C[1],G=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),V={createCanvasGraphics:Y=>new Se(Y,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};P=new l.TilingPattern(C,j,this.ctx,V,G)}else P=this._getPattern(C[1],C[2]);return P}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(C,P,j){const G=n.Util.makeHexColor(C,P,j);this.ctx.strokeStyle=G,this.current.strokeColor=G}setFillRGBColor(C,P,j){const G=n.Util.makeHexColor(C,P,j);this.ctx.fillStyle=G,this.current.fillColor=G,this.current.patternFill=!1}_getPattern(C,P=null){let j;return this.cachedPatterns.has(C)?j=this.cachedPatterns.get(C):(j=(0,l.getShadingPattern)(this.getObject(C)),this.cachedPatterns.set(C,j)),P&&(j.matrix=P),j}shadingFill(C){if(!this.contentVisible)return;const P=this.ctx;this.save();const j=this._getPattern(C);P.fillStyle=j.getPattern(P,this,(0,i.getCurrentTransformInverse)(P),l.PathType.SHADING);const G=(0,i.getCurrentTransformInverse)(P);if(G){const V=P.canvas,Y=V.width,q=V.height,d=n.Util.applyTransform([0,0],G),b=n.Util.applyTransform([0,q],G),r=n.Util.applyTransform([Y,0],G),a=n.Util.applyTransform([Y,q],G),h=Math.min(d[0],b[0],r[0],a[0]),x=Math.min(d[1],b[1],r[1],a[1]),F=Math.max(d[0],b[0],r[0],a[0]),U=Math.max(d[1],b[1],r[1],a[1]);this.ctx.fillRect(h,x,F-h,U-x)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(C,P){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(C)&&C.length===6&&this.transform(...C),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),P)){const j=P[2]-P[0],G=P[3]-P[1];this.ctx.rect(P[0],P[1],j,G),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),P),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(C){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const P=this.ctx;C.isolated||(0,n.info)("TODO: Support non-isolated groups."),C.knockout&&(0,n.warn)("Knockout groups not supported.");const j=(0,i.getCurrentTransform)(P);if(C.matrix&&P.transform(...C.matrix),!C.bbox)throw new Error("Bounding box is required.");let G=n.Util.getAxialAlignedBoundingBox(C.bbox,(0,i.getCurrentTransform)(P));const V=[0,0,P.canvas.width,P.canvas.height];G=n.Util.intersect(G,V)||[0,0,0,0];const Y=Math.floor(G[0]),q=Math.floor(G[1]);let d=Math.max(Math.ceil(G[2])-Y,1),b=Math.max(Math.ceil(G[3])-q,1),r=1,a=1;d>_&&(r=d/_,d=_),b>_&&(a=b/_,b=_),this.current.startNewPathAndClipBox([0,0,d,b]);let h="groupAt"+this.groupLevel;C.smask&&(h+="_smask_"+this.smaskCounter++%2);const x=this.cachedCanvases.getCanvas(h,d,b),F=x.context;F.scale(1/r,1/a),F.translate(-Y,-q),F.transform(...j),C.smask?this.smaskStack.push({canvas:x.canvas,context:F,offsetX:Y,offsetY:q,scaleX:r,scaleY:a,subtype:C.smask.subtype,backdrop:C.smask.backdrop,transferMap:C.smask.transferMap||null,startTransformInverse:null}):(P.setTransform(1,0,0,1,0,0),P.translate(Y,q),P.scale(r,a),P.save()),g(P,F),this.ctx=F,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(P),this.groupLevel++}endGroup(C){if(!this.contentVisible)return;this.groupLevel--;const P=this.ctx,j=this.groupStack.pop();if(this.ctx=j,this.ctx.imageSmoothingEnabled=!1,C.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const G=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...G);const V=n.Util.getAxialAlignedBoundingBox([0,0,P.canvas.width,P.canvas.height],G);this.ctx.drawImage(P.canvas,0,0),this.ctx.restore(),this.compose(V)}}beginAnnotation(C,P,j,G,V){if(ce(this,pe,bt).call(this),m(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(P)&&P.length===4){const Y=P[2]-P[0],q=P[3]-P[1];if(V&&this.annotationCanvasMap){j=j.slice(),j[4]-=P[0],j[5]-=P[1],P=P.slice(),P[0]=P[1]=0,P[2]=Y,P[3]=q;const[d,b]=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:r}=this,a=Math.ceil(Y*this.outputScaleX*r),h=Math.ceil(q*this.outputScaleY*r);this.annotationCanvas=this.canvasFactory.create(a,h);const{canvas:x,context:F}=this.annotationCanvas;this.annotationCanvasMap.set(C,x),this.annotationCanvas.savedCtx=this.ctx,this.ctx=F,this.ctx.save(),this.ctx.setTransform(d,0,0,-b,0,q*b),m(this.ctx)}else m(this.ctx),this.ctx.rect(P[0],P[1],Y,q),this.ctx.clip(),this.endPath()}this.current=new N(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...j),this.transform(...G)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ce(this,ve,At).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(C){if(!this.contentVisible)return;const P=C.count;C=this.getObject(C.data,C),C.count=P;const j=this.ctx,G=this.processingType3;if(G&&(G.compiled===void 0&&(G.compiled=I(C)),G.compiled)){G.compiled(j);return}const V=this._createMaskCanvas(C),Y=V.canvas;j.save(),j.setTransform(1,0,0,1,0,0),j.drawImage(Y,V.offsetX,V.offsetY),j.restore(),this.compose()}paintImageMaskXObjectRepeat(C,P,j=0,G=0,V,Y){if(!this.contentVisible)return;C=this.getObject(C.data,C);const q=this.ctx;q.save();const d=(0,i.getCurrentTransform)(q);q.transform(P,j,G,V,0,0);const b=this._createMaskCanvas(C);q.setTransform(1,0,0,1,b.offsetX-d[4],b.offsetY-d[5]);for(let r=0,a=Y.length;r<a;r+=2){const h=n.Util.transform(d,[P,j,G,V,Y[r],Y[r+1]]),[x,F]=n.Util.applyTransform([0,0],h);q.drawImage(b.canvas,x,F)}q.restore(),this.compose()}paintImageMaskXObjectGroup(C){if(!this.contentVisible)return;const P=this.ctx,j=this.current.fillColor,G=this.current.patternFill;for(const V of C){const{data:Y,width:q,height:d,transform:b}=V,r=this.cachedCanvases.getCanvas("maskCanvas",q,d),a=r.context;a.save();const h=this.getObject(Y,V);o(a,h),a.globalCompositeOperation="source-in",a.fillStyle=G?j.getPattern(a,this,(0,i.getCurrentTransformInverse)(P),l.PathType.FILL):j,a.fillRect(0,0,q,d),a.restore(),P.save(),P.transform(...b),P.scale(1,-1),R(P,r.canvas,0,0,q,d,0,-1,1,1),P.restore()}this.compose()}paintImageXObject(C){if(!this.contentVisible)return;const P=this.getObject(C);if(!P){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(P)}paintImageXObjectRepeat(C,P,j,G){if(!this.contentVisible)return;const V=this.getObject(C);if(!V){(0,n.warn)("Dependent image isn't ready yet");return}const Y=V.width,q=V.height,d=[];for(let b=0,r=G.length;b<r;b+=2)d.push({transform:[P,0,0,j,G[b],G[b+1]],x:0,y:0,w:Y,h:q});this.paintInlineImageXObjectGroup(V,d)}applyTransferMapsToCanvas(C){return this.current.transferMaps!=="none"&&(C.filter=this.current.transferMaps,C.drawImage(C.canvas,0,0),C.filter="none"),C.canvas}applyTransferMapsToBitmap(C){if(this.current.transferMaps==="none")return C.bitmap;const{bitmap:P,width:j,height:G}=C,V=this.cachedCanvases.getCanvas("inlineImage",j,G),Y=V.context;return Y.filter=this.current.transferMaps,Y.drawImage(P,0,0),Y.filter="none",V.canvas}paintInlineImageXObject(C){if(!this.contentVisible)return;const P=C.width,j=C.height,G=this.ctx;this.save(),D.isNodeJS||(G.filter="none"),G.scale(1/P,-1/j);let V;if(C.bitmap)V=this.applyTransferMapsToBitmap(C);else if(typeof HTMLElement=="function"&&C instanceof HTMLElement||!C.data)V=C;else{const d=this.cachedCanvases.getCanvas("inlineImage",P,j).context;S(d,C),V=this.applyTransferMapsToCanvas(d)}const Y=this._scaleImage(V,(0,i.getCurrentTransformInverse)(G));G.imageSmoothingEnabled=J((0,i.getCurrentTransform)(G),C.interpolate),R(G,Y.img,0,0,Y.paintWidth,Y.paintHeight,0,-j,P,j),this.compose(),this.restore()}paintInlineImageXObjectGroup(C,P){if(!this.contentVisible)return;const j=this.ctx;let G;if(C.bitmap)G=C.bitmap;else{const V=C.width,Y=C.height,d=this.cachedCanvases.getCanvas("inlineImage",V,Y).context;S(d,C),G=this.applyTransferMapsToCanvas(d)}for(const V of P)j.save(),j.transform(...V.transform),j.scale(1,-1),R(j,G,V.x,V.y,V.w,V.h,0,-1,1,1),j.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(C){}markPointProps(C,P){}beginMarkedContent(C){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(C,P){C==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(P)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(C){const P=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(C);const j=this.ctx;this.pendingClip&&(P||(this.pendingClip===he?j.clip("evenodd"):j.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),j.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const C=(0,i.getCurrentTransform)(this.ctx);if(C[1]===0&&C[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(C[0]),Math.abs(C[3]));else{const P=Math.abs(C[0]*C[3]-C[2]*C[1]),j=Math.hypot(C[0],C[2]),G=Math.hypot(C[1],C[3]);this._cachedGetSinglePixelWidth=Math.max(j,G)/P}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:C}=this.current,P=(0,i.getCurrentTransform)(this.ctx);let j,G;if(P[1]===0&&P[2]===0){const V=Math.abs(P[0]),Y=Math.abs(P[3]);if(C===0)j=1/V,G=1/Y;else{const q=V*C,d=Y*C;j=q<1?1/q:1,G=d<1?1/d:1}}else{const V=Math.abs(P[0]*P[3]-P[2]*P[1]),Y=Math.hypot(P[0],P[1]),q=Math.hypot(P[2],P[3]);if(C===0)j=q/V,G=Y/V;else{const d=C*V;j=q>d?q/d:1,G=Y>d?Y/d:1}}this._cachedScaleForStroking=[j,G]}return this._cachedScaleForStroking}rescaleAndStroke(C){const{ctx:P}=this,{lineWidth:j}=this.current,[G,V]=this.getScaleForStroking();if(P.lineWidth=j||1,G===1&&V===1){P.stroke();return}let Y,q,d;C&&(Y=(0,i.getCurrentTransform)(P),q=P.getLineDash().slice(),d=P.lineDashOffset),P.scale(G,V);const b=Math.max(G,V);P.setLineDash(P.getLineDash().map(r=>r/b)),P.lineDashOffset/=b,P.stroke(),C&&(P.setTransform(...Y),P.setLineDash(q),P.lineDashOffset=d)}isContentVisible(){for(let C=this.markedContentStack.length-1;C>=0;C--)if(!this.markedContentStack[C].visible)return!1;return!0}};let ae=Se;pe=new WeakSet,bt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ve=new WeakSet,At=function(){if(this.pageColors){const C=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(C!=="none"){const P=this.ctx.filter;this.ctx.filter=C,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=P}}},t.CanvasGraphics=ae;for(const K in n.OPS)ae.prototype[K]!==void 0&&(ae.prototype[n.OPS[K]]=ae.prototype[K])},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=M;var n=s(1),i=s(6);const l={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=l;function y(R,I){if(!I)return;const N=I[2]-I[0],S=I[3]-I[1],o=new Path2D;o.rect(I[0],I[1],N,S),R.clip(o)}class D{constructor(){this.constructor===D&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class T extends D{constructor(I){super(),this._type=I[1],this._bbox=I[2],this._colorStops=I[3],this._p0=I[4],this._p1=I[5],this._r0=I[6],this._r1=I[7],this.matrix=null}_createGradient(I){let N;this._type==="axial"?N=I.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(N=I.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const S of this._colorStops)N.addColorStop(S[0],S[1]);return N}getPattern(I,N,S,o){let g;if(o===l.STROKE||o===l.FILL){const m=N.current.getClippedPathBoundingBox(o,(0,i.getCurrentTransform)(I))||[0,0,0,0],c=Math.ceil(m[2]-m[0])||1,E=Math.ceil(m[3]-m[1])||1,H=N.cachedCanvases.getCanvas("pattern",c,E,!0),f=H.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-m[0],-m[1]),S=n.Util.transform(S,[1,0,0,1,m[0],m[1]]),f.transform(...N.baseTransform),this.matrix&&f.transform(...this.matrix),y(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),g=I.createPattern(H.canvas,"no-repeat");const z=new DOMMatrix(S);g.setTransform(z)}else y(I,this._bbox),g=this._createGradient(I);return g}}function v(R,I,N,S,o,g,m,c){const E=I.coords,H=I.colors,f=R.data,z=R.width*4;let J;E[N+1]>E[S+1]&&(J=N,N=S,S=J,J=g,g=m,m=J),E[S+1]>E[o+1]&&(J=S,S=o,o=J,J=m,m=c,c=J),E[N+1]>E[S+1]&&(J=N,N=S,S=J,J=g,g=m,m=J);const se=(E[N]+I.offsetX)*I.scaleX,ie=(E[N+1]+I.offsetY)*I.scaleY,oe=(E[S]+I.offsetX)*I.scaleX,he=(E[S+1]+I.offsetY)*I.scaleY,ae=(E[o]+I.offsetX)*I.scaleX,pe=(E[o+1]+I.offsetY)*I.scaleY;if(ie>=pe)return;const Ae=H[g],ve=H[g+1],Ce=H[g+2],Se=H[m],K=H[m+1],C=H[m+2],P=H[c],j=H[c+1],G=H[c+2],V=Math.round(ie),Y=Math.round(pe);let q,d,b,r,a,h,x,F;for(let U=V;U<=Y;U++){if(U<he){let Q;U<ie?Q=0:Q=(ie-U)/(ie-he),q=se-(se-oe)*Q,d=Ae-(Ae-Se)*Q,b=ve-(ve-K)*Q,r=Ce-(Ce-C)*Q}else{let Q;U>pe?Q=1:he===pe?Q=0:Q=(he-U)/(he-pe),q=oe-(oe-ae)*Q,d=Se-(Se-P)*Q,b=K-(K-j)*Q,r=C-(C-G)*Q}let X;U<ie?X=0:U>pe?X=1:X=(ie-U)/(ie-pe),a=se-(se-ae)*X,h=Ae-(Ae-P)*X,x=ve-(ve-j)*X,F=Ce-(Ce-G)*X;const W=Math.round(Math.min(q,a)),Z=Math.round(Math.max(q,a));let ee=z*U+W*4;for(let Q=W;Q<=Z;Q++)X=(q-Q)/(q-a),X<0?X=0:X>1&&(X=1),f[ee++]=d-(d-h)*X|0,f[ee++]=b-(b-x)*X|0,f[ee++]=r-(r-F)*X|0,f[ee++]=255}}function _(R,I,N){const S=I.coords,o=I.colors;let g,m;switch(I.type){case"lattice":const c=I.verticesPerRow,E=Math.floor(S.length/c)-1,H=c-1;for(g=0;g<E;g++){let f=g*c;for(let z=0;z<H;z++,f++)v(R,N,S[f],S[f+1],S[f+c],o[f],o[f+1],o[f+c]),v(R,N,S[f+c+1],S[f+1],S[f+c],o[f+c+1],o[f+1],o[f+c])}break;case"triangles":for(g=0,m=S.length;g<m;g+=3)v(R,N,S[g],S[g+1],S[g+2],o[g],o[g+1],o[g+2]);break;default:throw new Error("illegal figure")}}class L extends D{constructor(I){super(),this._coords=I[2],this._colors=I[3],this._figures=I[4],this._bounds=I[5],this._bbox=I[7],this._background=I[8],this.matrix=null}_createMeshCanvas(I,N,S){const c=Math.floor(this._bounds[0]),E=Math.floor(this._bounds[1]),H=Math.ceil(this._bounds[2])-c,f=Math.ceil(this._bounds[3])-E,z=Math.min(Math.ceil(Math.abs(H*I[0]*1.1)),3e3),J=Math.min(Math.ceil(Math.abs(f*I[1]*1.1)),3e3),se=H/z,ie=f/J,oe={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-E,scaleX:1/se,scaleY:1/ie},he=z+2*2,ae=J+2*2,pe=S.getCanvas("mesh",he,ae,!1),Ae=pe.context,ve=Ae.createImageData(z,J);if(N){const Se=ve.data;for(let K=0,C=Se.length;K<C;K+=4)Se[K]=N[0],Se[K+1]=N[1],Se[K+2]=N[2],Se[K+3]=255}for(const Se of this._figures)_(ve,Se,oe);return Ae.putImageData(ve,2,2),{canvas:pe.canvas,offsetX:c-2*se,offsetY:E-2*ie,scaleX:se,scaleY:ie}}getPattern(I,N,S,o){y(I,this._bbox);let g;if(o===l.SHADING)g=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(I));else if(g=n.Util.singularValueDecompose2dScale(N.baseTransform),this.matrix){const c=n.Util.singularValueDecompose2dScale(this.matrix);g=[g[0]*c[0],g[1]*c[1]]}const m=this._createMeshCanvas(g,o===l.SHADING?null:this._background,N.cachedCanvases);return o!==l.SHADING&&(I.setTransform(...N.baseTransform),this.matrix&&I.transform(...this.matrix)),I.translate(m.offsetX,m.offsetY),I.scale(m.scaleX,m.scaleY),I.createPattern(m.canvas,"no-repeat")}}class O extends D{getPattern(){return"hotpink"}}function M(R){switch(R[0]){case"RadialAxial":return new T(R);case"Mesh":return new L(R);case"Dummy":return new O}throw new Error(`Unknown IR type: ${R[0]}`)}const w={COLORED:1,UNCOLORED:2},u=class{constructor(I,N,S,o,g){this.operatorList=I[2],this.matrix=I[3]||[1,0,0,1,0,0],this.bbox=I[4],this.xstep=I[5],this.ystep=I[6],this.paintType=I[7],this.tilingType=I[8],this.color=N,this.ctx=S,this.canvasGraphicsFactory=o,this.baseTransform=g}createPatternCanvas(I){const N=this.operatorList,S=this.bbox,o=this.xstep,g=this.ystep,m=this.paintType,c=this.tilingType,E=this.color,H=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+c);const f=S[0],z=S[1],J=S[2],se=S[3],ie=n.Util.singularValueDecompose2dScale(this.matrix),oe=n.Util.singularValueDecompose2dScale(this.baseTransform),he=[ie[0]*oe[0],ie[1]*oe[1]],ae=this.getSizeAndScale(o,this.ctx.canvas.width,he[0]),pe=this.getSizeAndScale(g,this.ctx.canvas.height,he[1]),Ae=I.cachedCanvases.getCanvas("pattern",ae.size,pe.size,!0),ve=Ae.context,Ce=H.createCanvasGraphics(ve);Ce.groupLevel=I.groupLevel,this.setFillAndStrokeStyleToContext(Ce,m,E);let Se=f,K=z,C=J,P=se;return f<0&&(Se=0,C+=Math.abs(f)),z<0&&(K=0,P+=Math.abs(z)),ve.translate(-(ae.scale*Se),-(pe.scale*K)),Ce.transform(ae.scale,0,0,pe.scale,0,0),ve.save(),this.clipBbox(Ce,Se,K,C,P),Ce.baseTransform=(0,i.getCurrentTransform)(Ce.ctx),Ce.executeOperatorList(N),Ce.endDrawing(),{canvas:Ae.canvas,scaleX:ae.scale,scaleY:pe.scale,offsetX:Se,offsetY:K}}getSizeAndScale(I,N,S){I=Math.abs(I);const o=Math.max(u.MAX_PATTERN_SIZE,N);let g=Math.ceil(I*S);return g>=o?g=o:S=g/I,{scale:S,size:g}}clipBbox(I,N,S,o,g){const m=o-N,c=g-S;I.ctx.rect(N,S,m,c),I.current.updateRectMinMax((0,i.getCurrentTransform)(I.ctx),[N,S,o,g]),I.clip(),I.endPath()}setFillAndStrokeStyleToContext(I,N,S){const o=I.ctx,g=I.current;switch(N){case w.COLORED:const m=this.ctx;o.fillStyle=m.fillStyle,o.strokeStyle=m.strokeStyle,g.fillColor=m.fillStyle,g.strokeColor=m.strokeStyle;break;case w.UNCOLORED:const c=n.Util.makeHexColor(S[0],S[1],S[2]);o.fillStyle=c,o.strokeStyle=c,g.fillColor=c,g.strokeColor=c;break;default:throw new n.FormatError(`Unsupported paint type: ${N}`)}}getPattern(I,N,S,o){let g=S;o!==l.SHADING&&(g=n.Util.transform(g,N.baseTransform),this.matrix&&(g=n.Util.transform(g,this.matrix)));const m=this.createPatternCanvas(N);let c=new DOMMatrix(g);c=c.translate(m.offsetX,m.offsetY),c=c.scale(1/m.scaleX,1/m.scaleY);const E=I.createPattern(m.canvas,"repeat");return E.setTransform(c),E}};let A=u;De(A,"MAX_PATTERN_SIZE",3e3),t.TilingPattern=A},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=l,t.convertToRGBA=i,t.grayToRGBA=D;var n=s(1);function i(T){switch(T.kind){case n.ImageKind.GRAYSCALE_1BPP:return l(T);case n.ImageKind.RGB_24BPP:return y(T)}return null}function l({src:T,srcPos:v=0,dest:_,width:L,height:O,nonBlackColor:M=4294967295,inverseDecode:w=!1}){const A=n.FeatureTest.isLittleEndian?4278190080:255,[u,R]=w?[M,A]:[A,M],I=L>>3,N=L&7,S=T.length;_=new Uint32Array(_.buffer);let o=0;for(let g=0;g<O;g++){for(const c=v+I;v<c;v++){const E=v<S?T[v]:255;_[o++]=E&128?R:u,_[o++]=E&64?R:u,_[o++]=E&32?R:u,_[o++]=E&16?R:u,_[o++]=E&8?R:u,_[o++]=E&4?R:u,_[o++]=E&2?R:u,_[o++]=E&1?R:u}if(N===0)continue;const m=v<S?T[v++]:255;for(let c=0;c<N;c++)_[o++]=m&1<<7-c?R:u}return{srcPos:v,destPos:o}}function y({src:T,srcPos:v=0,dest:_,destPos:L=0,width:O,height:M}){let w=0;const A=T.length>>2,u=new Uint32Array(T.buffer,v,A);if(n.FeatureTest.isLittleEndian){for(;w<A-2;w+=3,L+=4){const R=u[w],I=u[w+1],N=u[w+2];_[L]=R|4278190080,_[L+1]=R>>>24|I<<8|4278190080,_[L+2]=I>>>16|N<<16|4278190080,_[L+3]=N>>>8|4278190080}for(let R=w*4,I=T.length;R<I;R+=3)_[L++]=T[R]|T[R+1]<<8|T[R+2]<<16|4278190080}else{for(;w<A-2;w+=3,L+=4){const R=u[w],I=u[w+1],N=u[w+2];_[L]=R|255,_[L+1]=R<<24|I>>>8|255,_[L+2]=I<<16|N>>>16|255,_[L+3]=N<<8|255}for(let R=w*4,I=T.length;R<I;R+=3)_[L++]=T[R]<<24|T[R+1]<<16|T[R+2]<<8|255}return{srcPos:v,destPos:L}}function D(T,v){if(n.FeatureTest.isLittleEndian)for(let _=0,L=T.length;_<L;_++)v[_]=T[_]*65793|4278190080;else for(let _=0,L=T.length;_<L;_++)v[_]=T[_]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const s=Object.create(null);t.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(e,t,s)=>{var T,$t,_,Wt,O,ot;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=s(1);const i={UNKNOWN:0,DATA:1,ERROR:2},l={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function y(w){switch(w instanceof Error||typeof w=="object"&&w!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),w.name){case"AbortException":return new n.AbortException(w.message);case"MissingPDFException":return new n.MissingPDFException(w.message);case"PasswordException":return new n.PasswordException(w.message,w.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(w.message,w.status);case"UnknownErrorException":return new n.UnknownErrorException(w.message,w.details);default:return new n.UnknownErrorException(w.message,w.toString())}}class D{constructor(A,u,R){re(this,T);re(this,_);re(this,O);this.sourceName=A,this.targetName=u,this.comObj=R,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=I=>{const N=I.data;if(N.targetName!==this.sourceName)return;if(N.stream){ce(this,_,Wt).call(this,N);return}if(N.callback){const o=N.callbackId,g=this.callbackCapabilities[o];if(!g)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],N.callback===i.DATA)g.resolve(N.data);else if(N.callback===i.ERROR)g.reject(y(N.reason));else throw new Error("Unexpected callback case");return}const S=this.actionHandler[N.action];if(!S)throw new Error(`Unknown action from worker: ${N.action}`);if(N.callbackId){const o=this.sourceName,g=N.sourceName;new Promise(function(m){m(S(N.data))}).then(function(m){R.postMessage({sourceName:o,targetName:g,callback:i.DATA,callbackId:N.callbackId,data:m})},function(m){R.postMessage({sourceName:o,targetName:g,callback:i.ERROR,callbackId:N.callbackId,reason:y(m)})});return}if(N.streamId){ce(this,T,$t).call(this,N);return}S(N.data)},R.addEventListener("message",this._onComObjOnMessage)}on(A,u){const R=this.actionHandler;if(R[A])throw new Error(`There is already an actionName called "${A}"`);R[A]=u}send(A,u,R){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,data:u},R)}sendWithPromise(A,u,R){const I=this.callbackId++,N=new n.PromiseCapability;this.callbackCapabilities[I]=N;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,callbackId:I,data:u},R)}catch(S){N.reject(S)}return N.promise}sendWithStream(A,u,R,I){const N=this.streamId++,S=this.sourceName,o=this.targetName,g=this.comObj;return new ReadableStream({start:m=>{const c=new n.PromiseCapability;return this.streamControllers[N]={controller:m,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},g.postMessage({sourceName:S,targetName:o,action:A,streamId:N,data:u,desiredSize:m.desiredSize},I),c.promise},pull:m=>{const c=new n.PromiseCapability;return this.streamControllers[N].pullCall=c,g.postMessage({sourceName:S,targetName:o,stream:l.PULL,streamId:N,desiredSize:m.desiredSize}),c.promise},cancel:m=>{(0,n.assert)(m instanceof Error,"cancel must have a valid reason");const c=new n.PromiseCapability;return this.streamControllers[N].cancelCall=c,this.streamControllers[N].isClosed=!0,g.postMessage({sourceName:S,targetName:o,stream:l.CANCEL,streamId:N,reason:y(m)}),c.promise}},R)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}T=new WeakSet,$t=function(A){const u=A.streamId,R=this.sourceName,I=A.sourceName,N=this.comObj,S=this,o=this.actionHandler[A.action],g={enqueue(m,c=1,E){if(this.isCancelled)return;const H=this.desiredSize;this.desiredSize-=c,H>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),N.postMessage({sourceName:R,targetName:I,stream:l.ENQUEUE,streamId:u,chunk:m},E)},close(){this.isCancelled||(this.isCancelled=!0,N.postMessage({sourceName:R,targetName:I,stream:l.CLOSE,streamId:u}),delete S.streamSinks[u])},error(m){(0,n.assert)(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,N.postMessage({sourceName:R,targetName:I,stream:l.ERROR,streamId:u,reason:y(m)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:A.desiredSize,ready:null};g.sinkCapability.resolve(),g.ready=g.sinkCapability.promise,this.streamSinks[u]=g,new Promise(function(m){m(o(A.data,g))}).then(function(){N.postMessage({sourceName:R,targetName:I,stream:l.START_COMPLETE,streamId:u,success:!0})},function(m){N.postMessage({sourceName:R,targetName:I,stream:l.START_COMPLETE,streamId:u,reason:y(m)})})},_=new WeakSet,Wt=function(A){const u=A.streamId,R=this.sourceName,I=A.sourceName,N=this.comObj,S=this.streamControllers[u],o=this.streamSinks[u];switch(A.stream){case l.START_COMPLETE:A.success?S.startCall.resolve():S.startCall.reject(y(A.reason));break;case l.PULL_COMPLETE:A.success?S.pullCall.resolve():S.pullCall.reject(y(A.reason));break;case l.PULL:if(!o){N.postMessage({sourceName:R,targetName:I,stream:l.PULL_COMPLETE,streamId:u,success:!0});break}o.desiredSize<=0&&A.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=A.desiredSize,new Promise(function(g){var m;g((m=o.onPull)==null?void 0:m.call(o))}).then(function(){N.postMessage({sourceName:R,targetName:I,stream:l.PULL_COMPLETE,streamId:u,success:!0})},function(g){N.postMessage({sourceName:R,targetName:I,stream:l.PULL_COMPLETE,streamId:u,reason:y(g)})});break;case l.ENQUEUE:if((0,n.assert)(S,"enqueue should have stream controller"),S.isClosed)break;S.controller.enqueue(A.chunk);break;case l.CLOSE:if((0,n.assert)(S,"close should have stream controller"),S.isClosed)break;S.isClosed=!0,S.controller.close(),ce(this,O,ot).call(this,S,u);break;case l.ERROR:(0,n.assert)(S,"error should have stream controller"),S.controller.error(y(A.reason)),ce(this,O,ot).call(this,S,u);break;case l.CANCEL_COMPLETE:A.success?S.cancelCall.resolve():S.cancelCall.reject(y(A.reason)),ce(this,O,ot).call(this,S,u);break;case l.CANCEL:if(!o)break;new Promise(function(g){var m;g((m=o.onCancel)==null?void 0:m.call(o,y(A.reason)))}).then(function(){N.postMessage({sourceName:R,targetName:I,stream:l.CANCEL_COMPLETE,streamId:u,success:!0})},function(g){N.postMessage({sourceName:R,targetName:I,stream:l.CANCEL_COMPLETE,streamId:u,reason:y(g)})}),o.sinkCapability.reject(y(A.reason)),o.isCancelled=!0,delete this.streamSinks[u];break;default:throw new Error("Unexpected stream case")}},O=new WeakSet,ot=async function(A,u){var R,I,N;await Promise.allSettled([(R=A.startCall)==null?void 0:R.promise,(I=A.pullCall)==null?void 0:I.promise,(N=A.cancelCall)==null?void 0:N.promise]),delete this.streamControllers[u]},t.MessageHandler=D},(e,t,s)=>{var l,y;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=s(1);class i{constructor({parsedData:T,rawData:v}){re(this,l,void 0);re(this,y,void 0);ge(this,l,T),ge(this,y,v)}getRaw(){return k(this,y)}get(T){return k(this,l).get(T)??null}getAll(){return(0,n.objectFromMap)(k(this,l))}has(T){return k(this,l).has(T)}}l=new WeakMap,y=new WeakMap,t.Metadata=i},(e,t,s)=>{var T,v,_,L,O,M,yt;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=s(1),i=s(8);const l=Symbol("INTERNAL");class y{constructor(u,R){re(this,T,!0);this.name=u,this.intent=R}get visible(){return k(this,T)}_setVisible(u,R){u!==l&&(0,n.unreachable)("Internal method `_setVisible` called."),ge(this,T,R)}}T=new WeakMap;class D{constructor(u){re(this,M);re(this,v,null);re(this,_,new Map);re(this,L,null);re(this,O,null);if(this.name=null,this.creator=null,u!==null){this.name=u.name,this.creator=u.creator,ge(this,O,u.order);for(const R of u.groups)k(this,_).set(R.id,new y(R.name,R.intent));if(u.baseState==="OFF")for(const R of k(this,_).values())R._setVisible(l,!1);for(const R of u.on)k(this,_).get(R)._setVisible(l,!0);for(const R of u.off)k(this,_).get(R)._setVisible(l,!1);ge(this,L,this.getHash())}}isVisible(u){if(k(this,_).size===0)return!0;if(!u)return(0,n.warn)("Optional content group not defined."),!0;if(u.type==="OCG")return k(this,_).has(u.id)?k(this,_).get(u.id).visible:((0,n.warn)(`Optional content group not found: ${u.id}`),!0);if(u.type==="OCMD"){if(u.expression)return ce(this,M,yt).call(this,u.expression);if(!u.policy||u.policy==="AnyOn"){for(const R of u.ids){if(!k(this,_).has(R))return(0,n.warn)(`Optional content group not found: ${R}`),!0;if(k(this,_).get(R).visible)return!0}return!1}else if(u.policy==="AllOn"){for(const R of u.ids){if(!k(this,_).has(R))return(0,n.warn)(`Optional content group not found: ${R}`),!0;if(!k(this,_).get(R).visible)return!1}return!0}else if(u.policy==="AnyOff"){for(const R of u.ids){if(!k(this,_).has(R))return(0,n.warn)(`Optional content group not found: ${R}`),!0;if(!k(this,_).get(R).visible)return!0}return!1}else if(u.policy==="AllOff"){for(const R of u.ids){if(!k(this,_).has(R))return(0,n.warn)(`Optional content group not found: ${R}`),!0;if(k(this,_).get(R).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${u.policy}.`),!0}return(0,n.warn)(`Unknown group type ${u.type}.`),!0}setVisibility(u,R=!0){if(!k(this,_).has(u)){(0,n.warn)(`Optional content group not found: ${u}`);return}k(this,_).get(u)._setVisible(l,!!R),ge(this,v,null)}get hasInitialVisibility(){return this.getHash()===k(this,L)}getOrder(){return k(this,_).size?k(this,O)?k(this,O).slice():[...k(this,_).keys()]:null}getGroups(){return k(this,_).size>0?(0,n.objectFromMap)(k(this,_)):null}getGroup(u){return k(this,_).get(u)||null}getHash(){if(k(this,v)!==null)return k(this,v);const u=new i.MurmurHash3_64;for(const[R,I]of k(this,_))u.update(`${R}:${I.visible}`);return ge(this,v,u.hexdigest())}}v=new WeakMap,_=new WeakMap,L=new WeakMap,O=new WeakMap,M=new WeakSet,yt=function(u){const R=u.length;if(R<2)return!0;const I=u[0];for(let N=1;N<R;N++){const S=u[N];let o;if(Array.isArray(S))o=ce(this,M,yt).call(this,S);else if(k(this,_).has(S))o=k(this,_).get(S).visible;else return(0,n.warn)(`Optional content group not found: ${S}`),!0;switch(I){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return I==="And"},t.OptionalContentConfig=D},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=s(1),i=s(6);class l{constructor({length:v,initialData:_,progressiveDone:L=!1,contentDispositionFilename:O=null,disableRange:M=!1,disableStream:w=!1},A){if((0,n.assert)(A,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=L,this._contentDispositionFilename=O,(_==null?void 0:_.length)>0){const u=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=A,this._isStreamingSupported=!w,this._isRangeSupported=!M,this._contentLength=v,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((u,R)=>{this._onReceiveData({begin:u,chunk:R})}),this._pdfDataRangeTransport.addProgressListener((u,R)=>{this._onProgress({loaded:u,total:R})}),this._pdfDataRangeTransport.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:v,chunk:_}){const L=_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength?_.buffer:new Uint8Array(_).buffer;if(v===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(L):this._queuedChunks.push(L);else{const O=this._rangeReaders.some(function(M){return M._begin!==v?!1:(M._enqueue(L),!0)});(0,n.assert)(O,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var v;return((v=this._fullRequestReader)==null?void 0:v._loaded)??0}_onProgress(v){var _,L,O,M;v.total===void 0?(L=(_=this._rangeReaders[0])==null?void 0:_.onProgress)==null||L.call(_,{loaded:v.loaded}):(M=(O=this._fullRequestReader)==null?void 0:O.onProgress)==null||M.call(O,{loaded:v.loaded,total:v.total})}_onProgressiveDone(){var v;(v=this._fullRequestReader)==null||v.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const _=this._rangeReaders.indexOf(v);_>=0&&this._rangeReaders.splice(_,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new y(this,v,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(v,_){if(_<=this._progressiveDataLength)return null;const L=new D(this,v,_);return this._pdfDataRangeTransport.requestDataRange(v,_),this._rangeReaders.push(L),L}cancelAllRequests(v){var _;(_=this._fullRequestReader)==null||_.cancel(v);for(const L of this._rangeReaders.slice(0))L.cancel(v);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=l;class y{constructor(v,_,L=!1,O=null){this._stream=v,this._done=L||!1,this._filename=(0,i.isPdfFile)(O)?O:null,this._queuedChunks=_||[],this._loaded=0;for(const M of this._queuedChunks)this._loaded+=M.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){this._done||(this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunks.push(v),this._loaded+=v.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const v=new n.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class D{constructor(v,_,L){this._stream=v,this._begin=_,this._end=L,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(!this._done){if(this._requests.length===0)this._queuedChunk=v;else{this._requests.shift().resolve({value:v,done:!1});for(const L of this._requests)L.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const v=new n.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class s{static textContent(i){const l=[],y={items:l,styles:Object.create(null)};function D(T){var L;if(!T)return;let v=null;const _=T.name;if(_==="#text")v=T.value;else if(s.shouldBuildText(_))(L=T==null?void 0:T.attributes)!=null&&L.textContent?v=T.attributes.textContent:T.value&&(v=T.value);else return;if(v!==null&&l.push({str:v}),!!T.children)for(const O of T.children)D(O)}return D(i),y}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}t.XfaText=s},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=s(7);const i=function(v){return new Promise((_,L)=>{require$$5.readFile(v,(M,w)=>{if(M||!w){L(new Error(M));return}_(new Uint8Array(w))})})};class l extends n.BaseFilterFactory{}t.NodeFilterFactory=l;class y extends n.BaseCanvasFactory{_createCanvas(_,L){return require$$5.createCanvas(_,L)}}t.NodeCanvasFactory=y;class D extends n.BaseCMapReaderFactory{_fetchData(_,L){return i(_).then(O=>({cMapData:O,compressionType:L}))}}t.NodeCMapReaderFactory=D;class T extends n.BaseStandardFontDataFactory{_fetchData(_){return i(_)}}t.NodeStandardFontDataFactory=T},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=s(1),i=s(22);const l=require$$5,y=require$$5,D=require$$5,T=require$$5,v=/^file:\/\/\/[a-zA-Z]:\//;function _(N){const S=T.parse(N);return S.protocol==="file:"||S.host?S:/^[a-z]:[/\\]/i.test(N)?T.parse(`file:///${N}`):(S.host||(S.protocol="file:"),S)}class L{constructor(S){this.source=S,this.url=_(S.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&S.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var S;return((S=this._fullRequestReader)==null?void 0:S._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new R(this):new A(this),this._fullRequestReader}getRangeReader(S,o){if(o<=this._progressiveDataLength)return null;const g=this.isFsUrl?new I(this,S,o):new u(this,S,o);return this._rangeRequestReaders.push(g),g}cancelAllRequests(S){var o;(o=this._fullRequestReader)==null||o.cancel(S);for(const g of this._rangeRequestReaders.slice(0))g.cancel(S)}}t.PDFNodeStream=L;class O{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null;const o=S.source;this._contentLength=o.length,this._loaded=0,this._filename=null,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=S.length,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class M{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const o=S.source;this._isStreamingSupported=!o.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=S.length,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function w(N,S){return{protocol:N.protocol,auth:N.auth,host:N.hostname,port:N.port,path:N.path,method:"GET",headers:S}}class A extends O{constructor(S){super(S);const o=g=>{if(g.statusCode===404){const H=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=H,this._headersCapability.reject(H);return}this._headersCapability.resolve(),this._setReadableStream(g);const m=H=>this._readableStream.headers[H.toLowerCase()],{allowRangeRequests:c,suggestedLength:E}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:S.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=E||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(m)};this._request=null,this._url.protocol==="http:"?this._request=y.request(w(this._url,S.httpHeaders),o):this._request=D.request(w(this._url,S.httpHeaders),o),this._request.on("error",g=>{this._storedError=g,this._headersCapability.reject(g)}),this._request.end()}}class u extends M{constructor(S,o,g){super(S),this._httpHeaders={};for(const c in S.httpHeaders){const E=S.httpHeaders[c];E!==void 0&&(this._httpHeaders[c]=E)}this._httpHeaders.Range=`bytes=${o}-${g-1}`;const m=c=>{if(c.statusCode===404){const E=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=E;return}this._setReadableStream(c)};this._request=null,this._url.protocol==="http:"?this._request=y.request(w(this._url,this._httpHeaders),m):this._request=D.request(w(this._url,this._httpHeaders),m),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class R extends O{constructor(S){super(S);let o=decodeURIComponent(this._url.path);v.test(this._url.href)&&(o=o.replace(/^\//,"")),l.lstat(o,(g,m)=>{if(g){g.code==="ENOENT"&&(g=new n.MissingPDFException(`Missing PDF "${o}".`)),this._storedError=g,this._headersCapability.reject(g);return}this._contentLength=m.size,this._setReadableStream(l.createReadStream(o)),this._headersCapability.resolve()})}}class I extends M{constructor(S,o,g){super(S);let m=decodeURIComponent(this._url.path);v.test(this._url.href)&&(m=m.replace(/^\//,"")),this._setReadableStream(l.createReadStream(m,{start:o,end:g-1}))}}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=T,t.extractFilenameFromHeader=D,t.validateRangeRequestCapabilities=y,t.validateResponseStatus=v;var n=s(1),i=s(23),l=s(6);function y({getResponseHeader:_,isHttp:L,rangeChunkSize:O,disableRange:M}){const w={allowRangeRequests:!1,suggestedLength:void 0},A=parseInt(_("Content-Length"),10);return!Number.isInteger(A)||(w.suggestedLength=A,A<=2*O)||M||!L||_("Accept-Ranges")!=="bytes"||(_("Content-Encoding")||"identity")!=="identity"||(w.allowRangeRequests=!0),w}function D(_){const L=_("Content-Disposition");if(L){let O=(0,i.getFilenameFromContentDispositionHeader)(L);if(O.includes("%"))try{O=decodeURIComponent(O)}catch{}if((0,l.isPdfFile)(O))return O}return null}function T(_,L){return _===404||_===0&&L.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+L+'".'):new n.UnexpectedResponseException(`Unexpected server response (${_}) while retrieving PDF "${L}".`,_)}function v(_){return _===200||_===206}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=i;var n=s(1);function i(l){let y=!0,D=T("filename\\*","i").exec(l);if(D){D=D[1];let A=O(D);return A=unescape(A),A=M(A),A=w(A),_(A)}if(D=L(l),D){const A=w(D);return _(A)}if(D=T("filename","i").exec(l),D){D=D[1];let A=O(D);return A=w(A),_(A)}function T(A,u){return new RegExp("(?:^|;)\\s*"+A+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function v(A,u){if(A){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const R=new TextDecoder(A,{fatal:!0}),I=(0,n.stringToBytes)(u);u=R.decode(I),y=!1}catch{}}return u}function _(A){return y&&/[\x80-\xff]/.test(A)&&(A=v("utf-8",A),y&&(A=v("iso-8859-1",A))),A}function L(A){const u=[];let R;const I=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(R=I.exec(A))!==null;){let[,S,o,g]=R;if(S=parseInt(S,10),S in u){if(S===0)break;continue}u[S]=[o,g]}const N=[];for(let S=0;S<u.length&&S in u;++S){let[o,g]=u[S];g=O(g),o&&(g=unescape(g),S===0&&(g=M(g))),N.push(g)}return N.join("")}function O(A){if(A.startsWith('"')){const u=A.slice(1).split('\\"');for(let R=0;R<u.length;++R){const I=u[R].indexOf('"');I!==-1&&(u[R]=u[R].slice(0,I),u.length=R+1),u[R]=u[R].replaceAll(/\\(.)/g,"$1")}A=u.join('"')}return A}function M(A){const u=A.indexOf("'");if(u===-1)return A;const R=A.slice(0,u),N=A.slice(u+1).replace(/^[^']*'/,"");return v(R,N)}function w(A){return!A.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(A)?A:A.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,R,I,N){if(I==="q"||I==="Q")return N=N.replaceAll("_"," "),N=N.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,o){return String.fromCharCode(parseInt(o,16))}),v(R,N);try{N=atob(N)}catch{}return v(R,N)})}return""}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=s(1),i=s(22);const l=200,y=206;function D(O){const M=O.response;return typeof M!="string"?M:(0,n.stringToBytes)(M).buffer}class T{constructor(M,w={}){this.url=M,this.isHttp=/^https?:/i.test(M),this.httpHeaders=this.isHttp&&w.httpHeaders||Object.create(null),this.withCredentials=w.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(M,w,A){const u={begin:M,end:w};for(const R in A)u[R]=A[R];return this.request(u)}requestFull(M){return this.request(M)}request(M){const w=new XMLHttpRequest,A=this.currXhrId++,u=this.pendingRequests[A]={xhr:w};w.open("GET",this.url),w.withCredentials=this.withCredentials;for(const R in this.httpHeaders){const I=this.httpHeaders[R];I!==void 0&&w.setRequestHeader(R,I)}return this.isHttp&&"begin"in M&&"end"in M?(w.setRequestHeader("Range",`bytes=${M.begin}-${M.end-1}`),u.expectedStatus=y):u.expectedStatus=l,w.responseType="arraybuffer",M.onError&&(w.onerror=function(R){M.onError(w.status)}),w.onreadystatechange=this.onStateChange.bind(this,A),w.onprogress=this.onProgress.bind(this,A),u.onHeadersReceived=M.onHeadersReceived,u.onDone=M.onDone,u.onError=M.onError,u.onProgress=M.onProgress,w.send(null),A}onProgress(M,w){var u;const A=this.pendingRequests[M];A&&((u=A.onProgress)==null||u.call(A,w))}onStateChange(M,w){var S,o,g;const A=this.pendingRequests[M];if(!A)return;const u=A.xhr;if(u.readyState>=2&&A.onHeadersReceived&&(A.onHeadersReceived(),delete A.onHeadersReceived),u.readyState!==4||!(M in this.pendingRequests))return;if(delete this.pendingRequests[M],u.status===0&&this.isHttp){(S=A.onError)==null||S.call(A,u.status);return}const R=u.status||l;if(!(R===l&&A.expectedStatus===y)&&R!==A.expectedStatus){(o=A.onError)==null||o.call(A,u.status);return}const N=D(u);if(R===y){const m=u.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(m);A.onDone({begin:parseInt(c[1],10),chunk:N})}else N?A.onDone({begin:0,chunk:N}):(g=A.onError)==null||g.call(A,u.status)}getRequestXhr(M){return this.pendingRequests[M].xhr}isPendingRequest(M){return M in this.pendingRequests}abortRequest(M){const w=this.pendingRequests[M].xhr;delete this.pendingRequests[M],w.abort()}}class v{constructor(M){this._source=M,this._manager=new T(M.url,{httpHeaders:M.httpHeaders,withCredentials:M.withCredentials}),this._rangeChunkSize=M.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(M){const w=this._rangeRequestReaders.indexOf(M);w>=0&&this._rangeRequestReaders.splice(w,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _(this._manager,this._source),this._fullRequestReader}getRangeReader(M,w){const A=new L(this._manager,M,w);return A.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(A),A}cancelAllRequests(M){var w;(w=this._fullRequestReader)==null||w.cancel(M);for(const A of this._rangeRequestReaders.slice(0))A.cancel(M)}}t.PDFNetworkStream=v;class _{constructor(M,w){this._manager=M;const A={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._fullRequestId=M.requestFull(A),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=w.disableRange||!1,this._contentLength=w.length,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const M=this._fullRequestId,w=this._manager.getRequestXhr(M),A=I=>w.getResponseHeader(I),{allowRangeRequests:u,suggestedLength:R}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});u&&(this._isRangeSupported=!0),this._contentLength=R||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(A),this._isRangeSupported&&this._manager.abortRequest(M),this._headersReceivedCapability.resolve()}_onDone(M){if(M&&(this._requests.length>0?this._requests.shift().resolve({value:M.chunk,done:!1}):this._cachedChunks.push(M.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(M){this._storedError=(0,i.createResponseStatusError)(M,this._url),this._headersReceivedCapability.reject(this._storedError);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(M){var w;(w=this.onProgress)==null||w.call(this,{loaded:M.loaded,total:M.lengthComputable?M.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const M=new n.PromiseCapability;return this._requests.push(M),M.promise}cancel(M){this._done=!0,this._headersReceivedCapability.reject(M);for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class L{constructor(M,w,A){this._manager=M;const u={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=M.url,this._requestId=M.requestRange(w,A,u),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var M;(M=this.onClosed)==null||M.call(this,this)}_onDone(M){const w=M.chunk;this._requests.length>0?this._requests.shift().resolve({value:w,done:!1}):this._queuedChunk=w,this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(M){this._storedError=(0,i.createResponseStatusError)(M,this._url);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(M){var w;this.isStreamingSupported||(w=this.onProgress)==null||w.call(this,{loaded:M.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const w=this._queuedChunk;return this._queuedChunk=null,{value:w,done:!1}}if(this._done)return{value:void 0,done:!0};const M=new n.PromiseCapability;return this._requests.push(M),M.promise}cancel(M){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=s(1),i=s(22);function l(L,O,M){return{method:"GET",headers:L,signal:M.signal,mode:"cors",credentials:O?"include":"same-origin",redirect:"follow"}}function y(L){const O=new Headers;for(const M in L){const w=L[M];w!==void 0&&O.append(M,w)}return O}function D(L){return L instanceof Uint8Array?L.buffer:L instanceof ArrayBuffer?L:((0,n.warn)(`getArrayBuffer - unexpected data format: ${L}`),new Uint8Array(L).buffer)}class T{constructor(O){this.source=O,this.isHttp=/^https?:/i.test(O.url),this.httpHeaders=this.isHttp&&O.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var O;return((O=this._fullRequestReader)==null?void 0:O._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new v(this),this._fullRequestReader}getRangeReader(O,M){if(M<=this._progressiveDataLength)return null;const w=new _(this,O,M);return this._rangeRequestReaders.push(w),w}cancelAllRequests(O){var M;(M=this._fullRequestReader)==null||M.cancel(O);for(const w of this._rangeRequestReaders.slice(0))w.cancel(O)}}t.PDFFetchStream=T;class v{constructor(O){this._stream=O,this._reader=null,this._loaded=0,this._filename=null;const M=O.source;this._withCredentials=M.withCredentials||!1,this._contentLength=M.length,this._headersCapability=new n.PromiseCapability,this._disableRange=M.disableRange||!1,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!M.disableStream,this._isRangeSupported=!M.disableRange,this._headers=y(this._stream.httpHeaders);const w=M.url;fetch(w,l(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,i.validateResponseStatus)(A.status))throw(0,i.createResponseStatusError)(A.status,w);this._reader=A.body.getReader(),this._headersCapability.resolve();const u=N=>A.headers.get(N),{allowRangeRequests:R,suggestedLength:I}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=R,this._contentLength=I||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;await this._headersCapability.promise;const{value:O,done:M}=await this._reader.read();return M?{value:O,done:M}:(this._loaded+=O.byteLength,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded,total:this._contentLength}),{value:D(O),done:!1})}cancel(O){var M;(M=this._reader)==null||M.cancel(O),this._abortController.abort()}}class _{constructor(O,M,w){this._stream=O,this._reader=null,this._loaded=0;const A=O.source;this._withCredentials=A.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!A.disableStream,this._abortController=new AbortController,this._headers=y(this._stream.httpHeaders),this._headers.append("Range",`bytes=${M}-${w-1}`);const u=A.url;fetch(u,l(this._headers,this._withCredentials,this._abortController)).then(R=>{if(!(0,i.validateResponseStatus)(R.status))throw(0,i.createResponseStatusError)(R.status,u);this._readCapability.resolve(),this._reader=R.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;await this._readCapability.promise;const{value:O,done:M}=await this._reader.read();return M?{value:O,done:M}:(this._loaded+=O.byteLength,(w=this.onProgress)==null||w.call(this,{loaded:this._loaded}),{value:D(O),done:!1})}cancel(O){var M;(M=this._reader)==null||M.cancel(O),this._abortController.abort()}}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=A,t.updateTextLayer=u;var n=s(1),i=s(6);const l=1e5,y=30,D=.8,T=new Map;function v(R,I){let N;if(I&&n.FeatureTest.isOffscreenCanvasSupported)N=new OffscreenCanvas(R,R).getContext("2d",{alpha:!1});else{const S=document.createElement("canvas");S.width=S.height=R,N=S.getContext("2d",{alpha:!1})}return N}function _(R,I){const N=T.get(R);if(N)return N;const S=v(y,I);S.font=`${y}px ${R}`;const o=S.measureText("");let g=o.fontBoundingBoxAscent,m=Math.abs(o.fontBoundingBoxDescent);if(g){const E=g/(g+m);return T.set(R,E),S.canvas.width=S.canvas.height=0,E}S.strokeStyle="red",S.clearRect(0,0,y,y),S.strokeText("g",0,0);let c=S.getImageData(0,0,y,y).data;m=0;for(let E=c.length-1-3;E>=0;E-=4)if(c[E]>0){m=Math.ceil(E/4/y);break}S.clearRect(0,0,y,y),S.strokeText("A",0,y),c=S.getImageData(0,0,y,y).data,g=0;for(let E=0,H=c.length;E<H;E+=4)if(c[E]>0){g=y-Math.floor(E/4/y);break}if(S.canvas.width=S.canvas.height=0,g){const E=g/(g+m);return T.set(R,E),E}return T.set(R,D),D}function L(R,I,N){const S=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};R._textDivs.push(S);const g=n.Util.transform(R._transform,I.transform);let m=Math.atan2(g[1],g[0]);const c=N[I.fontName];c.vertical&&(m+=Math.PI/2);const E=Math.hypot(g[2],g[3]),H=E*_(c.fontFamily,R._isOffscreenCanvasSupported);let f,z;m===0?(f=g[4],z=g[5]-H):(f=g[4]+H*Math.sin(m),z=g[5]-H*Math.cos(m));const J="calc(var(--scale-factor)*",se=S.style;R._container===R._rootContainer?(se.left=`${(100*f/R._pageWidth).toFixed(2)}%`,se.top=`${(100*z/R._pageHeight).toFixed(2)}%`):(se.left=`${J}${f.toFixed(2)}px)`,se.top=`${J}${z.toFixed(2)}px)`),se.fontSize=`${J}${E.toFixed(2)}px)`,se.fontFamily=c.fontFamily,o.fontSize=E,S.setAttribute("role","presentation"),S.textContent=I.str,S.dir=I.dir,R._fontInspectorEnabled&&(S.dataset.fontName=I.fontName),m!==0&&(o.angle=m*(180/Math.PI));let ie=!1;if(I.str.length>1)ie=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const oe=Math.abs(I.transform[0]),he=Math.abs(I.transform[3]);oe!==he&&Math.max(oe,he)/Math.min(oe,he)>1.5&&(ie=!0)}ie&&(o.canvasWidth=c.vertical?I.height:I.width),R._textDivProperties.set(S,o),R._isReadableStream&&R._layoutText(S)}function O(R){const{div:I,scale:N,properties:S,ctx:o,prevFontSize:g,prevFontFamily:m}=R,{style:c}=I;let E="";if(S.canvasWidth!==0&&S.hasText){const{fontFamily:H}=c,{canvasWidth:f,fontSize:z}=S;(g!==z||m!==H)&&(o.font=`${z*N}px ${H}`,R.prevFontSize=z,R.prevFontFamily=H);const{width:J}=o.measureText(I.textContent);J>0&&(E=`scaleX(${f*N/J})`)}S.angle!==0&&(E=`rotate(${S.angle}deg) ${E}`),E.length>0&&(c.transform=E)}function M(R){if(R._canceled)return;const I=R._textDivs,N=R._capability;if(I.length>l){N.resolve();return}if(!R._isReadableStream)for(const o of I)R._layoutText(o);N.resolve()}class w{constructor({textContentSource:I,container:N,viewport:S,textDivs:o,textDivProperties:g,textContentItemsStr:m,isOffscreenCanvasSupported:c}){var J;this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=N,this._textDivs=o||[],this._textContentItemsStr=m||[],this._isOffscreenCanvasSupported=c,this._fontInspectorEnabled=!!((J=globalThis.FontInspector)!=null&&J.enabled),this._reader=null,this._textDivProperties=g||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:v(0,c)};const{pageWidth:E,pageHeight:H,pageX:f,pageY:z}=S.rawDims;this._transform=[1,0,0,-1,-f,z+H],this._pageWidth=E,this._pageHeight=H,(0,i.setLayerDimensions)(N,S),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(I,N){for(const S of I){if(S.str===void 0){if(S.type==="beginMarkedContentProps"||S.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),S.id!==null&&this._container.setAttribute("id",`${S.id}`),o.append(this._container)}else S.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(S.str),L(this,S,N)}}_layoutText(I){const N=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,O(this._layoutTextParams),N.hasText&&this._container.append(I),N.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this._container.append(S)}}_render(){const I=new n.PromiseCapability;let N=Object.create(null);if(this._isReadableStream){const S=()=>{this._reader.read().then(({value:o,done:g})=>{if(g){I.resolve();return}Object.assign(N,o.styles),this._processItems(o.items,N),S()},I.reject)};this._reader=this._textContentSource.getReader(),S()}else if(this._textContentSource){const{items:S,styles:o}=this._textContentSource;this._processItems(S,o),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{N=null,M(this)},this._capability.reject)}}t.TextLayerRenderTask=w;function A(R){!R.textContentSource&&(R.textContent||R.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),R.textContentSource=R.textContent||R.textContentStream);const{container:I,viewport:N}=R,S=getComputedStyle(I),o=S.getPropertyValue("visibility"),g=parseFloat(S.getPropertyValue("--scale-factor"));o==="visible"&&(!g||Math.abs(g-N.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const m=new w(R);return m._render(),m}function u({container:R,viewport:I,textDivs:N,textDivProperties:S,isOffscreenCanvasSupported:o,mustRotate:g=!0,mustRescale:m=!0}){if(g&&(0,i.setLayerDimensions)(R,{rotation:I.rotation}),m){const c=v(0,o),H={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:c};for(const f of N)H.properties=S.get(f),H.div=f,O(H)}}},(e,t,s)=>{var v,_,L,O,M,w,A,u,R,vt,N,Vt,o,St,m,Et;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=s(1),i=s(5),l=s(28),y=s(29),D=s(6);const E=class{constructor(f){re(this,R);re(this,N);re(this,o);re(this,m);re(this,v,void 0);re(this,_,!1);re(this,L,this.pointerup.bind(this));re(this,O,this.pointerdown.bind(this));re(this,M,new Map);re(this,w,!1);re(this,A,!1);re(this,u,void 0);E._initialized||(E._initialized=!0,l.FreeTextEditor.initialize(f.l10n),y.InkEditor.initialize(f.l10n)),f.uiManager.registerEditorTypes([l.FreeTextEditor,y.InkEditor]),ge(this,u,f.uiManager),this.pageIndex=f.pageIndex,this.div=f.div,ge(this,v,f.accessibilityManager),k(this,u).addLayer(this)}get isEmpty(){return k(this,M).size===0}updateToolbar(f){k(this,u).updateToolbar(f)}updateMode(f=k(this,u).getMode()){ce(this,m,Et).call(this),f===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),k(this,u).unselectAll(),f!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",f===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",f===n.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(f){if(!f&&k(this,u).getMode()!==n.AnnotationEditorType.INK)return;if(!f){for(const J of k(this,M).values())if(J.isEmpty()){J.setInBackground();return}}ce(this,o,St).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(f){k(this,u).setEditingState(f)}addCommands(f){k(this,u).addCommands(f)}enable(){this.div.style.pointerEvents="auto";for(const f of k(this,M).values())f.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const f of k(this,M).values())f.disableEditing();ce(this,m,Et).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(f){k(this,u).getActive()!==f&&k(this,u).setActiveEditor(f)}enableClick(){this.div.addEventListener("pointerdown",k(this,O)),this.div.addEventListener("pointerup",k(this,L))}disableClick(){this.div.removeEventListener("pointerdown",k(this,O)),this.div.removeEventListener("pointerup",k(this,L))}attach(f){k(this,M).set(f.id,f)}detach(f){var z;k(this,M).delete(f.id),(z=k(this,v))==null||z.removePointerInTextLayer(f.contentDiv)}remove(f){k(this,u).removeEditor(f),this.detach(f),f.div.style.display="none",setTimeout(()=>{f.div.style.display="",f.div.remove(),f.isAttachedToDOM=!1,document.activeElement===document.body&&k(this,u).focusMainContainer()},0),k(this,A)||this.addInkEditorIfNeeded(!1)}add(f){if(ce(this,R,vt).call(this,f),k(this,u).addEditor(f),this.attach(f),!f.isAttachedToDOM){const z=f.render();this.div.append(z),f.isAttachedToDOM=!0}this.moveEditorInDOM(f),f.onceAdded(),k(this,u).addToAnnotationStorage(f)}moveEditorInDOM(f){var z;(z=k(this,v))==null||z.moveElementInDOM(this.div,f.div,f.contentDiv,!0)}addOrRebuild(f){f.needsToBeRebuilt()?f.rebuild():this.add(f)}addANewEditor(f){const z=()=>{this.addOrRebuild(f)},J=()=>{f.remove()};this.addCommands({cmd:z,undo:J,mustExec:!0})}addUndoableEditor(f){const z=()=>{this.addOrRebuild(f)},J=()=>{f.remove()};this.addCommands({cmd:z,undo:J,mustExec:!1})}getNextId(){return k(this,u).getId()}deserialize(f){switch(f.annotationType){case n.AnnotationEditorType.FREETEXT:return l.FreeTextEditor.deserialize(f,this,k(this,u));case n.AnnotationEditorType.INK:return y.InkEditor.deserialize(f,this,k(this,u))}return null}setSelected(f){k(this,u).setSelected(f)}toggleSelected(f){k(this,u).toggleSelected(f)}isSelected(f){return k(this,u).isSelected(f)}unselect(f){k(this,u).unselect(f)}pointerup(f){const{isMac:z}=n.FeatureTest.platform;if(!(f.button!==0||f.ctrlKey&&z)&&f.target===this.div&&k(this,w)){if(ge(this,w,!1),!k(this,_)){ge(this,_,!0);return}ce(this,o,St).call(this,f)}}pointerdown(f){const{isMac:z}=n.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&z||f.target!==this.div)return;ge(this,w,!0);const J=k(this,u).getActive();ge(this,_,!J||J.isEmpty())}drop(f){const z=f.dataTransfer.getData("text/plain"),J=k(this,u).getEditor(z);if(!J)return;f.preventDefault(),f.dataTransfer.dropEffect="move",ce(this,R,vt).call(this,J);const se=this.div.getBoundingClientRect(),ie=f.clientX-se.x,oe=f.clientY-se.y;J.translate(ie-J.startX,oe-J.startY),this.moveEditorInDOM(J),J.div.focus()}dragover(f){f.preventDefault()}destroy(){var f,z;((f=k(this,u).getActive())==null?void 0:f.parent)===this&&k(this,u).setActiveEditor(null);for(const J of k(this,M).values())(z=k(this,v))==null||z.removePointerInTextLayer(J.contentDiv),J.setParent(null),J.isAttachedToDOM=!1,J.div.remove();this.div=null,k(this,M).clear(),k(this,u).removeLayer(this)}render({viewport:f}){this.viewport=f,(0,D.setLayerDimensions)(this.div,f),(0,i.bindEvents)(this,this.div,["dragover","drop"]);for(const z of k(this,u).getEditors(this.pageIndex))this.add(z);this.updateMode()}update({viewport:f}){k(this,u).commitOrRemove(),this.viewport=f,(0,D.setLayerDimensions)(this.div,{rotation:f.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:f,pageHeight:z}=this.viewport.rawDims;return[f,z]}};let T=E;v=new WeakMap,_=new WeakMap,L=new WeakMap,O=new WeakMap,M=new WeakMap,w=new WeakMap,A=new WeakMap,u=new WeakMap,R=new WeakSet,vt=function(f){var z;f.parent!==this&&(this.attach(f),(z=f.parent)==null||z.detach(f),f.setParent(this),f.div&&f.isAttachedToDOM&&(f.div.remove(),this.div.append(f.div)))},N=new WeakSet,Vt=function(f){switch(k(this,u).getMode()){case n.AnnotationEditorType.FREETEXT:return new l.FreeTextEditor(f);case n.AnnotationEditorType.INK:return new y.InkEditor(f)}return null},o=new WeakSet,St=function(f){const z=this.getNextId(),J=ce(this,N,Vt).call(this,{parent:this,id:z,x:f.offsetX,y:f.offsetY,uiManager:k(this,u)});return J&&this.add(J),J},m=new WeakSet,Et=function(){ge(this,A,!0);for(const f of k(this,M).values())f.isEmpty()&&f.remove();ge(this,A,!1)},De(T,"_initialized",!1),t.AnnotationEditorLayer=T},(e,t,s)=>{var D,T,v,_,L,O,M,w,A,u,qt,I,zt,S,Gt,g,Ct;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=s(1),i=s(5),l=s(4);const c=class extends l.AnnotationEditor{constructor(f){super({...f,name:"freeTextEditor"});re(this,u);re(this,I);re(this,S);re(this,g);re(this,D,this.editorDivBlur.bind(this));re(this,T,this.editorDivFocus.bind(this));re(this,v,this.editorDivInput.bind(this));re(this,_,this.editorDivKeydown.bind(this));re(this,L,void 0);re(this,O,"");re(this,M,`${this.id}-editor`);re(this,w,!1);re(this,A,void 0);ge(this,L,f.color||c._defaultColor||l.AnnotationEditor._defaultLineColor),ge(this,A,f.fontSize||c._defaultFontSize)}static initialize(f){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(J=>[J,f.get(J)]));const z=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(z.getPropertyValue("--freetext-padding"))}static updateDefaultParams(f,z){switch(f){case n.AnnotationEditorParamsType.FREETEXT_SIZE:c._defaultFontSize=z;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:c._defaultColor=z;break}}updateParams(f,z){switch(f){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ce(this,u,qt).call(this,z);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ce(this,I,zt).call(this,z);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,c._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,c._defaultColor||l.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,k(this,A)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,k(this,L)]]}getInitialTranslation(){const f=this.parentScale;return[-c._internalPadding*f,-(c._internalPadding+k(this,A))*f]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",k(this,_)),this.editorDiv.addEventListener("focus",k(this,T)),this.editorDiv.addEventListener("blur",k(this,D)),this.editorDiv.addEventListener("input",k(this,v)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",k(this,M)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",k(this,_)),this.editorDiv.removeEventListener("focus",k(this,T)),this.editorDiv.removeEventListener("blur",k(this,D)),this.editorDiv.removeEventListener("input",k(this,v)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(f){super.focusin(f),f.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),k(this,w)||(ge(this,w,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),ge(this,O,ce(this,S,Gt).call(this).trimEnd()),ce(this,g,Ct).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(f){this.enableEditMode(),this.editorDiv.focus()}keydown(f){f.target===this.div&&f.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(f){c._keyboardManager.exec(this,f)}editorDivFocus(f){this.isEditing=!0}editorDivBlur(f){this.isEditing=!1}editorDivInput(f){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let f,z;this.width&&(f=this.x,z=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",k(this,M)),this.enableEditing(),c._l10nPromise.get("editor_free_text2_aria_label").then(se=>{var ie;return(ie=this.editorDiv)==null?void 0:ie.setAttribute("aria-label",se)}),c._l10nPromise.get("free_text2_default_content").then(se=>{var ie;return(ie=this.editorDiv)==null?void 0:ie.setAttribute("default-content",se)}),this.editorDiv.contentEditable=!0;const{style:J}=this.editorDiv;if(J.fontSize=`calc(${k(this,A)}px * var(--scale-factor))`,J.color=k(this,L),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[se,ie]=this.parentDimensions;this.setAt(f*se,z*ie,this.width*se,this.height*ie);for(const oe of k(this,O).split(`
`)){const he=document.createElement("div");he.append(oe?document.createTextNode(oe):document.createElement("br")),this.editorDiv.append(he)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(f,z,J){const se=super.deserialize(f,z,J);return ge(se,A,f.fontSize),ge(se,L,n.Util.makeHexColor(...f.color)),ge(se,O,f.value),se}serialize(){if(this.isEmpty())return null;const f=c._internalPadding*this.parentScale,z=this.getRect(f,f),J=l.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:k(this,L));return{annotationType:n.AnnotationEditorType.FREETEXT,color:J,fontSize:k(this,A),value:k(this,O),pageIndex:this.pageIndex,rect:z,rotation:this.rotation}}};let y=c;D=new WeakMap,T=new WeakMap,v=new WeakMap,_=new WeakMap,L=new WeakMap,O=new WeakMap,M=new WeakMap,w=new WeakMap,A=new WeakMap,u=new WeakSet,qt=function(f){const z=se=>{this.editorDiv.style.fontSize=`calc(${se}px * var(--scale-factor))`,this.translate(0,-(se-k(this,A))*this.parentScale),ge(this,A,se),ce(this,g,Ct).call(this)},J=k(this,A);this.addCommands({cmd:()=>{z(f)},undo:()=>{z(J)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},I=new WeakSet,zt=function(f){const z=k(this,L);this.addCommands({cmd:()=>{ge(this,L,this.editorDiv.style.color=f)},undo:()=>{ge(this,L,this.editorDiv.style.color=z)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,Gt=function(){const f=this.editorDiv.getElementsByTagName("div");if(f.length===0)return this.editorDiv.innerText;const z=[];for(const J of f)z.push(J.innerText.replace(/\r\n?|\n/,""));return z.join(`
`)},g=new WeakSet,Ct=function(){const[f,z]=this.parentDimensions;let J;if(this.isAttachedToDOM)J=this.div.getBoundingClientRect();else{const{currentLayer:se,div:ie}=this,oe=ie.style.display;ie.style.display="hidden",se.div.append(this.div),J=ie.getBoundingClientRect(),ie.remove(),ie.style.display=oe}this.width=J.width/f,this.height=J.height/z},De(y,"_freeTextDefaultContent",""),De(y,"_l10nPromise"),De(y,"_internalPadding",0),De(y,"_defaultColor",null),De(y,"_defaultFontSize",10),De(y,"_keyboardManager",new i.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],c.prototype.commitOrRemove]])),De(y,"_type","freetext"),t.FreeTextEditor=y},(e,t,s)=>{var v,_,L,O,M,w,A,u,R,I,N,S,o,g,m,Xt,E,Kt,f,Yt,J,Jt,ie,wt,he,Qt,pe,Zt,ve,en,Se,Ge,C,Pt,j,lt,V,ct,q,Ze,b,Tt,a,ut,x,xt,U,tn,W,nn,ee,sn,ne,Rt,de,ht,me,et,te,kt;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return l.fitCurve}});var n=s(1),i=s(4),l=s(30),y=s(5);const D=16,Ee=class extends i.AnnotationEditor{constructor(B){super({...B,name:"inkEditor"});re(this,m);re(this,E);re(this,f);re(this,J);re(this,ie);re(this,he);re(this,pe);re(this,ve);re(this,Se);re(this,C);re(this,j);re(this,V);re(this,q);re(this,b);re(this,a);re(this,U);re(this,W);re(this,ee);re(this,ne);re(this,de);re(this,me);re(this,te);re(this,v,0);re(this,_,0);re(this,L,0);re(this,O,this.canvasPointermove.bind(this));re(this,M,this.canvasPointerleave.bind(this));re(this,w,this.canvasPointerup.bind(this));re(this,A,this.canvasPointerdown.bind(this));re(this,u,!1);re(this,R,!1);re(this,I,null);re(this,N,null);re(this,S,0);re(this,o,0);re(this,g,null);this.color=B.color||null,this.thickness=B.thickness||null,this.opacity=B.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(B){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map($=>[$,B.get($)]))}static updateDefaultParams(B,$){switch(B){case n.AnnotationEditorParamsType.INK_THICKNESS:Ee._defaultThickness=$;break;case n.AnnotationEditorParamsType.INK_COLOR:Ee._defaultColor=$;break;case n.AnnotationEditorParamsType.INK_OPACITY:Ee._defaultOpacity=$/100;break}}updateParams(B,$){switch(B){case n.AnnotationEditorParamsType.INK_THICKNESS:ce(this,m,Xt).call(this,$);break;case n.AnnotationEditorParamsType.INK_COLOR:ce(this,E,Kt).call(this,$);break;case n.AnnotationEditorParamsType.INK_OPACITY:ce(this,f,Yt).call(this,$);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,Ee._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,Ee._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ee._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ee._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||Ee._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ee._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ce(this,j,lt).call(this),ce(this,V,ct).call(this)),this.isAttachedToDOM||(this.parent.add(this),ce(this,q,Ze).call(this)),ce(this,me,et).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,k(this,N).disconnect(),ge(this,N,null),super.remove())}setParent(B){!this.parent&&B?this._uiManager.removeShouldRescale(this):this.parent&&B===null&&this._uiManager.addShouldRescale(this),super.setParent(B)}onScaleChanging(){const[B,$]=this.parentDimensions,fe=this.width*B,_e=this.height*$;this.setDimensions(fe,_e)}enableEditMode(){k(this,u)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",k(this,A)),this.canvas.addEventListener("pointerup",k(this,w)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",k(this,A)),this.canvas.removeEventListener("pointerup",k(this,w)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){k(this,u)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ge(this,u,!0),this.div.classList.add("disabled"),ce(this,me,et).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(B){super.focusin(B),this.enableEditMode()}canvasPointerdown(B){B.button!==0||!this.isInEditMode()||k(this,u)||(this.setInForeground(),B.type!=="mouse"&&this.div.focus(),B.stopPropagation(),this.canvas.addEventListener("pointerleave",k(this,M)),this.canvas.addEventListener("pointermove",k(this,O)),ce(this,he,Qt).call(this,B.offsetX,B.offsetY))}canvasPointermove(B){B.stopPropagation(),ce(this,pe,Zt).call(this,B.offsetX,B.offsetY)}canvasPointerup(B){B.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(B.stopPropagation(),ce(this,C,Pt).call(this,B),this.setInBackground())}canvasPointerleave(B){ce(this,C,Pt).call(this,B),this.setInBackground()}render(){if(this.div)return this.div;let B,$;this.width&&(B=this.x,$=this.y),super.render(),Ee._l10nPromise.get("editor_ink2_aria_label").then(ke=>{var Re;return(Re=this.div)==null?void 0:Re.setAttribute("aria-label",ke)});const[fe,_e,Pe,xe]=ce(this,J,Jt).call(this);if(this.setAt(fe,_e,0,0),this.setDims(Pe,xe),ce(this,j,lt).call(this),this.width){const[ke,Re]=this.parentDimensions;this.setAt(B*ke,$*Re,this.width*ke,this.height*Re),ge(this,R,!0),ce(this,q,Ze).call(this),this.setDims(this.width*ke,this.height*Re),ce(this,Se,Ge).call(this),ce(this,te,kt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ce(this,V,ct).call(this),this.div}setDimensions(B,$){const fe=Math.round(B),_e=Math.round($);if(k(this,S)===fe&&k(this,o)===_e)return;ge(this,S,fe),ge(this,o,_e),this.canvas.style.visibility="hidden",k(this,v)&&Math.abs(k(this,v)-B/$)>.01&&($=Math.ceil(B/k(this,v)),this.setDims(B,$));const[Pe,xe]=this.parentDimensions;this.width=B/Pe,this.height=$/xe,k(this,u)&&ce(this,b,Tt).call(this,B,$),ce(this,q,Ze).call(this),ce(this,Se,Ge).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(B,$,fe){var Ie,Le;const _e=super.deserialize(B,$,fe);_e.thickness=B.thickness,_e.color=n.Util.makeHexColor(...B.color),_e.opacity=B.opacity;const[Pe,xe]=_e.pageDimensions,ke=_e.width*Pe,Re=_e.height*xe,Me=_e.parentScale,Te=B.thickness/2;ge(_e,v,ke/Re),ge(_e,u,!0),ge(_e,S,Math.round(ke)),ge(_e,o,Math.round(Re));for(const{bezier:Fe}of B.paths){const Ue=[];_e.paths.push(Ue);let He=Me*(Fe[0]-Te),$e=Me*(Re-Fe[1]-Te);for(let je=2,Be=Fe.length;je<Be;je+=6){const qe=Me*(Fe[je]-Te),Xe=Me*(Re-Fe[je+1]-Te),st=Me*(Fe[je+2]-Te),it=Me*(Re-Fe[je+3]-Te),Mt=Me*(Fe[je+4]-Te),It=Me*(Re-Fe[je+5]-Te);Ue.push([[He,$e],[qe,Xe],[st,it],[Mt,It]]),He=Mt,$e=It}const Ve=ce(this,x,xt).call(this,Ue);_e.bezierPath2D.push(Ve)}const Ne=ce(Ie=_e,ne,Rt).call(Ie);return ge(_e,L,Math.max(D,Ne[2]-Ne[0])),ge(_e,_,Math.max(D,Ne[3]-Ne[1])),ce(Le=_e,b,Tt).call(Le,ke,Re),_e}serialize(){if(this.isEmpty())return null;const B=this.getRect(0,0),$=this.rotation%180===0?B[3]-B[1]:B[2]-B[0],fe=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:fe,thickness:this.thickness,opacity:this.opacity,paths:ce(this,U,tn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,$),pageIndex:this.pageIndex,rect:B,rotation:this.rotation}}};let T=Ee;v=new WeakMap,_=new WeakMap,L=new WeakMap,O=new WeakMap,M=new WeakMap,w=new WeakMap,A=new WeakMap,u=new WeakMap,R=new WeakMap,I=new WeakMap,N=new WeakMap,S=new WeakMap,o=new WeakMap,g=new WeakMap,m=new WeakSet,Xt=function(B){const $=this.thickness;this.addCommands({cmd:()=>{this.thickness=B,ce(this,me,et).call(this)},undo:()=>{this.thickness=$,ce(this,me,et).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},E=new WeakSet,Kt=function(B){const $=this.color;this.addCommands({cmd:()=>{this.color=B,ce(this,Se,Ge).call(this)},undo:()=>{this.color=$,ce(this,Se,Ge).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,Yt=function(B){B/=100;const $=this.opacity;this.addCommands({cmd:()=>{this.opacity=B,ce(this,Se,Ge).call(this)},undo:()=>{this.opacity=$,ce(this,Se,Ge).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},J=new WeakSet,Jt=function(){const{parentRotation:B,parentDimensions:[$,fe]}=this;switch(B){case 90:return[0,fe,fe,$];case 180:return[$,fe,$,fe];case 270:return[$,0,fe,$];default:return[0,0,$,fe]}},ie=new WeakSet,wt=function(){const{ctx:B,color:$,opacity:fe,thickness:_e,parentScale:Pe,scaleFactor:xe}=this;B.lineWidth=_e*Pe/xe,B.lineCap="round",B.lineJoin="round",B.miterLimit=10,B.strokeStyle=`${$}${(0,y.opacityToHex)(fe)}`},he=new WeakSet,Qt=function(B,$){this.isEditing=!0,k(this,R)||(ge(this,R,!0),ce(this,q,Ze).call(this),this.thickness||(this.thickness=Ee._defaultThickness),this.color||(this.color=Ee._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ee._defaultOpacity)),this.currentPath.push([B,$]),ge(this,I,null),ce(this,ie,wt).call(this),this.ctx.beginPath(),this.ctx.moveTo(B,$),ge(this,g,()=>{k(this,g)&&(k(this,I)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ce(this,Se,Ge).call(this),this.ctx.lineTo(...k(this,I)),ge(this,I,null),this.ctx.stroke()),window.requestAnimationFrame(k(this,g)))}),window.requestAnimationFrame(k(this,g))},pe=new WeakSet,Zt=function(B,$){const[fe,_e]=this.currentPath.at(-1);B===fe&&$===_e||(this.currentPath.push([B,$]),ge(this,I,[B,$]))},ve=new WeakSet,en=function(B,$){var Me;this.ctx.closePath(),ge(this,g,null),B=Math.min(Math.max(B,0),this.canvas.width),$=Math.min(Math.max($,0),this.canvas.height);const[fe,_e]=this.currentPath.at(-1);(B!==fe||$!==_e)&&this.currentPath.push([B,$]);let Pe;if(this.currentPath.length!==1)Pe=(0,l.fitCurve)(this.currentPath,30,null);else{const Te=[B,$];Pe=[[Te,Te.slice(),Te.slice(),Te]]}const xe=ce(Me=Ee,x,xt).call(Me,Pe);this.currentPath.length=0;const ke=()=>{this.paths.push(Pe),this.bezierPath2D.push(xe),this.rebuild()},Re=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ce(this,j,lt).call(this),ce(this,V,ct).call(this)),ce(this,me,et).call(this))};this.addCommands({cmd:ke,undo:Re,mustExec:!0})},Se=new WeakSet,Ge=function(){if(this.isEmpty()){ce(this,a,ut).call(this);return}ce(this,ie,wt).call(this);const{canvas:B,ctx:$}=this;$.setTransform(1,0,0,1,0,0),$.clearRect(0,0,B.width,B.height),ce(this,a,ut).call(this);for(const fe of this.bezierPath2D)$.stroke(fe)},C=new WeakSet,Pt=function(B){ce(this,ve,en).call(this,B.offsetX,B.offsetY),this.canvas.removeEventListener("pointerleave",k(this,M)),this.canvas.removeEventListener("pointermove",k(this,O)),this.addToAnnotationStorage()},j=new WeakSet,lt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Ee._l10nPromise.get("editor_ink_canvas_aria_label").then(B=>{var $;return($=this.canvas)==null?void 0:$.setAttribute("aria-label",B)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},V=new WeakSet,ct=function(){ge(this,N,new ResizeObserver(B=>{const $=B[0].contentRect;$.width&&$.height&&this.setDimensions($.width,$.height)})),k(this,N).observe(this.div)},q=new WeakSet,Ze=function(){if(!k(this,R))return;const[B,$]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*B),this.canvas.height=Math.ceil(this.height*$),ce(this,a,ut).call(this)},b=new WeakSet,Tt=function(B,$){const fe=ce(this,de,ht).call(this),_e=(B-fe)/k(this,L),Pe=($-fe)/k(this,_);this.scaleFactor=Math.min(_e,Pe)},a=new WeakSet,ut=function(){const B=ce(this,de,ht).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+B,this.translationY*this.scaleFactor+B)},x=new WeakSet,xt=function(B){const $=new Path2D;for(let fe=0,_e=B.length;fe<_e;fe++){const[Pe,xe,ke,Re]=B[fe];fe===0&&$.moveTo(...Pe),$.bezierCurveTo(xe[0],xe[1],ke[0],ke[1],Re[0],Re[1])}return $},U=new WeakSet,tn=function(B,$,fe,_e){const xe=[],ke=this.thickness/2;let Re,Me;for(const Te of this.paths){Re=[],Me=[];for(let Ne=0,Ie=Te.length;Ne<Ie;Ne++){const[Le,Fe,Ue,He]=Te[Ne],$e=B*(Le[0]+$)+ke,Ve=_e-B*(Le[1]+fe)-ke,je=B*(Fe[0]+$)+ke,Be=_e-B*(Fe[1]+fe)-ke,qe=B*(Ue[0]+$)+ke,Xe=_e-B*(Ue[1]+fe)-ke,st=B*(He[0]+$)+ke,it=_e-B*(He[1]+fe)-ke;Ne===0&&(Re.push($e,Ve),Me.push($e,Ve)),Re.push(je,Be,qe,Xe,st,it),ce(this,W,nn).call(this,$e,Ve,je,Be,qe,Xe,st,it,4,Me)}xe.push({bezier:Re,points:Me})}return xe},W=new WeakSet,nn=function(B,$,fe,_e,Pe,xe,ke,Re,Me,Te){if(ce(this,ee,sn).call(this,B,$,fe,_e,Pe,xe,ke,Re)){Te.push(ke,Re);return}for(let Ne=1;Ne<Me-1;Ne++){const Ie=Ne/Me,Le=1-Ie;let Fe=Ie*B+Le*fe,Ue=Ie*$+Le*_e,He=Ie*fe+Le*Pe,$e=Ie*_e+Le*xe;const Ve=Ie*Pe+Le*ke,je=Ie*xe+Le*Re;Fe=Ie*Fe+Le*He,Ue=Ie*Ue+Le*$e,He=Ie*He+Le*Ve,$e=Ie*$e+Le*je,Fe=Ie*Fe+Le*He,Ue=Ie*Ue+Le*$e,Te.push(Fe,Ue)}Te.push(ke,Re)},ee=new WeakSet,sn=function(B,$,fe,_e,Pe,xe,ke,Re){const Te=(3*fe-2*B-ke)**2,Ne=(3*_e-2*$-Re)**2,Ie=(3*Pe-B-2*ke)**2,Le=(3*xe-$-2*Re)**2;return Math.max(Te,Ie)+Math.max(Ne,Le)<=10},ne=new WeakSet,Rt=function(){let B=1/0,$=-1/0,fe=1/0,_e=-1/0;for(const Pe of this.paths)for(const[xe,ke,Re,Me]of Pe){const Te=n.Util.bezierBoundingBox(...xe,...ke,...Re,...Me);B=Math.min(B,Te[0]),fe=Math.min(fe,Te[1]),$=Math.max($,Te[2]),_e=Math.max(_e,Te[3])}return[B,fe,$,_e]},de=new WeakSet,ht=function(){return k(this,u)?Math.ceil(this.thickness*this.parentScale):0},me=new WeakSet,et=function(B=!1){if(this.isEmpty())return;if(!k(this,u)){ce(this,Se,Ge).call(this);return}const $=ce(this,ne,Rt).call(this),fe=ce(this,de,ht).call(this);ge(this,L,Math.max(D,$[2]-$[0])),ge(this,_,Math.max(D,$[3]-$[1]));const _e=Math.ceil(fe+k(this,L)*this.scaleFactor),Pe=Math.ceil(fe+k(this,_)*this.scaleFactor),[xe,ke]=this.parentDimensions;this.width=_e/xe,this.height=Pe/ke,ge(this,v,_e/Pe),ce(this,te,kt).call(this);const Re=this.translationX,Me=this.translationY;this.translationX=-$[0],this.translationY=-$[1],ce(this,q,Ze).call(this),ce(this,Se,Ge).call(this),ge(this,S,_e),ge(this,o,Pe),this.setDims(_e,Pe);const Te=B?fe/this.scaleFactor/2:0;this.translate(Re-this.translationX-Te,Me-this.translationY-Te)},te=new WeakSet,kt=function(){const{style:B}=this.div;k(this,v)>=1?(B.minHeight=`${D}px`,B.minWidth=`${Math.round(k(this,v)*D)}px`):(B.minWidth=`${D}px`,B.minHeight=`${Math.round(D/k(this,v))}px`)},re(T,x),De(T,"_defaultColor",null),De(T,"_defaultOpacity",1),De(T,"_defaultThickness",1),De(T,"_l10nPromise"),De(T,"_type","ink"),t.InkEditor=T},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const n=s(31);t.fitCurve=n},e=>{function t(w,A,u){if(!Array.isArray(w))throw new TypeError("First argument should be an array");if(w.forEach(S=>{if(!Array.isArray(S)||S.some(o=>typeof o!="number")||S.length!==w[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),w=w.filter((S,o)=>o===0||!S.every((g,m)=>g===w[o-1][m])),w.length<2)return[];const R=w.length,I=L(w[1],w[0]),N=L(w[R-2],w[R-1]);return s(w,I,N,A,u)}function s(w,A,u,R,I){var S,o,g,m,c,E,H,f,z,J,se,ie,oe;if(w.length===2)return ie=O.vectorLen(O.subtract(w[0],w[1]))/3,S=[w[0],O.addArrays(w[0],O.mulItems(A,ie)),O.addArrays(w[1],O.mulItems(u,ie)),w[1]],[S];if(o=D(w),[S,m,E]=n(w,o,o,A,u,I),m===0||m<R)return[S];if(m<R*R)for(g=o,c=m,H=E,oe=0;oe<20;oe++){if(g=l(S,w,g),[S,m,E]=n(w,o,g,A,u,I),m<R)return[S];if(E===H){let he=m/c;if(he>.9999&&he<1.0001)break}c=m,H=E}return se=[],f=O.subtract(w[E-1],w[E+1]),f.every(he=>he===0)&&(f=O.subtract(w[E-1],w[E]),[f[0],f[1]]=[-f[1],f[0]]),z=O.normalize(f),J=O.mulItems(z,-1),se=se.concat(s(w.slice(0,E+1),A,z,R,I)),se=se.concat(s(w.slice(E),J,u,R,I)),se}function n(w,A,u,R,I,N){var S,o,g;return S=i(w,u,R,I),[o,g]=T(w,S,A),N&&N({bez:S,points:w,params:A,maxErr:o,maxPoint:g}),[S,o,g]}function i(w,A,u,R){var I,N,S,o,g,m,c,E,H,f,z,J,se,ie,oe,he,ae,pe=w[0],Ae=w[w.length-1];for(I=[pe,null,null,Ae],N=O.zeros_Xx2x2(A.length),se=0,ie=A.length;se<ie;se++)he=A[se],ae=1-he,S=N[se],S[0]=O.mulItems(u,3*he*(ae*ae)),S[1]=O.mulItems(R,3*ae*(he*he));for(o=[[0,0],[0,0]],g=[0,0],se=0,ie=w.length;se<ie;se++)he=A[se],S=N[se],o[0][0]+=O.dot(S[0],S[0]),o[0][1]+=O.dot(S[0],S[1]),o[1][0]+=O.dot(S[0],S[1]),o[1][1]+=O.dot(S[1],S[1]),oe=O.subtract(w[se],M.q([pe,pe,Ae,Ae],he)),g[0]+=O.dot(S[0],oe),g[1]+=O.dot(S[1],oe);return m=o[0][0]*o[1][1]-o[1][0]*o[0][1],c=o[0][0]*g[1]-o[1][0]*g[0],E=g[0]*o[1][1]-g[1]*o[0][1],H=m===0?0:E/m,f=m===0?0:c/m,J=O.vectorLen(O.subtract(pe,Ae)),z=1e-6*J,H<z||f<z?(I[1]=O.addArrays(pe,O.mulItems(u,J/3)),I[2]=O.addArrays(Ae,O.mulItems(R,J/3))):(I[1]=O.addArrays(pe,O.mulItems(u,H)),I[2]=O.addArrays(Ae,O.mulItems(R,f))),I}function l(w,A,u){return u.map((R,I)=>y(w,A[I],R))}function y(w,A,u){var R=O.subtract(M.q(w,u),A),I=M.qprime(w,u),N=O.mulMatrix(R,I),S=O.sum(O.squareItems(I))+2*O.mulMatrix(R,M.qprimeprime(w,u));return S===0?u:u-N/S}function D(w){var A=[],u,R,I;return w.forEach((N,S)=>{u=S?R+O.vectorLen(O.subtract(N,I)):0,A.push(u),R=u,I=N}),A=A.map(N=>N/R),A}function T(w,A,u){var R,I,N,S,o,g,m,c;I=0,N=Math.floor(w.length/2);const E=v(A,10);for(o=0,g=w.length;o<g;o++)m=w[o],c=_(A,u[o],E,10),S=O.subtract(M.q(A,c),m),R=S[0]*S[0]+S[1]*S[1],R>I&&(I=R,N=o);return[I,N]}var v=function(w,A){for(var u,R=[0],I=w[0],N=0,S=1;S<=A;S++)u=M.q(w,S/A),N+=O.vectorLen(O.subtract(u,I)),R.push(N),I=u;return R=R.map(o=>o/N),R};function _(w,A,u,R){if(A<0)return 0;if(A>1)return 1;for(var I,N,S,o,g,m=1;m<=R;m++)if(A<=u[m]){o=(m-1)/R,S=m/R,N=u[m-1],I=u[m],g=(A-N)/(I-N)*(S-o)+o;break}return g}function L(w,A){return O.normalize(O.subtract(w,A))}class O{static zeros_Xx2x2(A){for(var u=[];A--;)u.push([0,0]);return u}static mulItems(A,u){return A.map(R=>R*u)}static mulMatrix(A,u){return A.reduce((R,I,N)=>R+I*u[N],0)}static subtract(A,u){return A.map((R,I)=>R-u[I])}static addArrays(A,u){return A.map((R,I)=>R+u[I])}static addItems(A,u){return A.map(R=>R+u)}static sum(A){return A.reduce((u,R)=>u+R)}static dot(A,u){return O.mulMatrix(A,u)}static vectorLen(A){return Math.hypot(...A)}static divItems(A,u){return A.map(R=>R/u)}static squareItems(A){return A.map(u=>u*u)}static normalize(A){return this.divItems(A,this.vectorLen(A))}}class M{static q(A,u){var R=1-u,I=O.mulItems(A[0],R*R*R),N=O.mulItems(A[1],3*R*R*u),S=O.mulItems(A[2],3*R*u*u),o=O.mulItems(A[3],u*u*u);return O.addArrays(O.addArrays(I,N),O.addArrays(S,o))}static qprime(A,u){var R=1-u,I=O.mulItems(O.subtract(A[1],A[0]),3*R*R),N=O.mulItems(O.subtract(A[2],A[1]),6*R*u),S=O.mulItems(O.subtract(A[3],A[2]),3*u*u);return O.addArrays(O.addArrays(I,N),S)}static qprimeprime(A,u){return O.addArrays(O.mulItems(O.addArrays(O.subtract(A[2],O.mulItems(A[1],2)),A[0]),6*(1-u)),O.mulItems(O.addArrays(O.subtract(A[3],O.mulItems(A[2],2)),A[1]),6*u))}}e.exports=t,e.exports.fitCubic=s,e.exports.createTangent=L},(e,t,s)=>{var Se,Ye,C,rn,G,Ft,Y,Ot;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var n=s(1),i=s(6),l=s(3),y=s(33),D=s(34);const T=1e3,v=9,_=new WeakSet;function L(b){return{width:b[2]-b[0],height:b[3]-b[1]}}class O{static create(r){switch(r.data.annotationType){case n.AnnotationType.LINK:return new w(r);case n.AnnotationType.TEXT:return new A(r);case n.AnnotationType.WIDGET:switch(r.data.fieldType){case"Tx":return new R(r);case"Btn":return r.data.radioButton?new N(r):r.data.checkBox?new I(r):new S(r);case"Ch":return new o(r)}return new u(r);case n.AnnotationType.POPUP:return new g(r);case n.AnnotationType.FREETEXT:return new c(r);case n.AnnotationType.LINE:return new E(r);case n.AnnotationType.SQUARE:return new H(r);case n.AnnotationType.CIRCLE:return new f(r);case n.AnnotationType.POLYLINE:return new z(r);case n.AnnotationType.CARET:return new se(r);case n.AnnotationType.INK:return new ie(r);case n.AnnotationType.POLYGON:return new J(r);case n.AnnotationType.HIGHLIGHT:return new oe(r);case n.AnnotationType.UNDERLINE:return new he(r);case n.AnnotationType.SQUIGGLY:return new ae(r);case n.AnnotationType.STRIKEOUT:return new pe(r);case n.AnnotationType.STAMP:return new Ae(r);case n.AnnotationType.FILEATTACHMENT:return new ve(r);default:return new M(r)}}}class M{constructor(r,{isRenderable:a=!1,ignoreBorder:h=!1,createQuadrilaterals:x=!1}={}){this.isRenderable=a,this.data=r.data,this.layer=r.layer,this.page=r.page,this.viewport=r.viewport,this.linkService=r.linkService,this.downloadManager=r.downloadManager,this.imageResourcesPath=r.imageResourcesPath,this.renderForms=r.renderForms,this.svgFactory=r.svgFactory,this.annotationStorage=r.annotationStorage,this.enableScripting=r.enableScripting,this.hasJSActions=r.hasJSActions,this._fieldObjects=r.fieldObjects,a&&(this.container=this._createContainer(h)),x&&(this.quadrilaterals=this._createQuadrilaterals(h))}_createContainer(r=!1){const{data:a,page:h,viewport:x}=this,F=document.createElement("section");F.setAttribute("data-annotation-id",a.id),a.noRotate&&F.classList.add("norotate");const{pageWidth:U,pageHeight:X,pageX:W,pageY:Z}=x.rawDims,{width:ee,height:Q}=L(a.rect),ne=n.Util.normalizeRect([a.rect[0],h.view[3]-a.rect[1]+h.view[1],a.rect[2],h.view[3]-a.rect[3]+h.view[1]]);if(!r&&a.borderStyle.width>0){F.style.borderWidth=`${a.borderStyle.width}px`;const de=a.borderStyle.horizontalCornerRadius,be=a.borderStyle.verticalCornerRadius;if(de>0||be>0){const we=`calc(${de}px * var(--scale-factor)) / calc(${be}px * var(--scale-factor))`;F.style.borderRadius=we}else if(this instanceof N){const we=`calc(${ee}px * var(--scale-factor)) / calc(${Q}px * var(--scale-factor))`;F.style.borderRadius=we}switch(a.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:F.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:F.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:F.style.borderBottomStyle="solid";break}const me=a.borderColor||null;me?F.style.borderColor=n.Util.makeHexColor(me[0]|0,me[1]|0,me[2]|0):F.style.borderWidth=0}F.style.left=`${100*(ne[0]-W)/U}%`,F.style.top=`${100*(ne[1]-Z)/X}%`;const{rotation:le}=a;return a.hasOwnCanvas||le===0?(F.style.width=`${100*ee/U}%`,F.style.height=`${100*Q/X}%`):this.setRotation(le,F),F}setRotation(r,a=this.container){const{pageWidth:h,pageHeight:x}=this.viewport.rawDims,{width:F,height:U}=L(this.data.rect);let X,W;r%180===0?(X=100*F/h,W=100*U/x):(X=100*U/h,W=100*F/x),a.style.width=`${X}%`,a.style.height=`${W}%`,a.setAttribute("data-main-rotation",(360-r)%360)}get _commonActions(){const r=(a,h,x)=>{const F=x.detail[a];x.target.style[h]=y.ColorConverters[`${F[0]}_HTML`](F.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:a=>{const h=a.detail.display%2===1;this.container.style.visibility=h?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:h,print:a.detail.display===0||a.detail.display===3})},print:a=>{this.annotationStorage.setValue(this.data.id,{print:a.detail.print})},hidden:a=>{this.container.style.visibility=a.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:a.detail.hidden})},focus:a=>{setTimeout(()=>a.target.focus({preventScroll:!1}),0)},userName:a=>{a.target.title=a.detail.userName},readonly:a=>{a.detail.readonly?a.target.setAttribute("readonly",""):a.target.removeAttribute("readonly")},required:a=>{this._setRequired(a.target,a.detail.required)},bgColor:a=>{r("bgColor","backgroundColor",a)},fillColor:a=>{r("fillColor","backgroundColor",a)},fgColor:a=>{r("fgColor","color",a)},textColor:a=>{r("textColor","color",a)},borderColor:a=>{r("borderColor","borderColor",a)},strokeColor:a=>{r("strokeColor","borderColor",a)},rotation:a=>{const h=a.detail.rotation;this.setRotation(h),this.annotationStorage.setValue(this.data.id,{rotation:h})}})}_dispatchEventFromSandbox(r,a){const h=this._commonActions;for(const x of Object.keys(a.detail)){const F=r[x]||h[x];F==null||F(a)}}_setDefaultPropertiesFromJS(r){if(!this.enableScripting)return;const a=this.annotationStorage.getRawValue(this.data.id);if(!a)return;const h=this._commonActions;for(const[x,F]of Object.entries(a)){const U=h[x];if(U){const X={detail:{[x]:F},target:r};U(X),delete a[x]}}}_createQuadrilaterals(r=!1){if(!this.data.quadPoints)return null;const a=[],h=this.data.rect;for(const x of this.data.quadPoints)this.data.rect=[x[2].x,x[2].y,x[1].x,x[1].y],a.push(this._createContainer(r));return this.data.rect=h,a}_createPopup(r,a){let h=this.container;this.quadrilaterals&&(r||(r=this.quadrilaterals),h=this.quadrilaterals[0]),r||(r=document.createElement("div"),r.classList.add("popupTriggerArea"),h.append(r));const F=new m({container:h,trigger:r,color:a.color,titleObj:a.titleObj,modificationDate:a.modificationDate,contentsObj:a.contentsObj,richText:a.richText,hideWrapper:!0}).render();F.style.left="100%",h.append(F)}_renderQuadrilaterals(r){for(const a of this.quadrilaterals)a.classList.add(r);return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(r,a=null){const h=[];if(this._fieldObjects){const x=this._fieldObjects[r];if(x)for(const{page:F,id:U,exportValues:X}of x){if(F===-1||U===a)continue;const W=typeof X=="string"?X:null,Z=document.querySelector(`[data-element-id="${U}"]`);if(Z&&!_.has(Z)){(0,n.warn)(`_getElementsByName - element not allowed: ${U}`);continue}h.push({id:U,exportValue:W,domElement:Z})}return h}for(const x of document.getElementsByName(r)){const{exportValue:F}=x,U=x.getAttribute("data-element-id");U!==a&&_.has(x)&&h.push({id:U,exportValue:F,domElement:x})}return h}}class w extends M{constructor(a,h=null){super(a,{isRenderable:!0,ignoreBorder:!!(h!=null&&h.ignoreBorder),createQuadrilaterals:!0});re(this,Se);re(this,C);this.isTooltipOnly=a.data.isTooltipOnly}render(){const{data:a,linkService:h}=this,x=document.createElement("a");x.setAttribute("data-element-id",a.id);let F=!1;return a.url?(h.addLinkAttributes(x,a.url,a.newWindow),F=!0):a.action?(this._bindNamedAction(x,a.action),F=!0):a.attachment?(this._bindAttachment(x,a.attachment),F=!0):a.setOCGState?(ce(this,C,rn).call(this,x,a.setOCGState),F=!0):a.dest?(this._bindLink(x,a.dest),F=!0):(a.actions&&(a.actions.Action||a.actions["Mouse Up"]||a.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(x,a),F=!0),a.resetForm?(this._bindResetFormAction(x,a.resetForm),F=!0):this.isTooltipOnly&&!F&&(this._bindLink(x,""),F=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((U,X)=>{const W=X===0?x:x.cloneNode();return U.append(W),U}):(this.container.classList.add("linkAnnotation"),F&&this.container.append(x),this.container)}_bindLink(a,h){a.href=this.linkService.getDestinationHash(h),a.onclick=()=>(h&&this.linkService.goToDestination(h),!1),(h||h==="")&&ce(this,Se,Ye).call(this)}_bindNamedAction(a,h){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.linkService.executeNamedAction(h),!1),ce(this,Se,Ye).call(this)}_bindAttachment(a,h){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>{var x;return(x=this.downloadManager)==null||x.openOrDownloadData(this.container,h.content,h.filename),!1},ce(this,Se,Ye).call(this)}_bindJSAction(a,h){a.href=this.linkService.getAnchorUrl("");const x=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const F of Object.keys(h.actions)){const U=x.get(F);U&&(a[U]=()=>{var X;return(X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h.id,name:F}}),!1})}a.onclick||(a.onclick=()=>!1),ce(this,Se,Ye).call(this)}_bindResetFormAction(a,h){const x=a.onclick;if(x||(a.href=this.linkService.getAnchorUrl("")),ce(this,Se,Ye).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),x||(a.onclick=()=>!1);return}a.onclick=()=>{var Q;x==null||x();const{fields:F,refs:U,include:X}=h,W=[];if(F.length!==0||U.length!==0){const ne=new Set(U);for(const le of F){const de=this._fieldObjects[le]||[];for(const{id:be}of de)ne.add(be)}for(const le of Object.values(this._fieldObjects))for(const de of le)ne.has(de.id)===X&&W.push(de)}else for(const ne of Object.values(this._fieldObjects))W.push(...ne);const Z=this.annotationStorage,ee=[];for(const ne of W){const{id:le}=ne;switch(ee.push(le),ne.type){case"text":{const be=ne.defaultValue||"";Z.setValue(le,{value:be});break}case"checkbox":case"radiobutton":{const be=ne.defaultValue===ne.exportValues;Z.setValue(le,{value:be});break}case"combobox":case"listbox":{const be=ne.defaultValue||"";Z.setValue(le,{value:be});break}default:continue}const de=document.querySelector(`[data-element-id="${le}"]`);if(de){if(!_.has(de)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${le}`);continue}}else continue;de.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ee,name:"ResetForm"}})),!1}}}Se=new WeakSet,Ye=function(){this.container.setAttribute("data-internal-link","")},C=new WeakSet,rn=function(a,h){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.linkService.executeSetOCGState(h),!1),ce(this,Se,Ye).call(this)};class A extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a})}render(){this.container.classList.add("textAnnotation");const r=document.createElement("img");return r.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",r.alt="[{{type}} Annotation]",r.dataset.l10nId="text_annotation_type",r.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(r,this.data),this.container.append(r),this.container}}class u extends M{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(r){var a;this.data.hasOwnCanvas&&(((a=r.previousSibling)==null?void 0:a.nodeName)==="CANVAS"&&(r.previousSibling.hidden=!0),r.hidden=!1)}_getKeyModifier(r){const{isWin:a,isMac:h}=n.FeatureTest.platform;return a&&r.ctrlKey||h&&r.metaKey}_setEventListener(r,a,h,x){a.includes("mouse")?r.addEventListener(a,F=>{var U;(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:h,value:x(F),shift:F.shiftKey,modifier:this._getKeyModifier(F)}})}):r.addEventListener(a,F=>{var U;(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:h,value:x(F)}})})}_setEventListeners(r,a,h){var x;for(const[F,U]of a)(U==="Action"||(x=this.data.actions)!=null&&x[U])&&this._setEventListener(r,F,U,h)}_setBackgroundColor(r){const a=this.data.backgroundColor||null;r.style.backgroundColor=a===null?"transparent":n.Util.makeHexColor(a[0],a[1],a[2])}_setTextStyle(r){const a=["left","center","right"],{fontColor:h}=this.data.defaultAppearanceData,x=this.data.defaultAppearanceData.fontSize||v,F=r.style;let U;const X=2,W=Z=>Math.round(10*Z)/10;if(this.data.multiLine){const Z=Math.abs(this.data.rect[3]-this.data.rect[1]-X),ee=Math.round(Z/(n.LINE_FACTOR*x))||1,Q=Z/ee;U=Math.min(x,W(Q/n.LINE_FACTOR))}else{const Z=Math.abs(this.data.rect[3]-this.data.rect[1]-X);U=Math.min(x,W(Z/n.LINE_FACTOR))}F.fontSize=`calc(${U}px * var(--scale-factor))`,F.color=n.Util.makeHexColor(h[0],h[1],h[2]),this.data.textAlignment!==null&&(F.textAlign=a[this.data.textAlignment])}_setRequired(r,a){a?r.setAttribute("required",!0):r.removeAttribute("required"),r.setAttribute("aria-required",a)}}class R extends u{constructor(r){const a=r.renderForms||!r.data.hasAppearance&&!!r.data.fieldValue;super(r,{isRenderable:a})}setPropertyOnSiblings(r,a,h,x){const F=this.annotationStorage;for(const U of this._getElementsByName(r.name,r.id))U.domElement&&(U.domElement[a]=h),F.setValue(U.id,{[x]:h})}render(){var x;const r=this.annotationStorage,a=this.data.id;this.container.classList.add("textWidgetAnnotation");let h=null;if(this.renderForms){const F=r.getValue(a,{value:this.data.fieldValue});let U=F.formattedValue||F.value||"";const X=r.getValue(a,{charLimit:this.data.maxLen}).charLimit;X&&U.length>X&&(U=U.slice(0,X));const W={userValue:U,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(h=document.createElement("textarea"),h.textContent=U,this.data.doNotScroll&&(h.style.overflowY="hidden")):(h=document.createElement("input"),h.type="text",h.setAttribute("value",U),this.data.doNotScroll&&(h.style.overflowX="hidden")),this.data.hasOwnCanvas&&(h.hidden=!0),_.add(h),h.setAttribute("data-element-id",a),h.disabled=this.data.readOnly,h.name=this.data.fieldName,h.tabIndex=T,this._setRequired(h,this.data.required),X&&(h.maxLength=X),h.addEventListener("input",ee=>{r.setValue(a,{value:ee.target.value}),this.setPropertyOnSiblings(h,"value",ee.target.value,"value")}),h.addEventListener("resetform",ee=>{const Q=this.data.defaultFieldValue??"";h.value=W.userValue=Q,W.formattedValue=null});let Z=ee=>{const{formattedValue:Q}=W;Q!=null&&(ee.target.value=Q),ee.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){h.addEventListener("focus",Q=>{const{target:ne}=Q;W.userValue&&(ne.value=W.userValue),W.lastCommittedValue=ne.value,W.commitKey=1}),h.addEventListener("updatefromsandbox",Q=>{this.showElementAndHideCanvas(Q.target);const ne={value(le){W.userValue=le.detail.value??"",r.setValue(a,{value:W.userValue.toString()}),le.target.value=W.userValue},formattedValue(le){const{formattedValue:de}=le.detail;W.formattedValue=de,de!=null&&le.target!==document.activeElement&&(le.target.value=de),r.setValue(a,{formattedValue:de})},selRange(le){le.target.setSelectionRange(...le.detail.selRange)},charLimit:le=>{var we;const{charLimit:de}=le.detail,{target:be}=le;if(de===0){be.removeAttribute("maxLength");return}be.setAttribute("maxLength",de);let me=W.userValue;!me||me.length<=de||(me=me.slice(0,de),be.value=W.userValue=me,r.setValue(a,{value:me}),(we=this.linkService.eventBus)==null||we.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:me,willCommit:!0,commitKey:1,selStart:be.selectionStart,selEnd:be.selectionEnd}}))}};this._dispatchEventFromSandbox(ne,Q)}),h.addEventListener("keydown",Q=>{var de;W.commitKey=1;let ne=-1;if(Q.key==="Escape"?ne=0:Q.key==="Enter"&&!this.data.multiLine?ne=2:Q.key==="Tab"&&(W.commitKey=3),ne===-1)return;const{value:le}=Q.target;W.lastCommittedValue!==le&&(W.lastCommittedValue=le,W.userValue=le,(de=this.linkService.eventBus)==null||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:le,willCommit:!0,commitKey:ne,selStart:Q.target.selectionStart,selEnd:Q.target.selectionEnd}}))});const ee=Z;Z=null,h.addEventListener("blur",Q=>{var le;if(!Q.relatedTarget)return;const{value:ne}=Q.target;W.userValue=ne,W.lastCommittedValue!==ne&&((le=this.linkService.eventBus)==null||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:ne,willCommit:!0,commitKey:W.commitKey,selStart:Q.target.selectionStart,selEnd:Q.target.selectionEnd}})),ee(Q)}),(x=this.data.actions)!=null&&x.Keystroke&&h.addEventListener("beforeinput",Q=>{var ye;W.lastCommittedValue=null;const{data:ne,target:le}=Q,{value:de,selectionStart:be,selectionEnd:me}=le;let we=be,te=me;switch(Q.inputType){case"deleteWordBackward":{const Ee=de.substring(0,be).match(/\w*[^\w]*$/);Ee&&(we-=Ee[0].length);break}case"deleteWordForward":{const Ee=de.substring(be).match(/^[^\w]*\w*/);Ee&&(te+=Ee[0].length);break}case"deleteContentBackward":be===me&&(we-=1);break;case"deleteContentForward":be===me&&(te+=1);break}Q.preventDefault(),(ye=this.linkService.eventBus)==null||ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:de,change:ne||"",willCommit:!1,selStart:we,selEnd:te}})}),this._setEventListeners(h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Q=>Q.target.value)}if(Z&&h.addEventListener("blur",Z),this.data.comb){const Q=(this.data.rect[2]-this.data.rect[0])/X;h.classList.add("comb"),h.style.letterSpacing=`calc(${Q}px * var(--scale-factor) - 1ch)`}}else h=document.createElement("div"),h.textContent=this.data.fieldValue,h.style.verticalAlign="middle",h.style.display="table-cell";return this._setTextStyle(h),this._setBackgroundColor(h),this._setDefaultPropertiesFromJS(h),this.container.append(h),this.container}}class I extends u{constructor(r){super(r,{isRenderable:r.renderForms})}render(){const r=this.annotationStorage,a=this.data,h=a.id;let x=r.getValue(h,{value:a.exportValue===a.fieldValue}).value;typeof x=="string"&&(x=x!=="Off",r.setValue(h,{value:x})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const F=document.createElement("input");return _.add(F),F.setAttribute("data-element-id",h),F.disabled=a.readOnly,this._setRequired(F,this.data.required),F.type="checkbox",F.name=a.fieldName,x&&F.setAttribute("checked",!0),F.setAttribute("exportValue",a.exportValue),F.tabIndex=T,F.addEventListener("change",U=>{const{name:X,checked:W}=U.target;for(const Z of this._getElementsByName(X,h)){const ee=W&&Z.exportValue===a.exportValue;Z.domElement&&(Z.domElement.checked=ee),r.setValue(Z.id,{value:ee})}r.setValue(h,{value:W})}),F.addEventListener("resetform",U=>{const X=a.defaultFieldValue||"Off";U.target.checked=X===a.exportValue}),this.enableScripting&&this.hasJSActions&&(F.addEventListener("updatefromsandbox",U=>{const X={value(W){W.target.checked=W.detail.value!=="Off",r.setValue(h,{value:W.target.checked})}};this._dispatchEventFromSandbox(X,U)}),this._setEventListeners(F,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],U=>U.target.checked)),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class N extends u{constructor(r){super(r,{isRenderable:r.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const r=this.annotationStorage,a=this.data,h=a.id;let x=r.getValue(h,{value:a.fieldValue===a.buttonValue}).value;typeof x=="string"&&(x=x!==a.buttonValue,r.setValue(h,{value:x}));const F=document.createElement("input");if(_.add(F),F.setAttribute("data-element-id",h),F.disabled=a.readOnly,this._setRequired(F,this.data.required),F.type="radio",F.name=a.fieldName,x&&F.setAttribute("checked",!0),F.tabIndex=T,F.addEventListener("change",U=>{const{name:X,checked:W}=U.target;for(const Z of this._getElementsByName(X,h))r.setValue(Z.id,{value:!1});r.setValue(h,{value:W})}),F.addEventListener("resetform",U=>{const X=a.defaultFieldValue;U.target.checked=X!=null&&X===a.buttonValue}),this.enableScripting&&this.hasJSActions){const U=a.buttonValue;F.addEventListener("updatefromsandbox",X=>{const W={value:Z=>{const ee=U===Z.detail.value;for(const Q of this._getElementsByName(Z.target.name)){const ne=ee&&Q.id===h;Q.domElement&&(Q.domElement.checked=ne),r.setValue(Q.id,{value:ne})}}};this._dispatchEventFromSandbox(W,X)}),this._setEventListeners(F,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.checked)}return this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class S extends w{constructor(r){super(r,{ignoreBorder:r.data.hasAppearance})}render(){const r=super.render();r.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(r.title=this.data.alternativeText);const a=r.lastChild;return this.enableScripting&&this.hasJSActions&&a&&(this._setDefaultPropertiesFromJS(a),a.addEventListener("updatefromsandbox",h=>{this._dispatchEventFromSandbox({},h)})),r}}class o extends u{constructor(r){super(r,{isRenderable:r.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const r=this.annotationStorage,a=this.data.id,h=r.getValue(a,{value:this.data.fieldValue}),x=document.createElement("select");_.add(x),x.setAttribute("data-element-id",a),x.disabled=this.data.readOnly,this._setRequired(x,this.data.required),x.name=this.data.fieldName,x.tabIndex=T;let F=this.data.combo&&this.data.options.length>0;this.data.combo||(x.size=this.data.options.length,this.data.multiSelect&&(x.multiple=!0)),x.addEventListener("resetform",ee=>{const Q=this.data.defaultFieldValue;for(const ne of x.options)ne.selected=ne.value===Q});for(const ee of this.data.options){const Q=document.createElement("option");Q.textContent=ee.displayValue,Q.value=ee.exportValue,h.value.includes(ee.exportValue)&&(Q.setAttribute("selected",!0),F=!1),x.append(Q)}let U=null;if(F){const ee=document.createElement("option");ee.value=" ",ee.setAttribute("hidden",!0),ee.setAttribute("selected",!0),x.prepend(ee),U=()=>{ee.remove(),x.removeEventListener("input",U),U=null},x.addEventListener("input",U)}const X=ee=>{const Q=ee?"value":"textContent",{options:ne,multiple:le}=x;return le?Array.prototype.filter.call(ne,de=>de.selected).map(de=>de[Q]):ne.selectedIndex===-1?null:ne[ne.selectedIndex][Q]};let W=X(!1);const Z=ee=>{const Q=ee.target.options;return Array.prototype.map.call(Q,ne=>({displayValue:ne.textContent,exportValue:ne.value}))};return this.enableScripting&&this.hasJSActions?(x.addEventListener("updatefromsandbox",ee=>{const Q={value(ne){U==null||U();const le=ne.detail.value,de=new Set(Array.isArray(le)?le:[le]);for(const be of x.options)be.selected=de.has(be.value);r.setValue(a,{value:X(!0)}),W=X(!1)},multipleSelection(ne){x.multiple=!0},remove(ne){const le=x.options,de=ne.detail.remove;le[de].selected=!1,x.remove(de),le.length>0&&Array.prototype.findIndex.call(le,me=>me.selected)===-1&&(le[0].selected=!0),r.setValue(a,{value:X(!0),items:Z(ne)}),W=X(!1)},clear(ne){for(;x.length!==0;)x.remove(0);r.setValue(a,{value:null,items:[]}),W=X(!1)},insert(ne){const{index:le,displayValue:de,exportValue:be}=ne.detail.insert,me=x.children[le],we=document.createElement("option");we.textContent=de,we.value=be,me?me.before(we):x.append(we),r.setValue(a,{value:X(!0),items:Z(ne)}),W=X(!1)},items(ne){const{items:le}=ne.detail;for(;x.length!==0;)x.remove(0);for(const de of le){const{displayValue:be,exportValue:me}=de,we=document.createElement("option");we.textContent=be,we.value=me,x.append(we)}x.options.length>0&&(x.options[0].selected=!0),r.setValue(a,{value:X(!0),items:Z(ne)}),W=X(!1)},indices(ne){const le=new Set(ne.detail.indices);for(const de of ne.target.options)de.selected=le.has(de.index);r.setValue(a,{value:X(!0)}),W=X(!1)},editable(ne){ne.target.disabled=!ne.detail.editable}};this._dispatchEventFromSandbox(Q,ee)}),x.addEventListener("input",ee=>{var ne;const Q=X(!0);r.setValue(a,{value:Q}),ee.preventDefault(),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:W,changeEx:Q,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(x,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ee=>ee.target.value)):x.addEventListener("input",function(ee){r.setValue(a,{value:X(!0)})}),this.data.combo&&this._setTextStyle(x),this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}const j=class extends M{constructor(r){var x,F,U;const{data:a}=r,h=!j.IGNORE_TYPES.has(a.parentType)&&!!((x=a.titleObj)!=null&&x.str||(F=a.contentsObj)!=null&&F.str||(U=a.richText)!=null&&U.str);super(r,{isRenderable:h})}render(){this.container.classList.add("popupAnnotation");const r=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(r.length===0)return this.container;const a=new m({container:this.container,trigger:Array.from(r),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),h=this.page,x=n.Util.normalizeRect([this.data.parentRect[0],h.view[3]-this.data.parentRect[1]+h.view[1],this.data.parentRect[2],h.view[3]-this.data.parentRect[3]+h.view[1]]),F=x[0]+this.data.parentRect[2]-this.data.parentRect[0],U=x[1],{pageWidth:X,pageHeight:W,pageX:Z,pageY:ee}=this.viewport.rawDims;return this.container.style.left=`${100*(F-Z)/X}%`,this.container.style.top=`${100*(U-ee)/W}%`,this.container.append(a.render()),this.container}};let g=j;De(g,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class m{constructor(r){this.container=r.container,this.trigger=r.trigger,this.color=r.color,this.titleObj=r.titleObj,this.modificationDate=r.modificationDate,this.contentsObj=r.contentsObj,this.richText=r.richText,this.hideWrapper=r.hideWrapper||!1,this.pinned=!1}render(){var X,W;const a=document.createElement("div");a.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?a:this.container,this.hideElement.hidden=!0;const h=document.createElement("div");h.classList.add("popup");const x=this.color;if(x){const Z=.7*(255-x[0])+x[0],ee=.7*(255-x[1])+x[1],Q=.7*(255-x[2])+x[2];h.style.backgroundColor=n.Util.makeHexColor(Z|0,ee|0,Q|0)}const F=document.createElement("h1");F.dir=this.titleObj.dir,F.textContent=this.titleObj.str,h.append(F);const U=i.PDFDateString.toDateObject(this.modificationDate);if(U){const Z=document.createElement("span");Z.classList.add("popupDate"),Z.textContent="{{date}}, {{time}}",Z.dataset.l10nId="annotation_date_string",Z.dataset.l10nArgs=JSON.stringify({date:U.toLocaleDateString(),time:U.toLocaleTimeString()}),h.append(Z)}if((X=this.richText)!=null&&X.str&&(!((W=this.contentsObj)!=null&&W.str)||this.contentsObj.str===this.richText.str))D.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:h}),h.lastChild.classList.add("richText","popupContent");else{const Z=this._formatContents(this.contentsObj);h.append(Z)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Z of this.trigger)Z.addEventListener("click",this._toggle.bind(this)),Z.addEventListener("mouseover",this._show.bind(this,!1)),Z.addEventListener("mouseout",this._hide.bind(this,!1));return h.addEventListener("click",this._hide.bind(this,!0)),a.append(h),a}_formatContents({str:r,dir:a}){const h=document.createElement("p");h.classList.add("popupContent"),h.dir=a;const x=r.split(/(?:\r\n?|\n)/);for(let F=0,U=x.length;F<U;++F){const X=x[F];h.append(document.createTextNode(X)),F<U-1&&h.append(document.createElement("br"))}return h}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(r=!1){r&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(r=!0){r&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class c extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0}),this.textContent=r.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const r=document.createElement("div");r.classList.add("annotationTextContent"),r.setAttribute("role","comment");for(const a of this.textContent){const h=document.createElement("span");h.textContent=a,r.append(h)}this.container.append(r)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class E extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const r=this.data,{width:a,height:h}=L(r.rect),x=this.svgFactory.create(a,h,!0),F=this.svgFactory.createElement("svg:line");return F.setAttribute("x1",r.rect[2]-r.lineCoordinates[0]),F.setAttribute("y1",r.rect[3]-r.lineCoordinates[1]),F.setAttribute("x2",r.rect[2]-r.lineCoordinates[2]),F.setAttribute("y2",r.rect[3]-r.lineCoordinates[3]),F.setAttribute("stroke-width",r.borderStyle.width||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),x.append(F),this.container.append(x),this._createPopup(F,r),this.container}}class H extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const r=this.data,{width:a,height:h}=L(r.rect),x=this.svgFactory.create(a,h,!0),F=r.borderStyle.width,U=this.svgFactory.createElement("svg:rect");return U.setAttribute("x",F/2),U.setAttribute("y",F/2),U.setAttribute("width",a-F),U.setAttribute("height",h-F),U.setAttribute("stroke-width",F||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),x.append(U),this.container.append(x),this._createPopup(U,r),this.container}}class f extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const r=this.data,{width:a,height:h}=L(r.rect),x=this.svgFactory.create(a,h,!0),F=r.borderStyle.width,U=this.svgFactory.createElement("svg:ellipse");return U.setAttribute("cx",a/2),U.setAttribute("cy",h/2),U.setAttribute("rx",a/2-F/2),U.setAttribute("ry",h/2-F/2),U.setAttribute("stroke-width",F||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),x.append(U),this.container.append(x),this._createPopup(U,r),this.container}}class z extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const r=this.data,{width:a,height:h}=L(r.rect),x=this.svgFactory.create(a,h,!0);let F=[];for(const X of r.vertices){const W=X.x-r.rect[0],Z=r.rect[3]-X.y;F.push(W+","+Z)}F=F.join(" ");const U=this.svgFactory.createElement(this.svgElementName);return U.setAttribute("points",F),U.setAttribute("stroke-width",r.borderStyle.width||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),x.append(U),this.container.append(x),this._createPopup(U,r),this.container}}class J extends z{constructor(r){super(r),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class se extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ie extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const r=this.data,{width:a,height:h}=L(r.rect),x=this.svgFactory.create(a,h,!0);for(const F of r.inkLists){let U=[];for(const W of F){const Z=W.x-r.rect[0],ee=r.rect[3]-W.y;U.push(`${Z},${ee}`)}U=U.join(" ");const X=this.svgFactory.createElement(this.svgElementName);X.setAttribute("points",U),X.setAttribute("stroke-width",r.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),this._createPopup(X,r),x.append(X)}return this.container.append(x),this.container}}class oe extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class he extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class ae extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class pe extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class Ae extends M{constructor(r){var h,x,F;const a=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(x=r.data.contentsObj)!=null&&x.str||(F=r.data.richText)!=null&&F.str);super(r,{isRenderable:a,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ve extends M{constructor(r){var x;super(r,{isRenderable:!0});const{filename:a,content:h}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(a,!0),this.content=h,(x=this.linkService.eventBus)==null||x.dispatch("fileattachmentannotation",{source:this,filename:a,content:h})}render(){var a,h;this.container.classList.add("fileAttachmentAnnotation");let r;return this.data.hasAppearance?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),r.classList.add("popupTriggerArea"),r.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((a=this.data.titleObj)!=null&&a.str||(h=this.data.contentsObj)!=null&&h.str||this.data.richText)&&this._createPopup(r,this.data),this.container.append(r),this.container}_download(){var r;(r=this.downloadManager)==null||r.openOrDownloadData(this.container,this.content,this.filename)}}const d=class{static render(r){var W,Z;const{annotations:a,div:h,viewport:x,accessibilityManager:F}=r;(0,i.setLayerDimensions)(h,x);const U={data:null,layer:h,page:r.page,viewport:x,linkService:r.linkService,downloadManager:r.downloadManager,imageResourcesPath:r.imageResourcesPath||"",renderForms:r.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:r.annotationStorage||new l.AnnotationStorage,enableScripting:r.enableScripting===!0,hasJSActions:r.hasJSActions,fieldObjects:r.fieldObjects};let X=0;for(const ee of a){if(ee.noHTML)continue;if(ee.annotationType!==n.AnnotationType.POPUP){const{width:le,height:de}=L(ee.rect);if(le<=0||de<=0)continue}U.data=ee;const Q=O.create(U);if(!Q.isRenderable)continue;const ne=Q.render();if(ee.hidden&&(ne.style.visibility="hidden"),Array.isArray(ne))for(const le of ne)le.style.zIndex=X++,ce(W=d,G,Ft).call(W,le,ee.id,h,F);else ne.style.zIndex=X++,Q instanceof g?h.prepend(ne):ce(Z=d,G,Ft).call(Z,ne,ee.id,h,F)}ce(this,Y,Ot).call(this,h,r.annotationCanvasMap)}static update(r){const{annotationCanvasMap:a,div:h,viewport:x}=r;(0,i.setLayerDimensions)(h,{rotation:x.rotation}),ce(this,Y,Ot).call(this,h,a),h.hidden=!1}};let Ce=d;G=new WeakSet,Ft=function(r,a,h,x){const F=r.firstChild||r;F.id=`${i.AnnotationPrefix}${a}`,h.append(r),x==null||x.moveElementInDOM(h,r,F,!1)},Y=new WeakSet,Ot=function(r,a){if(a){for(const[h,x]of a){const F=r.querySelector(`[data-annotation-id="${h}"]`);if(!F)continue;const{firstChild:U}=F;U?U.nodeName==="CANVAS"?U.replaceWith(x):U.before(x):F.append(x)}a.clear()}},re(Ce,G),re(Ce,Y),t.AnnotationLayer=Ce},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function s(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}class n{static CMYK_G([l,y,D,T]){return["G",1-Math.min(1,.3*l+.59*D+.11*y+T)]}static G_CMYK([l]){return["CMYK",0,0,0,1-l]}static G_RGB([l]){return["RGB",l,l,l]}static G_HTML([l]){const y=s(l);return`#${y}${y}${y}`}static RGB_G([l,y,D]){return["G",.3*l+.59*y+.11*D]}static RGB_HTML([l,y,D]){const T=s(l),v=s(y),_=s(D);return`#${T}${v}${_}`}static T_HTML(){return"#00000000"}static CMYK_RGB([l,y,D,T]){return["RGB",1-Math.min(1,l+T),1-Math.min(1,D+T),1-Math.min(1,y+T)]}static CMYK_HTML(l){const y=this.CMYK_RGB(l).slice(1);return this.RGB_HTML(y)}static RGB_CMYK([l,y,D]){const T=1-l,v=1-y,_=1-D,L=Math.min(T,v,_);return["CMYK",T,v,_,L]}}t.ColorConverters=n},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=s(19);class i{static setupStorage(y,D,T,v,_){const L=v.getValue(D,{value:null});switch(T.name){case"textarea":if(L.value!==null&&(y.textContent=L.value),_==="print")break;y.addEventListener("input",O=>{v.setValue(D,{value:O.target.value})});break;case"input":if(T.attributes.type==="radio"||T.attributes.type==="checkbox"){if(L.value===T.attributes.xfaOn?y.setAttribute("checked",!0):L.value===T.attributes.xfaOff&&y.removeAttribute("checked"),_==="print")break;y.addEventListener("change",O=>{v.setValue(D,{value:O.target.checked?O.target.getAttribute("xfaOn"):O.target.getAttribute("xfaOff")})})}else{if(L.value!==null&&y.setAttribute("value",L.value),_==="print")break;y.addEventListener("input",O=>{v.setValue(D,{value:O.target.value})})}break;case"select":if(L.value!==null)for(const O of T.children)O.attributes.value===L.value&&(O.attributes.selected=!0);y.addEventListener("input",O=>{const M=O.target.options,w=M.selectedIndex===-1?"":M[M.selectedIndex].value;v.setValue(D,{value:w})});break}}static setAttributes({html:y,element:D,storage:T=null,intent:v,linkService:_}){const{attributes:L}=D,O=y instanceof HTMLAnchorElement;L.type==="radio"&&(L.name=`${L.name}-${v}`);for(const[M,w]of Object.entries(L))if(w!=null)switch(M){case"class":w.length&&y.setAttribute(M,w.join(" "));break;case"dataId":break;case"id":y.setAttribute("data-element-id",w);break;case"style":Object.assign(y.style,w);break;case"textContent":y.textContent=w;break;default:(!O||M!=="href"&&M!=="newWindow")&&y.setAttribute(M,w)}O&&_.addLinkAttributes(y,L.href,L.newWindow),T&&L.dataId&&this.setupStorage(y,L.dataId,D,T)}static render(y){var A;const D=y.annotationStorage,T=y.linkService,v=y.xfaHtml,_=y.intent||"display",L=document.createElement(v.name);v.attributes&&this.setAttributes({html:L,element:v,intent:_,linkService:T});const O=[[v,-1,L]],M=y.div;if(M.append(L),y.viewport){const u=`matrix(${y.viewport.transform.join(",")})`;M.style.transform=u}_!=="richText"&&M.setAttribute("class","xfaLayer xfaFont");const w=[];for(;O.length>0;){const[u,R,I]=O.at(-1);if(R+1===u.children.length){O.pop();continue}const N=u.children[++O.at(-1)[1]];if(N===null)continue;const{name:S}=N;if(S==="#text"){const g=document.createTextNode(N.value);w.push(g),I.append(g);continue}let o;if((A=N==null?void 0:N.attributes)!=null&&A.xmlns?o=document.createElementNS(N.attributes.xmlns,S):o=document.createElement(S),I.append(o),N.attributes&&this.setAttributes({html:o,element:N,storage:D,intent:_,linkService:T}),N.children&&N.children.length>0)O.push([N,-1,o]);else if(N.value){const g=document.createTextNode(N.value);n.XfaText.shouldBuildText(S)&&w.push(g),o.append(g)}}for(const u of M.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:w}}static update(y){const D=`matrix(${y.viewport.transform.join(",")})`;y.div.style.transform=D,y.div.hidden=!1}}t.XfaLayer=i},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=s(6),i=s(1),l=s(10);let y=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=y;{let A=function(o){let g=[];const m=[];for(const c of o){if(c.fn==="save"){g.push({fnId:92,fn:"group",items:[]}),m.push(g),g=g.at(-1).items;continue}c.fn==="restore"?g=m.pop():g.push(c)}return g},u=function(o){if(Number.isInteger(o))return o.toString();const g=o.toFixed(10);let m=g.length-1;if(g[m]!=="0")return g;do m--;while(g[m]==="0");return g.substring(0,g[m]==="."?m:m+1)},R=function(o){if(o[4]===0&&o[5]===0){if(o[1]===0&&o[2]===0)return o[0]===1&&o[3]===1?"":`scale(${u(o[0])} ${u(o[3])})`;if(o[0]===o[3]&&o[1]===-o[2]){const g=Math.acos(o[0])*180/Math.PI;return`rotate(${u(g)})`}}else if(o[0]===1&&o[1]===0&&o[2]===0&&o[3]===1)return`translate(${u(o[4])} ${u(o[5])})`;return`matrix(${u(o[0])} ${u(o[1])} ${u(o[2])} ${u(o[3])} ${u(o[4])} ${u(o[5])})`};const D={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},T="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/1999/xlink",_=["butt","round","square"],L=["miter","round","bevel"],O=function(o,g="",m=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!m)return URL.createObjectURL(new Blob([o],{type:g}));const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let E=`data:${g};base64,`;for(let H=0,f=o.length;H<f;H+=3){const z=o[H]&255,J=o[H+1]&255,se=o[H+2]&255,ie=z>>2,oe=(z&3)<<4|J>>4,he=H+1<f?(J&15)<<2|se>>6:64,ae=H+2<f?se&63:64;E+=c[ie]+c[oe]+c[he]+c[ae]}return E},M=function(){const o=new Uint8Array([137,80,78,71,13,10,26,10]),g=12,m=new Int32Array(256);for(let se=0;se<256;se++){let ie=se;for(let oe=0;oe<8;oe++)ie&1?ie=3988292384^ie>>1&2147483647:ie=ie>>1&2147483647;m[se]=ie}function c(se,ie,oe){let he=-1;for(let ae=ie;ae<oe;ae++){const pe=(he^se[ae])&255,Ae=m[pe];he=he>>>8^Ae}return he^-1}function E(se,ie,oe,he){let ae=he;const pe=ie.length;oe[ae]=pe>>24&255,oe[ae+1]=pe>>16&255,oe[ae+2]=pe>>8&255,oe[ae+3]=pe&255,ae+=4,oe[ae]=se.charCodeAt(0)&255,oe[ae+1]=se.charCodeAt(1)&255,oe[ae+2]=se.charCodeAt(2)&255,oe[ae+3]=se.charCodeAt(3)&255,ae+=4,oe.set(ie,ae),ae+=ie.length;const Ae=c(oe,he+4,ae);oe[ae]=Ae>>24&255,oe[ae+1]=Ae>>16&255,oe[ae+2]=Ae>>8&255,oe[ae+3]=Ae&255}function H(se,ie,oe){let he=1,ae=0;for(let pe=ie;pe<oe;++pe)he=(he+(se[pe]&255))%65521,ae=(ae+he)%65521;return ae<<16|he}function f(se){if(!l.isNodeJS)return z(se);try{let ie;parseInt(process.versions.node)>=8?ie=se:ie=Buffer.from(se);const oe=require$$5.deflateSync(ie,{level:9});return oe instanceof Uint8Array?oe:new Uint8Array(oe)}catch(ie){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ie)}return z(se)}function z(se){let ie=se.length;const oe=65535,he=Math.ceil(ie/oe),ae=new Uint8Array(2+ie+he*5+4);let pe=0;ae[pe++]=120,ae[pe++]=156;let Ae=0;for(;ie>oe;)ae[pe++]=0,ae[pe++]=255,ae[pe++]=255,ae[pe++]=0,ae[pe++]=0,ae.set(se.subarray(Ae,Ae+oe),pe),pe+=oe,Ae+=oe,ie-=oe;ae[pe++]=1,ae[pe++]=ie&255,ae[pe++]=ie>>8&255,ae[pe++]=~ie&65535&255,ae[pe++]=(~ie&65535)>>8&255,ae.set(se.subarray(Ae),pe),pe+=se.length-Ae;const ve=H(se,0,se.length);return ae[pe++]=ve>>24&255,ae[pe++]=ve>>16&255,ae[pe++]=ve>>8&255,ae[pe++]=ve&255,ae}function J(se,ie,oe,he){const ae=se.width,pe=se.height;let Ae,ve,Ce;const Se=se.data;switch(ie){case i.ImageKind.GRAYSCALE_1BPP:ve=0,Ae=1,Ce=ae+7>>3;break;case i.ImageKind.RGB_24BPP:ve=2,Ae=8,Ce=ae*3;break;case i.ImageKind.RGBA_32BPP:ve=6,Ae=8,Ce=ae*4;break;default:throw new Error("invalid format")}const K=new Uint8Array((1+Ce)*pe);let C=0,P=0;for(let d=0;d<pe;++d)K[C++]=0,K.set(Se.subarray(P,P+Ce),C),P+=Ce,C+=Ce;if(ie===i.ImageKind.GRAYSCALE_1BPP&&he){C=0;for(let d=0;d<pe;d++){C++;for(let b=0;b<Ce;b++)K[C++]^=255}}const j=new Uint8Array([ae>>24&255,ae>>16&255,ae>>8&255,ae&255,pe>>24&255,pe>>16&255,pe>>8&255,pe&255,Ae,ve,0,0,0]),G=f(K),V=o.length+g*3+j.length+G.length,Y=new Uint8Array(V);let q=0;return Y.set(o,q),q+=o.length,E("IHDR",j,Y,q),q+=g+j.length,E("IDATA",G,Y,q),q+=g+G.length,E("IEND",new Uint8Array(0),Y,q),O(Y,"image/png",oe)}return function(ie,oe,he){const ae=ie.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:ie.kind;return J(ie,ae,oe,he)}}();class w{constructor(){this.fontSizeScale=1,this.fontWeight=D.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=D.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(g,m){this.x=g,this.y=m}}let I=0,N=0,S=0;t.SVGGraphics=y=class{constructor(o,g,m=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new w,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=g,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!m,this._operatorIdMapping=[];for(const c in i.OPS)this._operatorIdMapping[i.OPS[c]]=c}getObject(o,g=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):g}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const g=o.fnArray,m=o.argsArray;for(let c=0,E=g.length;c<E;c++)if(g[c]===i.OPS.dependency)for(const H of m[c]){const f=H.startsWith("g_")?this.commonObjs:this.objs,z=new Promise(J=>{f.get(H,J)});this.current.dependencies.push(z)}return Promise.all(this.current.dependencies)}transform(o,g,m,c,E,H){const f=[o,g,m,c,E,H];this.transformMatrix=i.Util.transform(this.transformMatrix,f),this.tgrp=null}getSVG(o,g){this.viewport=g;const m=this._initialize(g);return this.loadDependencies(o).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),m))}convertOpList(o){const g=this._operatorIdMapping,m=o.argsArray,c=o.fnArray,E=[];for(let H=0,f=c.length;H<f;H++){const z=c[H];E.push({fnId:z,fn:g[z],args:m[H]})}return A(E)}executeOpTree(o){for(const g of o){const m=g.fn,c=g.fnId,E=g.args;switch(c|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(E);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(E[0],E[1]);break;case i.OPS.setFont:this.setFont(E);break;case i.OPS.showText:this.showText(E[0]);break;case i.OPS.showSpacedText:this.showText(E[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(E[0],E[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(E[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(E[0]);break;case i.OPS.setHScale:this.setHScale(E[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(E[0],E[1],E[2],E[3],E[4],E[5]);break;case i.OPS.setTextRise:this.setTextRise(E[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(E[0]);break;case i.OPS.setLineWidth:this.setLineWidth(E[0]);break;case i.OPS.setLineJoin:this.setLineJoin(E[0]);break;case i.OPS.setLineCap:this.setLineCap(E[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(E[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(E[0],E[1],E[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(E[0],E[1],E[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(E);break;case i.OPS.setFillColorN:this.setFillColorN(E);break;case i.OPS.shadingFill:this.shadingFill(E[0]);break;case i.OPS.setDash:this.setDash(E[0],E[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(E[0]);break;case i.OPS.setFlatness:this.setFlatness(E[0]);break;case i.OPS.setGState:this.setGState(E[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(E[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(E[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(E[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(E[0],E[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(E[0],E[1],E[2],E[3],E[4],E[5]);break;case i.OPS.constructPath:this.constructPath(E[0],E[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(g.items);break;default:(0,i.warn)(`Unimplemented operator ${m}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,g,m,c,E,H){const f=this.current;f.textMatrix=f.lineMatrix=[o,g,m,c,E,H],f.textMatrixScale=Math.hypot(o,g),f.x=f.lineX=0,f.y=f.lineY=0,f.xcoords=[],f.ycoords=[],f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${u(f.fontSize)}px`),f.tspan.setAttributeNS(null,"y",u(-f.y)),f.txtElement=this.svgFactory.createElement("svg:text"),f.txtElement.append(f.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=i.IDENTITY_MATRIX,o.lineMatrix=i.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,g){const m=this.current;m.x=m.lineX+=o,m.y=m.lineY+=g,m.xcoords=[],m.ycoords=[],m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${u(m.fontSize)}px`),m.tspan.setAttributeNS(null,"y",u(-m.y))}showText(o){const g=this.current,m=g.font,c=g.fontSize;if(c===0)return;const E=g.fontSizeScale,H=g.charSpacing,f=g.wordSpacing,z=g.fontDirection,J=g.textHScale*z,se=m.vertical,ie=se?1:-1,oe=m.defaultVMetrics,he=c*g.fontMatrix[0];let ae=0;for(const ve of o){if(ve===null){ae+=z*f;continue}else if(typeof ve=="number"){ae+=ie*ve*c/1e3;continue}const Ce=(ve.isSpace?f:0)+H,Se=ve.fontChar;let K,C,P=ve.width;if(se){let G;const V=ve.vmetric||oe;G=ve.vmetric?V[1]:P*.5,G=-G*he;const Y=V[2]*he;P=V?-V[0]:P,K=G/E,C=(ae+Y)/E}else K=ae/E,C=0;(ve.isInFont||m.missingFile)&&(g.xcoords.push(g.x+K),se&&g.ycoords.push(-g.y+C),g.tspan.textContent+=Se);let j;se?j=P*he-Ce*z:j=P*he+Ce*z,ae+=j}g.tspan.setAttributeNS(null,"x",g.xcoords.map(u).join(" ")),se?g.tspan.setAttributeNS(null,"y",g.ycoords.map(u).join(" ")):g.tspan.setAttributeNS(null,"y",u(-g.y)),se?g.y-=ae:g.x+=ae*J,g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${u(g.fontSize)}px`),g.fontStyle!==D.fontStyle&&g.tspan.setAttributeNS(null,"font-style",g.fontStyle),g.fontWeight!==D.fontWeight&&g.tspan.setAttributeNS(null,"font-weight",g.fontWeight);const pe=g.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(pe===i.TextRenderingMode.FILL||pe===i.TextRenderingMode.FILL_STROKE?(g.fillColor!==D.fillColor&&g.tspan.setAttributeNS(null,"fill",g.fillColor),g.fillAlpha<1&&g.tspan.setAttributeNS(null,"fill-opacity",g.fillAlpha)):g.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?g.tspan.setAttributeNS(null,"fill","transparent"):g.tspan.setAttributeNS(null,"fill","none"),pe===i.TextRenderingMode.STROKE||pe===i.TextRenderingMode.FILL_STROKE){const ve=1/(g.textMatrixScale||1);this._setStrokeAttributes(g.tspan,ve)}let Ae=g.textMatrix;g.textRise!==0&&(Ae=Ae.slice(),Ae[5]+=g.textRise),g.txtElement.setAttributeNS(null,"transform",`${R(Ae)} scale(${u(J)}, -1)`),g.txtElement.setAttributeNS(T,"xml:space","preserve"),g.txtElement.append(g.tspan),g.txtgrp.append(g.txtElement),this._ensureTransformGroup().append(g.txtElement)}setLeadingMoveText(o,g){this.setLeading(-g),this.moveText(o,g)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const g=O(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${g}); }
`}setFont(o){const g=this.current,m=this.commonObjs.get(o[0]);let c=o[1];g.font=m,this.embedFonts&&!m.missingFile&&!this.embeddedFonts[m.loadedName]&&(this.addFontStyle(m),this.embeddedFonts[m.loadedName]=m),g.fontMatrix=m.fontMatrix||i.FONT_IDENTITY_MATRIX;let E="normal";m.black?E="900":m.bold&&(E="bold");const H=m.italic?"italic":"normal";c<0?(c=-c,g.fontDirection=-1):g.fontDirection=1,g.fontSize=c,g.fontFamily=m.loadedName,g.fontWeight=E,g.fontStyle=H,g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"y",u(-g.y)),g.xcoords=[],g.ycoords=[]}endText(){var g;const o=this.current;o.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((g=o.txtElement)!=null&&g.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=_[o]}setLineJoin(o){this.current.lineJoin=L[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,g,m){this.current.strokeColor=i.Util.makeHexColor(o,g,m)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,g,m){this.current.fillColor=i.Util.makeHexColor(o,g,m),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const g=this.viewport.width,m=this.viewport.height,c=i.Util.inverseTransform(this.transformMatrix),E=i.Util.applyTransform([0,0],c),H=i.Util.applyTransform([0,m],c),f=i.Util.applyTransform([g,0],c),z=i.Util.applyTransform([g,m],c),J=Math.min(E[0],H[0],f[0],z[0]),se=Math.min(E[1],H[1],f[1],z[1]),ie=Math.max(E[0],H[0],f[0],z[0]),oe=Math.max(E[1],H[1],f[1],z[1]),he=this.svgFactory.createElement("svg:rect");he.setAttributeNS(null,"x",J),he.setAttributeNS(null,"y",se),he.setAttributeNS(null,"width",ie-J),he.setAttributeNS(null,"height",oe-se),he.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&he.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(he)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const g=o[1],m=o[2],c=o[3]||i.IDENTITY_MATRIX,[E,H,f,z]=o[4],J=o[5],se=o[6],ie=o[7],oe=`shading${S++}`,[he,ae,pe,Ae]=i.Util.normalizeRect([...i.Util.applyTransform([E,H],c),...i.Util.applyTransform([f,z],c)]),[ve,Ce]=i.Util.singularValueDecompose2dScale(c),Se=J*ve,K=se*Ce,C=this.svgFactory.createElement("svg:pattern");C.setAttributeNS(null,"id",oe),C.setAttributeNS(null,"patternUnits","userSpaceOnUse"),C.setAttributeNS(null,"width",Se),C.setAttributeNS(null,"height",K),C.setAttributeNS(null,"x",`${he}`),C.setAttributeNS(null,"y",`${ae}`);const P=this.svg,j=this.transformMatrix,G=this.current.fillColor,V=this.current.strokeColor,Y=this.svgFactory.create(pe-he,Ae-ae);if(this.svg=Y,this.transformMatrix=c,ie===2){const q=i.Util.makeHexColor(...g);this.current.fillColor=q,this.current.strokeColor=q}return this.executeOpTree(this.convertOpList(m)),this.svg=P,this.transformMatrix=j,this.current.fillColor=G,this.current.strokeColor=V,C.append(Y.childNodes[0]),this.defs.append(C),`url(#${oe})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const g=`shading${S++}`,m=o[3];let c;switch(o[1]){case"axial":const E=o[4],H=o[5];c=this.svgFactory.createElement("svg:linearGradient"),c.setAttributeNS(null,"id",g),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"x1",E[0]),c.setAttributeNS(null,"y1",E[1]),c.setAttributeNS(null,"x2",H[0]),c.setAttributeNS(null,"y2",H[1]);break;case"radial":const f=o[4],z=o[5],J=o[6],se=o[7];c=this.svgFactory.createElement("svg:radialGradient"),c.setAttributeNS(null,"id",g),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"cx",z[0]),c.setAttributeNS(null,"cy",z[1]),c.setAttributeNS(null,"r",se),c.setAttributeNS(null,"fx",f[0]),c.setAttributeNS(null,"fy",f[1]),c.setAttributeNS(null,"fr",J);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const E of m){const H=this.svgFactory.createElement("svg:stop");H.setAttributeNS(null,"offset",E[0]),H.setAttributeNS(null,"stop-color",E[1]),c.append(H)}return this.defs.append(c),`url(#${g})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,g){this.current.dashArray=o,this.current.dashPhase=g}constructPath(o,g){const m=this.current;let c=m.x,E=m.y,H=[],f=0;for(const z of o)switch(z|0){case i.OPS.rectangle:c=g[f++],E=g[f++];const J=g[f++],se=g[f++],ie=c+J,oe=E+se;H.push("M",u(c),u(E),"L",u(ie),u(E),"L",u(ie),u(oe),"L",u(c),u(oe),"Z");break;case i.OPS.moveTo:c=g[f++],E=g[f++],H.push("M",u(c),u(E));break;case i.OPS.lineTo:c=g[f++],E=g[f++],H.push("L",u(c),u(E));break;case i.OPS.curveTo:c=g[f+4],E=g[f+5],H.push("C",u(g[f]),u(g[f+1]),u(g[f+2]),u(g[f+3]),u(c),u(E)),f+=6;break;case i.OPS.curveTo2:H.push("C",u(c),u(E),u(g[f]),u(g[f+1]),u(g[f+2]),u(g[f+3])),c=g[f+2],E=g[f+3],f+=4;break;case i.OPS.curveTo3:c=g[f+2],E=g[f+3],H.push("C",u(g[f]),u(g[f+1]),u(c),u(E),u(c),u(E)),f+=4;break;case i.OPS.closePath:H.push("Z");break}H=H.join(" "),m.path&&o.length>0&&o[0]!==i.OPS.rectangle&&o[0]!==i.OPS.moveTo?H=m.path.getAttributeNS(null,"d")+H:(m.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(m.path)),m.path.setAttributeNS(null,"d",H),m.path.setAttributeNS(null,"fill","none"),m.element=m.path,m.setCurrentPoint(c,E)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const g=`clippath${I++}`,m=this.svgFactory.createElement("svg:clipPath");m.setAttributeNS(null,"id",g),m.setAttributeNS(null,"transform",R(this.transformMatrix));const c=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?c.setAttributeNS(null,"clip-rule","evenodd"):c.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,m.append(c),this.defs.append(m),o.activeClipUrl){o.clipGroup=null;for(const E of this.extraStack)E.clipGroup=null;m.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${g})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const g=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",g)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[g,m]of o)switch(g){case"LW":this.setLineWidth(m);break;case"LC":this.setLineCap(m);break;case"LJ":this.setLineJoin(m);break;case"ML":this.setMiterLimit(m);break;case"D":this.setDash(m[0],m[1]);break;case"RI":this.setRenderingIntent(m);break;case"FL":this.setFlatness(m);break;case"Font":this.setFont(m);break;case"CA":this.setStrokeAlpha(m);break;case"ca":this.setFillAlpha(m);break;default:(0,i.warn)(`Unimplemented graphic state operator ${g}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,g=1){const m=this.current;let c=m.dashArray;g!==1&&c.length>0&&(c=c.map(function(E){return g*E})),o.setAttributeNS(null,"stroke",m.strokeColor),o.setAttributeNS(null,"stroke-opacity",m.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",u(m.miterLimit)),o.setAttributeNS(null,"stroke-linecap",m.lineCap),o.setAttributeNS(null,"stroke-linejoin",m.lineJoin),o.setAttributeNS(null,"stroke-width",u(g*m.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",c.map(u).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",u(g*m.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const g=this.getObject(o);if(!g){(0,i.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(g)}paintInlineImageXObject(o,g){const m=o.width,c=o.height,E=M(o,this.forceDataSchema,!!g),H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x","0"),H.setAttributeNS(null,"y","0"),H.setAttributeNS(null,"width",u(m)),H.setAttributeNS(null,"height",u(c)),this.current.element=H,this.clip("nonzero");const f=this.svgFactory.createElement("svg:image");f.setAttributeNS(v,"xlink:href",E),f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y",u(-c)),f.setAttributeNS(null,"width",u(m)+"px"),f.setAttributeNS(null,"height",u(c)+"px"),f.setAttributeNS(null,"transform",`scale(${u(1/m)} ${u(-1/c)})`),g?g.append(f):this._ensureTransformGroup().append(f)}paintImageMaskXObject(o){const g=this.getObject(o.data,o);if(g.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const m=this.current,c=g.width,E=g.height,H=m.fillColor;m.maskId=`mask${N++}`;const f=this.svgFactory.createElement("svg:mask");f.setAttributeNS(null,"id",m.maskId);const z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y","0"),z.setAttributeNS(null,"width",u(c)),z.setAttributeNS(null,"height",u(E)),z.setAttributeNS(null,"fill",H),z.setAttributeNS(null,"mask",`url(#${m.maskId})`),this.defs.append(f),this._ensureTransformGroup().append(z),this.paintInlineImageXObject(g,f)}paintFormXObjectBegin(o,g){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),g){const m=g[2]-g[0],c=g[3]-g[1],E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x",g[0]),E.setAttributeNS(null,"y",g[1]),E.setAttributeNS(null,"width",u(m)),E.setAttributeNS(null,"height",u(c)),this.current.element=E,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const g=this.svgFactory.create(o.width,o.height),m=this.svgFactory.createElement("svg:defs");g.append(m),this.defs=m;const c=this.svgFactory.createElement("svg:g");return c.setAttributeNS(null,"transform",R(o.transform)),g.append(c),this.svg=c,g}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",R(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return l.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return y.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return D.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return T.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return v.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return s.version}});var t=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),l=__w_pdfjs_require__(27),y=__w_pdfjs_require__(5),D=__w_pdfjs_require__(32),T=__w_pdfjs_require__(14),v=__w_pdfjs_require__(35),_=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfWorker=""+new URL("pdf.worker-0be00963.js",import.meta.url).href;var FileSaver_min={exports:{}};(function(e,t){(function(s,n){n()})(commonjsGlobal,function(){function s(v,_){return typeof _>"u"?_={autoBom:!1}:typeof _!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(v.type)?new Blob(["\uFEFF",v],{type:v.type}):v}function n(v,_,L){var O=new XMLHttpRequest;O.open("GET",v),O.responseType="blob",O.onload=function(){T(O.response,_,L)},O.onerror=function(){console.error("could not download file")},O.send()}function i(v){var _=new XMLHttpRequest;_.open("HEAD",v,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function l(v){try{v.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),v.dispatchEvent(_)}}var y=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,D=y.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),T=y.saveAs||(typeof window!="object"||window!==y?function(){}:"download"in HTMLAnchorElement.prototype&&!D?function(v,_,L){var O=y.URL||y.webkitURL,M=document.createElement("a");_=_||v.name||"download",M.download=_,M.rel="noopener",typeof v=="string"?(M.href=v,M.origin===location.origin?l(M):i(M.href)?n(v,_,L):l(M,M.target="_blank")):(M.href=O.createObjectURL(v),setTimeout(function(){O.revokeObjectURL(M.href)},4e4),setTimeout(function(){l(M)},0))}:"msSaveOrOpenBlob"in navigator?function(v,_,L){if(_=_||v.name||"download",typeof v!="string")navigator.msSaveOrOpenBlob(s(v,L),_);else if(i(v))n(v,_,L);else{var O=document.createElement("a");O.href=v,O.target="_blank",setTimeout(function(){l(O)})}}:function(v,_,L,O){if(O=O||open("","_blank"),O&&(O.document.title=O.document.body.innerText="downloading..."),typeof v=="string")return n(v,_,L);var M=v.type==="application/octet-stream",w=/constructor/i.test(y.HTMLElement)||y.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||M&&w||D)&&typeof FileReader<"u"){var u=new FileReader;u.onloadend=function(){var N=u.result;N=A?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),O?O.location.href=N:location=N,O=null},u.readAsDataURL(v)}else{var R=y.URL||y.webkitURL,I=R.createObjectURL(v);O?O.location=I:location.href=I,O=null,setTimeout(function(){R.revokeObjectURL(I)},4e4)}});y.saveAs=T.saveAs=T,e.exports=T})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;const imgData=[];async function loadPdf(e,t,s,n){const i=pdfExports.getDocument({url:e,disableRange:!0});imgData.length=0,i.promise.then(l=>{const y=l.numPages;for(let D=1;D<=y;D++)l.getPage(D).then(T=>{const v=document.createElement("canvas"),_=v.getContext("2d"),L=T.getViewport({scale:1});v.width=L.width,v.height=L.height;const O={canvasContext:_,viewport:L};T.render(O).promise.then(function(){imgData.push({src:v.toDataURL("image/jpeg",+t),width:v.width,height:v.height}),imgData.length===y&&img2Pdf(s,n)})})})}function img2Pdf(e,t){const s={autoFirstPage:!1,compress:!1},n=new PDFDocument(s),i=n.pipe(blobStream());for(let l=0;l<imgData.length;l++){const{src:y,width:D,height:T}=imgData[l];n.addPage({size:[D,T]}),n.image(y,0,0)}n.end(),i.on("finish",function(){var l=i.toBlob("application/pdf");FileSaver_minExports.saveAs(l,e),t.value=!1})}const _hoisted_1$1=createBaseVNode("div",{"i-carbon-document-pdf":"","inline-block":"","text-4xl":""},null,-1),_hoisted_2=createBaseVNode("p",null," Compress PDF ",-1),_hoisted_3=createBaseVNode("div",{"py-4":""},null,-1),_hoisted_4={m:"0 auto"},_hoisted_5={relative:"","h-10":""},_hoisted_6={for:"load"},_hoisted_7=createBaseVNode("span",{class:"m-3 text-sm btn"}," Load PDF ",-1),_hoisted_8=createBaseVNode("div",{"py-3":""},null,-1),_hoisted_9={"py-2":""},_hoisted_10=createBaseVNode("div",{"py-4":""},null,-1),_hoisted_11=createBaseVNode("div",{"py-4":""},null,-1),_hoisted_12=createBaseVNode("p",null,[createBaseVNode("em",{"text-sm":"",op75:""},"No sever, so safe")],-1),_hoisted_13={position:"fixed","left-0":"","top-0":"","right-0":"","bottom-0":"",flex:"","items-center":"","justify-center":"","bg-teal-100":""},_hoisted_14=createBaseVNode("span",{class:"loading btn","i-carbon-3rd-party-connected":"","text-4xl":""},null,-1),_hoisted_15=[_hoisted_14],_sfc_main$1=defineComponent({__name:"index",setup(e){const t=ref("No file Chosen."),s=ref(""),n=ref(.3),i=ref(!1);function l(D){const T=D.target.files;if(T&&T.length>0){const v=T[0],_=new FileReader;_.readAsDataURL(v),_.onloadend=()=>{s.value=_.result,t.value=T[0].name}}else t.value="No file Chosen"}function y(){s.value===""||t.value==="No file Chosen"||(i.value=!0,loadPdf(s.value,+n.value,t.value,i))}return(D,T)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",null,[_hoisted_1$1,_hoisted_2,_hoisted_3,createBaseVNode("div",_hoisted_4,[createBaseVNode("div",_hoisted_5,[createBaseVNode("input",{id:"load","display-none":"",type:"file",accept:"application/pdf",onChange:l},null,32),createBaseVNode("label",_hoisted_6,[_hoisted_7,createBaseVNode("span",null,toDisplayString(unref(t)),1)])])]),_hoisted_8,createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{class:"range",title:"Lower the Value, Better the Compression",type:"range",min:"0",max:"1","onUpdate:modelValue":T[0]||(T[0]=v=>isRef(n)?n.value=v:null),step:"0.1"},null,512),[[vModelText,unref(n)]]),createBaseVNode("p",_hoisted_9," Compression Range： "+toDisplayString(unref(n)),1)]),_hoisted_10,createBaseVNode("div",{m:"0 auto"},[createBaseVNode("button",{class:"m-3 text-sm btn",onClick:y}," Download PDF ")]),_hoisted_11,_hoisted_12]),withDirectives(createBaseVNode("div",_hoisted_13,_hoisted_15,512),[[vShow,unref(i)]])],64))}}),_hoisted_1={"font-sans":"",p:"x-4 y-10",text:"center gray-700 dark:gray-200"},_sfc_main=defineComponent({__name:"App",setup(e){return(t,s)=>{const n=__unplugin_components_0;return openBlock(),createElementBlock("main",_hoisted_1,[createVNode(_sfc_main$1),createVNode(n)])}}}),tailwind="",main="",__uno="",app=createApp(_sfc_main);app.mount("#app");
